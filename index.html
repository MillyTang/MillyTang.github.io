<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Comfortably Numb">
<meta property="og:url" content="https://github.com/MillyTang/MillyTang.github.io/index.html">
<meta property="og:site_name" content="Comfortably Numb">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://github.com/MillyTang/MillyTang.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Comfortably Numb</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Comfortably Numb</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">åæ–¹å‘çš„é’Ÿ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/25/categorys/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/25/categorys/" class="post-title-link" itemprop="url">éƒ¨åˆ†èŒƒç•´è®º(category-theory-for-programmers) & é«˜é˜¶ç±»å‹åŠå…¶ä»–</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-25 15:47:17" itemprop="dateCreated datePublished" datetime="2022-01-25T15:47:17+08:00">2022-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-02-08 14:19:38" itemprop="dateModified" datetime="2022-02-08T14:19:38+08:00">2022-02-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é«˜é˜¶ç±»å‹åŠå…¶ä»–"><a href="#é«˜é˜¶ç±»å‹åŠå…¶ä»–" class="headerlink" title="é«˜é˜¶ç±»å‹åŠå…¶ä»–"></a>é«˜é˜¶ç±»å‹åŠå…¶ä»–</h2><h3 id="æ›´åŠ é€šç”¨çš„-map"><a href="#æ›´åŠ é€šç”¨çš„-map" class="headerlink" title="æ›´åŠ é€šç”¨çš„ map"></a>æ›´åŠ é€šç”¨çš„ map</h3><h3 id="å•å­"><a href="#å•å­" class="headerlink" title="å•å­"></a>å•å­</h3><h3 id="ç»§ç»­å­¦ä¹ "><a href="#ç»§ç»­å­¦ä¹ " class="headerlink" title="ç»§ç»­å­¦ä¹ "></a>ç»§ç»­å­¦ä¹ </h3><h2 id="è¡¥å……ï¼šèŒƒç•´è®ºéƒ¨åˆ†å†…å®¹"><a href="#è¡¥å……ï¼šèŒƒç•´è®ºéƒ¨åˆ†å†…å®¹" class="headerlink" title="è¡¥å……ï¼šèŒƒç•´è®ºéƒ¨åˆ†å†…å®¹"></a>è¡¥å……ï¼šèŒƒç•´è®ºéƒ¨åˆ†å†…å®¹</h2><blockquote>
<p>å¯¹ã€Šç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿã€‹éƒ¨åˆ†ç« èŠ‚å†…å®¹çš„è¡¥å……ï¼Œä¸ä»£è¡¨æœ¬äººå¯¹æœ¬ä¹¦æœ‰æ·±åˆ»ç†è§£ï¼Œï¼ˆå®é™…ä¸Šä¸æ€ä¹ˆç†è§£</p>
</blockquote>
<h3 id="ç¬¬äº”ç« -Products-and-Coproducts"><a href="#ç¬¬äº”ç« -Products-and-Coproducts" class="headerlink" title="ç¬¬äº”ç« -Products and Coproducts"></a>ç¬¬äº”ç« -Products and Coproducts</h3><h3 id="ç¬¬å…­ç« -simply-ADT-AlgeBraic-Data-Type-ç®€å•ä»£æ•°æ•°æ®ç±»å‹"><a href="#ç¬¬å…­ç« -simply-ADT-AlgeBraic-Data-Type-ç®€å•ä»£æ•°æ•°æ®ç±»å‹" class="headerlink" title="ç¬¬å…­ç« -simply ADT(AlgeBraic Data Type) ç®€å•ä»£æ•°æ•°æ®ç±»å‹"></a>ç¬¬å…­ç« -simply ADT(AlgeBraic Data Type) ç®€å•ä»£æ•°æ•°æ®ç±»å‹</h3><h4 id="Product-Type-ä¹˜ç§¯"><a href="#Product-Type-ä¹˜ç§¯" class="headerlink" title="Product Type ä¹˜ç§¯"></a>Product Type ä¹˜ç§¯</h4><h4 id="Records-è®°å½•"><a href="#Records-è®°å½•" class="headerlink" title="Records è®°å½•"></a>Records è®°å½•</h4><h4 id="Sum-Type-å’Œç±»å‹"><a href="#Sum-Type-å’Œç±»å‹" class="headerlink" title="Sum Type å’Œç±»å‹"></a>Sum Type å’Œç±»å‹</h4><h4 id="Algebra-of-types"><a href="#Algebra-of-types" class="headerlink" title="Algebra of types"></a>Algebra of types</h4><h3 id="ç¬¬ä¹ç« -Function-Types"><a href="#ç¬¬ä¹ç« -Function-Types" class="headerlink" title="ç¬¬ä¹ç« -Function Types"></a>ç¬¬ä¹ç« -Function Types</h3><h4 id="CurryingæŸ¯é‡ŒåŒ–"><a href="#CurryingæŸ¯é‡ŒåŒ–" class="headerlink" title="CurryingæŸ¯é‡ŒåŒ–"></a>CurryingæŸ¯é‡ŒåŒ–</h4><h3 id="ç¬¬åä¸‰ç« -Free-Monoids-è‡ªç”±å•å­"><a href="#ç¬¬åä¸‰ç« -Free-Monoids-è‡ªç”±å•å­" class="headerlink" title="ç¬¬åä¸‰ç« -Free Monoids è‡ªç”±å•å­"></a>ç¬¬åä¸‰ç« -Free Monoids è‡ªç”±å•å­</h3><h2 id="çº¯å‡½æ•°ã€å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨ã€æ³›å‹ç¼–ç¨‹"><a href="#çº¯å‡½æ•°ã€å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨ã€æ³›å‹ç¼–ç¨‹" class="headerlink" title="çº¯å‡½æ•°ã€å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨ã€æ³›å‹ç¼–ç¨‹"></a>çº¯å‡½æ•°ã€å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨ã€æ³›å‹ç¼–ç¨‹</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnFrancais/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/ilearnFrancais/" class="post-title-link" itemprop="url">FranÃ§ais</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:40:24" itemprop="dateCreated datePublished" datetime="2022-01-11T15:40:24+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-28 21:19:35" itemprop="dateModified" datetime="2022-01-28T21:19:35+08:00">2022-01-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="åŠ¨è¯"><a href="#åŠ¨è¯" class="headerlink" title="åŠ¨è¯"></a>åŠ¨è¯</h2><h3 id="aller-erç»“å°¾-ç‰¹æ®Š"><a href="#aller-erç»“å°¾-ç‰¹æ®Š" class="headerlink" title="aller - erç»“å°¾+ç‰¹æ®Š"></a>aller - erç»“å°¾+ç‰¹æ®Š</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>ç®€å•å°†æ¥æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
<tbody><tr>
<td>je</td>
<td>vais</td>
<td>irai</td>
<td>suis allÃ©</td>
</tr>
<tr>
<td>tu</td>
<td>vas</td>
<td>iras</td>
<td>es allÃ©</td>
</tr>
<tr>
<td>il/elle/on</td>
<td>va</td>
<td>ira</td>
<td>est allÃ©(e)</td>
</tr>
<tr>
<td>ils/elles</td>
<td>vont</td>
<td>iront</td>
<td>sont allÃ©s</td>
</tr>
<tr>
<td>nous</td>
<td>allons</td>
<td>irons</td>
<td>sommes allÃ©s</td>
</tr>
<tr>
<td>vous</td>
<td>allez</td>
<td>irez</td>
<td>Ãªtes allÃ©s</td>
</tr>
</tbody></table>
<p>ä¾‹å¥ï¼š</p>
<h4 id="ç›´é™ˆå¼ç°åœ¨æ—¶"><a href="#ç›´é™ˆå¼ç°åœ¨æ—¶" class="headerlink" title="ç›´é™ˆå¼ç°åœ¨æ—¶"></a>ç›´é™ˆå¼ç°åœ¨æ—¶</h4><ul>
<li>å¦å®š+åŠ¨è¯åŸå‹<ol>
<li>je ne vais pas <code>prendre</code> le petit dÃ©jeuner(m.s.n) ce matin(m.s.n)</li>
</ol>
</li>
</ul>
<h4 id="ç®€å•å°†æ¥æ—¶"><a href="#ç®€å•å°†æ¥æ—¶" class="headerlink" title="ç®€å•å°†æ¥æ—¶"></a>ç®€å•å°†æ¥æ—¶</h4><h3 id="avoir-ç¬¬ä¸‰ç±»"><a href="#avoir-ç¬¬ä¸‰ç±»" class="headerlink" title="avoir - ç¬¬ä¸‰ç±»"></a>avoir - ç¬¬ä¸‰ç±»</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>ç®€å•å°†æ¥æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
<tbody><tr>
<td>je</td>
<td>ai</td>
<td>aurai</td>
<td>ai eu</td>
</tr>
<tr>
<td>tu</td>
<td>as</td>
<td>auras</td>
<td>as eu</td>
</tr>
<tr>
<td>il/elle/on</td>
<td>a</td>
<td>aura</td>
<td>a eu</td>
</tr>
<tr>
<td>ils/elles</td>
<td>ont</td>
<td>auront</td>
<td>ont eu</td>
</tr>
<tr>
<td>nous</td>
<td>avons</td>
<td>aurons</td>
<td>avons eu</td>
</tr>
<tr>
<td>vous</td>
<td>avez</td>
<td>aurez</td>
<td>avez eu</td>
</tr>
</tbody></table>
<h3 id="etre"><a href="#etre" class="headerlink" title="Ãªtre"></a>Ãªtre</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>ç®€å•å°†æ¥æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
<tbody><tr>
<td>je</td>
<td>suis</td>
<td>serai</td>
<td>ai Ã©tÃ©</td>
</tr>
<tr>
<td>tu</td>
<td>es</td>
<td>seras</td>
<td>as Ã©tÃ©</td>
</tr>
<tr>
<td>il/elle/on</td>
<td>est</td>
<td>sera</td>
<td>a Ã©tÃ©</td>
</tr>
<tr>
<td>ils/elles</td>
<td>sont</td>
<td>seront</td>
<td>ont Ã©tÃ©</td>
</tr>
<tr>
<td>nous</td>
<td>sommes</td>
<td>serons</td>
<td>avons Ã©tÃ©</td>
</tr>
<tr>
<td>vous</td>
<td>Ãªtes</td>
<td>serez</td>
<td>avez Ã©tÃ©</td>
</tr>
</tbody></table>
<p>ä¾‹å¥ï¼š</p>
<h4 id="ç›´é™ˆå¼ç°åœ¨æ—¶-1"><a href="#ç›´é™ˆå¼ç°åœ¨æ—¶-1" class="headerlink" title="ç›´é™ˆå¼ç°åœ¨æ—¶"></a>ç›´é™ˆå¼ç°åœ¨æ—¶</h4><ul>
<li>tu es en retard</li>
</ul>
<h4 id="ç®€å•å°†æ¥æ—¶-1"><a href="#ç®€å•å°†æ¥æ—¶-1" class="headerlink" title="ç®€å•å°†æ¥æ—¶"></a>ç®€å•å°†æ¥æ—¶</h4><ul>
<li><p>å¦å®š</p>
<ol>
<li>je ne serai pas en retard.</li>
</ol>
</li>
<li><p>è‚¯å®š</p>
<ol>
<li>je serai de retour Ã  vingt-deux heures.</li>
</ol>
</li>
<li><p>åé—®</p>
<ol>
<li>tu ne seras pas en retard, <code>n&#39;est-ce pas</code> ? - non, je ne suis jamais en retard</li>
</ol>
</li>
</ul>
<h3 id="vouloir-ç¬¬ä¸‰ç±»"><a href="#vouloir-ç¬¬ä¸‰ç±»" class="headerlink" title="vouloir - ç¬¬ä¸‰ç±»"></a>vouloir - ç¬¬ä¸‰ç±»</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>å‘½ä»¤å¼ç°åœ¨æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
<tbody><tr>
<td>je</td>
<td>veux</td>
<td>-</td>
<td>â€˜ai voulu</td>
</tr>
<tr>
<td>tu</td>
<td>veux</td>
<td>veux/veuille</td>
<td>as voulu</td>
</tr>
<tr>
<td>il/elle/on</td>
<td>veut</td>
<td>-</td>
<td>a voulu</td>
</tr>
<tr>
<td>ils/elles</td>
<td>veulent</td>
<td>-</td>
<td>ont voulu</td>
</tr>
<tr>
<td>nous</td>
<td>voulons</td>
<td>voulons/veuillons</td>
<td>avons voulu</td>
</tr>
<tr>
<td>vous</td>
<td>voulez</td>
<td>voulez/veuillez</td>
<td>avez voulu</td>
</tr>
</tbody></table>
<h3 id="prendre-ç¬¬ä¸‰ç±»"><a href="#prendre-ç¬¬ä¸‰ç±»" class="headerlink" title="prendre - ç¬¬ä¸‰ç±»"></a>prendre - ç¬¬ä¸‰ç±»</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>ç®€å•å°†æ¥æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
</table>
<h3 id="sortir-ç¬¬ä¸‰ç±»"><a href="#sortir-ç¬¬ä¸‰ç±»" class="headerlink" title="sortir - ç¬¬ä¸‰ç±»"></a>sortir - ç¬¬ä¸‰ç±»</h3><table>
<thead>
<tr>
<th>ä¸»è¯­</th>
<th>ç›´é™ˆå¼ç°åœ¨æ—¶</th>
<th>ç®€å•å°†æ¥æ—¶</th>
<th>å¤åˆè¿‡å»æ—¶</th>
</tr>
</thead>
<tbody><tr>
<td>je</td>
<td>sor<code>s</code></td>
<td>sor<code>tirai</code></td>
<td>â€˜ai(suis) sor<code>ti</code></td>
</tr>
<tr>
<td>tu</td>
<td>sor<code>s</code></td>
<td>sor<code>tiras</code></td>
<td>as(es) sor<code>ti</code></td>
</tr>
<tr>
<td>il/elle/on</td>
<td>sor<code>t</code></td>
<td>sor<code>tira</code></td>
<td>a(est) sor<code>ti</code></td>
</tr>
<tr>
<td>nous</td>
<td>sor<code>tons</code></td>
<td>sor<code>tirons</code></td>
<td>avons(sommes) sor<code>ti(s)</code></td>
</tr>
<tr>
<td>vous</td>
<td>sor<code>tez</code></td>
<td>sor<code>tirez</code></td>
<td>avez(Ãªtes) sor<code>ti(s)</code></td>
</tr>
<tr>
<td>ils</td>
<td>sor<code>tent</code></td>
<td>sor<code>tiront</code></td>
<td>ont(sont) sor<code>ti(s)</code></td>
</tr>
</tbody></table>
<h2 id="ä»£åŠ¨è¯"><a href="#ä»£åŠ¨è¯" class="headerlink" title="ä»£åŠ¨è¯"></a>ä»£åŠ¨è¯</h2><h3 id="se-passer"><a href="#se-passer" class="headerlink" title="se passer"></a>se passer</h3><ol>
<li>quelque chose va <code>se passer(happen)</code></li>
<li>je tâ€™informerai de ce qui <code>se passe</code></li>
</ol>
<h2 id="è¯ç»„"><a href="#è¯ç»„" class="headerlink" title="è¯ç»„"></a>è¯ç»„</h2><ul>
<li>en mesure de: be able to</li>
<li>en retard = tard: late</li>
<li>quelque chose: something</li>
<li>bien sÃ»r: sure</li>
<li>ne + plus: never again</li>
<li>en blanc: in white</li>
</ul>
<h2 id="å‰¯è¯"><a href="#å‰¯è¯" class="headerlink" title="å‰¯è¯"></a>å‰¯è¯</h2><ul>
<li>seule: alone, lonely</li>
<li>ne + jamais: never</li>
<li>seulment: just, only</li>
<li>assurÃ©ment: definitely, most certainly, for sure</li>
<li>si: so, such</li>
</ul>
<h2 id="æ—¶é—´-amp-æ—¶é—´æ®µ"><a href="#æ—¶é—´-amp-æ—¶é—´æ®µ" class="headerlink" title="æ—¶é—´&amp;æ—¶é—´æ®µ"></a>æ—¶é—´&amp;æ—¶é—´æ®µ</h2><ul>
<li>Ã  lâ€™heure: on time</li>
<li>toute la journÃ©e: all day / all day long</li>
<li>une mauvaise(grosse) journÃ©e: a bad(big) day</li>
<li>Ã  quelle heure: what time</li>
<li>dans <strong>lâ€™aprÃ¨s-midi</strong>: in the afternoon</li>
<li>ce matin, demain, aprÃ¨s-midi</li>
</ul>
<h2 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h2><ul>
<li>vingt-deux</li>
</ul>
<h3 id="ä¾‹å¥-ç®€å•å°†æ¥æ—¶"><a href="#ä¾‹å¥-ç®€å•å°†æ¥æ—¶" class="headerlink" title="ä¾‹å¥ - ç®€å•å°†æ¥æ—¶"></a>ä¾‹å¥ - ç®€å•å°†æ¥æ—¶</h3><ol>
<li>quelque chose va se passer - something is going to happen</li>
<li>il sortira assurÃ©ment dans lâ€™aprÃ¨s-midi</li>
<li>je nâ€™en suis pas certain - i donâ€™t know for sure</li>
<li>je vais Ãªtre en retard - i am going to be late</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnAnglais/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/ilearnAnglais/" class="post-title-link" itemprop="url">ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ - ç±»å‹éƒ¨åˆ†&è¡¥å……çŸ¥è¯†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:40:07" itemprop="dateCreated datePublished" datetime="2022-01-11T15:40:07+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-02-09 15:29:28" itemprop="dateModified" datetime="2022-02-09T15:29:28+08:00">2022-02-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç¬¬ä¸ƒç« -Subtyping-å„¿ç±»å‹å…³ç³»"><a href="#ç¬¬ä¸ƒç« -Subtyping-å„¿ç±»å‹å…³ç³»" class="headerlink" title="ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»"></a>ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»</h2><p>ç±»å‹ä¹‹é—´çš„å…³ç³»-å„¿ç±»å‹å…³ç³»ï¼š1. åœ¨TSä¸­æ¶ˆé™¤ç±»å‹çš„æ­§ä¹‰ï¼›2.å®‰å…¨çš„ååºåˆ—åŒ–ï¼›3.é”™è¯¯æƒ…å†µçš„å€¼ï¼›4.å’Œç±»å‹ã€é›†åˆä»¥åŠå‡½æ•°çš„ç±»å‹å…¼å®¹ã€‚</p>
<h3 id="åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹"><a href="#åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹" class="headerlink" title="åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹"></a>åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹</h3><p>å›é¡¾ç£…åŠ›ç§’é‚£ä¸ªä¾‹å­ï¼Œä½¿ç”¨äº† <code>unique symbol</code> æ¥åŒºåˆ†ä¸¤ä¸ªç›¸ä¼¼ç±»å‹ï¼Œç¡®ä¿ç±»å‹æ£€æŸ¥å™¨ä¸ä¼šæŠŠ<code>ä¸€ä¸ªç±»å‹çš„å€¼</code>è§£é‡Šä¸º<code>å¦ä¸€ä¸ªç±»å‹çš„å€¼</code> - é€šè¿‡<code>æ¨¡æ‹Ÿåä¹‰Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ğŸ‘‰è§ä¸‹æ–‡</p>
<figure class="highlight ts"><figcaption><span>çœç•¥NsTypeå’ŒLbsTypeçš„unique symbolå”¯ä¸€å±æ€§</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> NsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Ns &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// [NsType]: void;</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> LbfsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Lbfs &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// [LbfsType]: void;</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†2ä¸ª NsType &amp; LbsType çœç•¥ï¼Œå°†2ä¸ªå¯¹è±¡äº’ä¼ ï¼Œç¼–è¾‘å™¨ä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// æ¼”ç¤ºè¿‡ç¨‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">acceptNs</span>(<span class="params">momentum: Ns</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Momentum: <span class="subst">$&#123;Momentum.value&#125;</span>Ns`</span>)</span><br><span class="line">&#125;</span><br><span class="line">acceptNs(<span class="keyword">new</span> Lbfs(<span class="number">10</span>)) <span class="comment">// å®é™…è°ƒç”¨ä¼ é”™å‚æ•°ï¼Œä¸ä¼šæŠ¥é”™ï¼Œæ§åˆ¶å°æ‰“å°ï¼šMomentum: 10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Subtypingï¼šå¦‚æœåœ¨æœŸæœ›ç±»å‹ <strong>T</strong> çš„å®ä¾‹çš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ç±»å‹ <strong>S</strong> çš„å®ä¾‹ï¼Œé‚£ä¹ˆç§°ç±»å‹ <strong>S</strong> æ˜¯ç±»å‹ <strong>T</strong> çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ã€‚- é‡Œæ°(Liskov substitution principle)æ›¿æ¢åŸåˆ™ä¸­çš„ä¸€ç§éæ­£å¼å®šä¹‰</p>
</blockquote>
<h4 id="Subtyping-çš„æ„æˆ"><a href="#Subtyping-çš„æ„æˆ" class="headerlink" title="Subtyping çš„æ„æˆ"></a>Subtyping çš„æ„æˆ</h4><ol>
<li><code>Normal Subtyping</code>: æ˜¾ç¤ºå£°æ˜ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™äºŒè€…æ„æˆSubtyping å…³ç³»</li>
<li><code>Structural Subtyping</code>: å¦‚æœä¸€ä¸ªç±»å‹å…·æœ‰å¦ä¸€ä¸ªç±»å‹çš„æ‰€æœ‰æˆå‘˜ï¼Œå¹¶ä¸”å¯èƒ½è¿˜æœ‰å…¶ä»–æˆå‘˜ï¼Œé‚£ä¹ˆå‰è€…æ˜¯åè€…çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹) - <strong><em>TSä½¿ç”¨Structural Subtyping</em></strong></li>
</ol>
<h4 id="Structural-Subtyping-å’Œ-Normal-Subtyping-çš„ä¼˜ç¼ºç‚¹"><a href="#Structural-Subtyping-å’Œ-Normal-Subtyping-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Structural Subtyping å’Œ Normal Subtyping çš„ä¼˜ç¼ºç‚¹"></a>Structural Subtyping å’Œ Normal Subtyping çš„ä¼˜ç¼ºç‚¹</h4><ol>
<li>Normal Subtyping: åœ¨ç±»å‹é—´å»ºç«‹å…³ç³»ï¼Œå³ä½¿ç±»å‹æ˜¯å¤–éƒ¨ç±»å‹ï¼Œä¸åœ¨æ§åˆ¶èŒƒå›´å†…ï¼›</li>
<li>Structural Subtyping: é»˜è®¤ç»“æ„ç›¸ä¼¼ä¸ä¼šæ··æ·†å‚æ•°ç±»å‹</li>
</ol>
<h4 id="åœ¨-TS-ä¸­æ¨¡æ‹Ÿ-Normal-Subtyping"><a href="#åœ¨-TS-ä¸­æ¨¡æ‹Ÿ-Normal-Subtyping" class="headerlink" title="åœ¨ TS ä¸­æ¨¡æ‹Ÿ Normal Subtyping"></a>åœ¨ TS ä¸­æ¨¡æ‹Ÿ Normal Subtyping</h4><p>åœ¨TSä¸­ï¼Œ<code>unique symbol</code> ç”Ÿæˆäº†ä¸€ä¸ªåœ¨æ‰€æœ‰ä»£ç ä¸­ä¿æŒå”¯ä¸€çš„<code>åç§°</code>ã€‚ç”¨æˆ·å£°æ˜çš„åç§°ç»å¯¹ä¸ä¼šåŒ¹é…ç”Ÿæˆçš„åç§°ï¼Œä½¿ç”¨è¯¥åç§°åˆ›å»ºä¸€ä¸ªå±æ€§ï¼Œéœ€è¦ç»™è¿™ä¸ªå±æ€§å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å…³å¿ƒå®ƒçš„å®é™…å€¼ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†ç±»å‹ï¼Œæ‰€ä»¥é€‰æ‹©äº†æœ€é€‚åˆçš„å•å…ƒç±»å‹<code>void</code>ã€‚æ‰€ä»¥å½“è¦åˆ›å»º <code>NS</code>å’Œ<code>Lbfs</code>çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåªèƒ½æ˜¾ç¤ºåœ°ç»§æ‰¿ã€‚</p>
<h3 id="Subtype-äºšç±»å‹ã€å„¿ç±»å‹-çš„æç«¯æƒ…å†µ"><a href="#Subtype-äºšç±»å‹ã€å„¿ç±»å‹-çš„æç«¯æƒ…å†µ" class="headerlink" title="Subtype(äºšç±»å‹ã€å„¿ç±»å‹)çš„æç«¯æƒ…å†µ"></a>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)çš„æç«¯æƒ…å†µ</h3><ol>
<li>æŠŠä»»ä½•ç±»å‹èµ‹å€¼ç»™å®ƒçš„ç±»å‹(Assigning anything to)ï¼š<code>any</code>, <code>unknown</code></li>
<li>ç»™ä»»ä½•ä¸œè¥¿èµ‹å€¼ç±»å‹(assigning to anything)ï¼š<code>any</code>- ä»è€Œç»•è¿‡ç±»å‹æ£€æŸ¥</li>
</ol>
<figure class="highlight ts"><figcaption><span>ååºåˆ—åŒ–any</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON.parse()ååºåˆ—åŒ–è¿”å›ç±»å‹æ˜¯ any</span></span><br><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åªæ˜¯å°è£…äº† JSON.parse() å¹¶è¿”å›äº† any ç±»å‹çš„ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–ä¸€ä¸ªæœ‰æ•ˆçš„ User JSON</span></span><br><span class="line">greet(deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &quot;Alice&quot;&#125;&#x27;</span>))</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªä¸æ˜¯ User å¯¹è±¡çš„å¯¹è±¡</span></span><br><span class="line">greet(<span class="string">&#x27;&#123;&#125;&#x27;</span>) <span class="comment">// è¾“å‡ºhi undefinedï¼Œå› ä¸º `any`ä¼šç»•è¿‡ç±»å‹æ£€æŸ¥</span></span><br></pre></td></tr></table></figure>

<h4 id="Userçš„è¿è¡Œæ—¶æ£€æŸ¥-isUser"><a href="#Userçš„è¿è¡Œæ—¶æ£€æŸ¥-isUser" class="headerlink" title="Userçš„è¿è¡Œæ—¶æ£€æŸ¥ - isUser()"></a>Userçš„è¿è¡Œæ—¶æ£€æŸ¥ - isUser()</h4><p>å¢åŠ ä¸€ä¸ªå±æ€§ç±»å‹æ£€æŸ¥å‡½æ•°å¯ä»¥è§„é¿ç±»å‹é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ä¸è¶³ï¼šæ²¡æœ‰å¼ºåˆ¶è°ƒç”¨ <strong>isUser</strong>ï¼Œæ‰€ä»¥ä¾ç„¶ä¼šå­˜åœ¨å¿˜è®°è°ƒç”¨è€Œå‡ºç°çš„ <code>undefined</code> çš„æƒ…å†µ</p>
<figure class="highlight ts"><figcaption><span>å¢åŠ isUser()å‡½æ•°è°ƒç”¨å‰æ£€æŸ¥ç±»å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ£€æŸ¥ç»™å®šå®å‚æ˜¯å¦æ˜¯ User ç±»å‹ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œå…·æœ‰ string ç±»å‹çš„ name å±æ€§çš„å˜é‡æ˜¯ User ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUser</span>(<span class="params">user: <span class="built_in">any</span></span>): <span class="title">user</span> <span class="title">isUser</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> user.name === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> user: <span class="built_in">any</span> = deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &#x27;</span>Alice<span class="string">&#x27;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">// åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ user æ˜¯å¦å…·æœ‰ stringç±»å‹çš„nameå±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br><span class="line">user = <span class="literal">undefined</span></span><br><span class="line"><span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é¡¶å±‚ç±»å‹-Top-Type-unknown"><a href="#é¡¶å±‚ç±»å‹-Top-Type-unknown" class="headerlink" title="é¡¶å±‚ç±»å‹(Top Type) - unknown"></a>é¡¶å±‚ç±»å‹(Top Type) - unknown</h4><blockquote>
<p>å¦‚æœèƒ½å¤ŸæŠŠä»»ä½•å€¼èµ‹ç»™ä¸€ä¸ªç±»å‹ï¼Œåˆ™ç§°ä¸ºé¡¶å±‚ç±»å‹ï¼Œ<strong>å’Œç±»å‹</strong><code>Object | null | undefined</code> === <code>unknown</code></p>
</blockquote>
<p>ä¸€æ—¦å¿˜è®°è°ƒç”¨ <code>isUser</code>ï¼Œä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹å°±ä¼šæŠ¥é”™ <code>Argument of type &#39;unknown&#39; is not assignable to parameter of type &#39;User&#39;</code></p>
<blockquote>
<p>unknown å’Œ any çš„åŒºåˆ«ï¼šunknown éœ€è¦å­˜åœ¨å¯è½¬æ¢çš„ç±»å‹ï¼Œè€Œ any ä¸éœ€è¦ç›´æ¥å¯ç”¨ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ unknown çš„å¼ºç±»å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å› unknown</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">unknown</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ£€æŸ¥ç»™å®šå®å‚æ˜¯å¦æ˜¯ User ç±»å‹ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œå…·æœ‰ string ç±»å‹çš„ name å±æ€§çš„å˜é‡æ˜¯ User ç±»å‹</span></span><br><span class="line"><span class="comment">// å®å‚ä¿æŒä¸º any</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUser</span>(<span class="params">user: <span class="built_in">any</span></span>): <span class="title">user</span> <span class="title">isUser</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> user.name === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†å˜é‡å£°æ˜ä¸º unknown</span></span><br><span class="line"><span class="comment">// è¿™é‡Œä¸€æ—¦æœ‰å€¼å°±ä¼šæœ‰ç±»å‹ä» any è½¬æ¢ä¸º unknownï¼Œå‘ä¸Šè½¬åŒ–ç±»å‹æ˜¯å®‰å…¨çš„</span></span><br><span class="line"><span class="keyword">let</span> user: unknown = deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &#x27;</span>Alice<span class="string">&#x27;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">// åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ user æ˜¯å¦å…·æœ‰ stringç±»å‹çš„nameå±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br><span class="line">user = deserialize(<span class="string">&#x27;null&#x27;</span>)</span><br><span class="line"><span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é”™è¯¯æƒ…å†µçš„å€¼"><a href="#é”™è¯¯æƒ…å†µçš„å€¼" class="headerlink" title="é”™è¯¯æƒ…å†µçš„å€¼"></a>é”™è¯¯æƒ…å†µçš„å€¼</h4><p>ä¸€ä¸ªç›¸åçš„é—®é¢˜ï¼šä¸€ç§ç±»å‹å¯ä»¥æ›¿ä»£å…¶ä»–ç±»å‹ä½¿ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>TurnDirectionåˆ°è§’åº¦çš„è½¬æ¢</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> TurnDirection &#123;</span><br><span class="line">  Left,</span><br><span class="line">  Right</span><br><span class="line">&#125;</span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æŠ¥å‘Šé”™è¯¯</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">funtion fail(message: <span class="built_in">string</span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(message);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message)</span><br><span class="line">&#125;</span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯è¿˜å·®ä¸€ç‚¹</span></span><br><span class="line"><span class="comment">// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆä½¿ç”¨äº† --strictï¼‰ç¼–è¾‘å™¨ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// Function lacks ending return statement and return tyoe does not include &quot;undefined&quot;</span></span><br><span class="line"><span class="comment">// å› ä¸ºç¼–è¾‘å™¨åœ¨ `default` åˆ†æ”¯ä¸­æ²¡æœ‰æ‰¾åˆ° return è¯­å¥ï¼Œæ‰€ä»¥æ ‡è®°é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨fail()å¹¶è¿”å›ä¸€ä¸ªè™šæ‹Ÿçš„å€¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// å› ä¸º fail ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šè¿”å›è¿™ä¸ªè™šæ‹Ÿå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåç»­æ”¹å˜äº† fail çš„è¿”å›ï¼Œè™šæ‹Ÿå€¼å°±ä¼šç›´æ¥è¢«æŠ›å‡ºï¼Œä¸å¤ªå¥½ï¼Œåé¢è¿˜ä¼šé¢ä¸´ä¿®æ”¹ï¼Œéœ€è¦å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨fail()å¹¶è¿”å›å…¶ç»“æœçš„turnAngle()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å³ä½¿è¿”å›neverä¹Ÿæ²¡é—®é¢˜ï¼šå› ä¸º never æ˜¯æ‰€æœ‰ç±»å‹çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</span></span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      <span class="keyword">return</span> fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåç»­éœ€æ±‚æ›´æ–°äº†<code>fail</code>ï¼Œä½¿å…¶åœ¨æŸäº›æƒ…å†µä¸å†æŠ›å‡ºé”™è¯¯ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶æˆ‘ä»¬ä¿®æ”¹<code>fail</code>çš„è¿”å›ç±»å‹ï¼Œå¦‚æœè¿”å›ç±»å‹æ˜¯<code>void</code>ï¼Œè¿™æ—¶è¯•å›¾å°†è¿”å›çš„å€¼ä¼ é€’ç»™ string ç±»å‹ï¼Œå°±ä¸ä¼šé€šè¿‡ç±»å‹æ£€æŸ¥ã€‚</p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªç±»å‹æ˜¯å…¶ä»–ç±»å‹çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™ä¸ºåº•å±‚ç±»å‹ï¼Œåº•å±‚ç±»å‹æ˜¯æ‰€æœ‰ç±»å‹çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹) åˆ™éœ€è¦å…·æœ‰å…¶ä»–ç±»å‹çš„æˆå‘˜ã€‚å› ä¸ºå…¶ä»–ç±»å‹å¯ä»¥æœ‰æ— é™ä¸ªç±»å‹å’Œæˆå‘˜ï¼Œæ‰€ä»¥åº•å±‚ç±»å‹ä¹Ÿå¿…é¡»æœ‰æ— é™ä¸ªæˆå‘˜ï¼Œç„¶è€Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚æ‰€ä»¥åº•å±‚ç±»å‹å§‹ç»ˆæ˜¯ä¸€ä¸ªç©ºç±»å‹ï¼šä¸èƒ½ä¸ºå…¶åˆ›å»ºå®é™…å€¼</p>
</blockquote>
<h3 id="å…è®¸çš„æ›¿æ¢"><a href="#å…è®¸çš„æ›¿æ¢" class="headerlink" title="å…è®¸çš„æ›¿æ¢"></a>å…è®¸çš„æ›¿æ¢</h3><h4 id="Subtyping-ä¸å’Œç±»å‹ï¼ˆSum-Typeï¼‰"><a href="#Subtyping-ä¸å’Œç±»å‹ï¼ˆSum-Typeï¼‰" class="headerlink" title="Subtyping ä¸å’Œç±»å‹ï¼ˆSum Typeï¼‰"></a>Subtyping ä¸å’Œç±»å‹ï¼ˆSum Typeï¼‰</h4><figure class="highlight ts"><figcaption><span>Trangle | Square ä½œä¸º Trangle | Square | Circle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Trangle &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Trangle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> SquareType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Square &#123;</span><br><span class="line">  [SquareType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Square members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> CircleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Circle &#123;</span><br><span class="line">  [CircleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Circle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™é‡Œå¿½ç•¥å‡½æ•°çš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Trangle</span> | <span class="title">Square</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shape: Trangle | Square | Circle</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="comment">// draw æ¥å— Trangle | Square | Circle è¿™3ç§ç±»å‹ä¹‹ä¸€</span></span><br><span class="line"><span class="comment">// å¯ä»¥è¿è¡Œï¼ŒmakeShapeæä¾›çš„ç±»å‹å°‘äº†ä¸€ä¸ªä½†æ˜¯æ˜¯drawå¯ä»¥æ¥å—çš„èŒƒå›´å†…</span></span><br><span class="line">draw(makeShape())</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>Trangle | Square | Circle ä½œä¸º Trangle | Square</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œå¿½ç•¥å‡½æ•°çš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Trangle</span> | <span class="title">Square</span> | <span class="title">Circle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shape: Trangle | Square</span>):<span class="title">void</span></span>;</span><br><span class="line">draw(makeShape()) <span class="comment">// æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œdraw å¤„ç†ä¸äº† Circle</span></span><br></pre></td></tr></table></figure>

<p>å½“ä½¿ç”¨<strong>ç»§æ‰¿</strong>æ—¶ï¼Œå¾—åˆ°çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code> æ¯” <code>Parent type(åŒäº²ç±»å‹)</code> çš„å±æ€§æ›´å¤šã€‚å¯¹äº<strong>Sum Type</strong>ï¼Œåˆ™æ˜¯ç›¸åçš„ï¼Œ<code>Parent type(åŒäº²ç±»å‹)</code> æ¯” <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code> çš„ç±»å‹æ›´å¤šã€‚</p>
<blockquote>
<p>Sum Type: <code>Trangle | Square</code> æ˜¯ <code>Trangle | Square | Circle</code> çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</p>
</blockquote>
<h4 id="Subtyping-and-collections-é›†åˆ"><a href="#Subtyping-and-collections-é›†åˆ" class="headerlink" title="Subtyping and collections(é›†åˆ)"></a>Subtyping and collections(é›†åˆ)</h4><figure class="highlight ts"><figcaption><span>Triangle[]ä½œä¸ºShape[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;<span class="comment">/* Shape members */</span>&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="comment">// Triangle æ˜¯ Shape çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</span></span><br><span class="line"><span class="keyword">class</span> Triangle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Triangle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangles</span>(<span class="params"></span>): <span class="title">Triangle</span>[]</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shapes: Shape[]</span>): <span class="title">void</span></span>;</span><br><span class="line">draw(makeTriangles())</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»“è®ºï¼šæ•°ç»„ä¼šä¿ç•™å®ƒä»¬å­˜å‚¨çš„åº•å±‚ç±»å‹çš„Subtypingå…³ç³»ï¼Œåè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚</p>
</blockquote>
<p><code>Triangle</code> ä½œä¸º <code>Shape</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œåˆ™ <code>Triangle[]</code> æ˜¯ <code>Shape[]</code>çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œå¦‚æœ <code>Triangle</code> å¯ä»¥ç”¨ä½œ <code>Shape</code>ï¼Œé‚£ä¹ˆ <code>Triangle[]</code> ä¹Ÿå¯ä»¥ç”¨ä½œ <code>Shape[]</code></p>
<h5 id="LinkedList-lt-Triangle-gt-ä½œä¸ºLinkedList-lt-Shape-gt"><a href="#LinkedList-lt-Triangle-gt-ä½œä¸ºLinkedList-lt-Shape-gt" class="headerlink" title="LinkedList&lt;Triangle&gt;ä½œä¸ºLinkedList&lt;Shape&gt;"></a><code>LinkedList&lt;Triangle&gt;ä½œä¸ºLinkedList&lt;Shape&gt;</code></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªæ³›å‹é“¾è¡¨é›†åˆ</span></span><br><span class="line"><span class="keyword">class</span> LinkedList&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedList&lt;T&gt; | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  append(value: T): linkedList&lt;T&gt; &#123;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="keyword">new</span> LinkedList(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.next</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangles</span>(<span class="params"></span>): <span class="title">linkedList</span>&lt;<span class="title">Triangle</span>&gt;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shapes: linkedList&lt;Shape&gt;</span>): <span class="title">void</span></span>;</span><br><span class="line">draw(makeTriangles()); <span class="comment">// ä»£ç èƒ½å¤Ÿç¼–è¯‘</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>åå˜(Covariance)ï¼šå¦‚æœä¸€ä¸ªç±»å‹ä¿ç•™å…¶åº•å±‚ç±»å‹çš„ <code>subtyping</code> å…³ç³»ï¼Œå°±æˆè¯¥ç±»å‹å…·æœ‰åå˜æ€§ã€‚æ•°ç»„å…·æœ‰åå˜æ€§ã€‚å› ä¸ºå®ƒä¿ç•™äº† <code>subtyping</code> å…³ç³»: <code>Triangle</code> æ˜¯ <code>Shape</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œæ‰€ä»¥ <code>Triangle[]</code> æ˜¯ <code>Shape[]</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code></p>
</blockquote>
<h4 id="Subtyping-å’Œå‡½æ•°çš„è¿”å›ç±»å‹"><a href="#Subtyping-å’Œå‡½æ•°çš„è¿”å›ç±»å‹" class="headerlink" title="Subtyping å’Œå‡½æ•°çš„è¿”å›ç±»å‹"></a>Subtyping å’Œå‡½æ•°çš„è¿”å›ç±»å‹</h4><h5 id="gt-Triangle-ä½œä¸º-gt-Shape"><a href="#gt-Triangle-ä½œä¸º-gt-Shape" class="headerlink" title="() =&gt; Triangle ä½œä¸º () =&gt; Shape"></a>() =&gt; Triangle ä½œä¸º () =&gt; Shape</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangle</span>(<span class="params"></span>): <span class="title">Triangle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Shape</span>(<span class="params"></span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFactory</span>(<span class="params">factory: () =&gt; Shape</span>): <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> factory()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> shape1: Shape = useFactory(makeShape);</span><br><span class="line"><span class="keyword">let</span> shape2: Shape = useFactory(makeTriangle);</span><br><span class="line"><span class="comment">// Shape &lt;---- Triangle // subtying å…³ç³»</span></span><br><span class="line"><span class="comment">// () =&gt; Shape &lt;---- () =&gt; Triangle // subtying å…³ç³»</span></span><br></pre></td></tr></table></figure>

<p>å‡½æ•°çš„è¿”å›ç±»å‹å…·æœ‰åå˜æ€§ï¼šå¦‚æœ <code>Triangle</code> æ˜¯ <code>Shape</code> çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¿”å› <code>Triangle</code> æ›¿ä»£è¿”å›  <code>Shape</code>çš„å‡½æ•°ã€‚åè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚</p>
<h5 id="gt-Shape-ä½œä¸º-gt-Triangle"><a href="#gt-Shape-ä½œä¸º-gt-Triangle" class="headerlink" title="() =&gt; Shape ä½œä¸º () =&gt; Triangle"></a>() =&gt; Shape ä½œä¸º () =&gt; Triangle</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangle</span>(<span class="params"></span>): <span class="title">Triangle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Shape</span>(<span class="params"></span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFactory</span>(<span class="params">factory: () =&gt; Triangle</span>): <span class="title">Triangle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> factory()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»£ç ç¼–è¯‘é”™è¯¯âŒ</span></span><br><span class="line"><span class="keyword">let</span> shape1: Shape = useFactory(makeShape);</span><br><span class="line"><span class="keyword">let</span> shape2: Shape = useFactory(makeTriangle);</span><br></pre></td></tr></table></figure>


<h4 id="Subtyping-å’Œå‡½æ•°çš„å®å‚ç±»å‹"><a href="#Subtyping-å’Œå‡½æ•°çš„å®å‚ç±»å‹" class="headerlink" title="Subtyping å’Œå‡½æ•°çš„å®å‚ç±»å‹"></a>Subtyping å’Œå‡½æ•°çš„å®å‚ç±»å‹</h4><p>å¸¦å‚æ•°çš„ <code>(argument: Shape) =&gt; void</code> å’Œ <code>(argument: Triangle) =&gt; void</code> çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight ts"><figcaption><span>å¼•å…¥ä¸€ä¸ªrender()å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawShape</span>(<span class="params">shape: Shape</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawTriangle</span>(<span class="params">triangle: Triangle</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  triangle: Triangle,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: ((argument: Triangle) =&gt; <span class="built_in">void</span>); <span class="built_in">void</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc(triangle);</span></span></span><br><span class="line"><span class="function"><span class="params"></span>)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€†å˜ï¼šå¦‚æœä¸€ä¸ªç±»å‹é¢ å€’äº†å…¶åº•å±‚ç±»å‹çš„ subtying å…³ç³»ï¼Œåˆ™ç§°è¯¥ç±»å‹å…·æœ‰é€†å˜æ€§ã€‚å¤§éƒ¨åˆ†è¯­è¨€ä¸­å‡½æ•°çš„å®å‚æ˜¯é€†å˜çš„ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªæ¥å— Triangle ä½œä¸ºå®å‚çš„å‡½æ•°, <code>Shape &lt;---- Triangle</code> ç®­å¤´æŒ‡å‘ä»£è¡¨ subtying å…³ç³», <code>(Shape) =&gt; void ----&gt; (Triangle) =&gt; void</code>  ç®­å¤´æŒ‡å‘ä»£è¡¨subtying å…³ç³»<br>å¯ä»¥è¢«æ›¿æ¢æˆæ¥å£ Shape ä½œä¸ºå®å‚çš„å‡½æ•°ï¼Œå› ä¸ºæ€»æ˜¯å¯ä»¥æŠŠ Triangle ä¼ é€’ç»™ä¸€ä¸ªæ¥å— Shape ä½œä¸ºå®å‚çš„å‡½æ•°ã€‚å‡½æ•°ä¹‹é—´çš„å…³ç³»ä¸å…¶å®å‚ç±»å‹ä¹‹é—´çš„å…³ç³»ç›¸åã€‚</p>
<blockquote>
<p>TSæ˜¯ä¾‹å¤–ï¼Œå› ä¸ºTSåè¿‡æ¥ä¹Ÿæˆç«‹ï¼šä¼ å…¥æœŸæœ›æ¥å— Subtype(äºšç±»å‹ã€å„¿ç±»å‹) çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯æœŸæœ›æ¥å— Parent type(åŒäº²ç±»å‹)ï¼Œè¿™æ˜¯æ•…æ„ä½œå‡ºçš„è®¾è®¡å†³ç­–ï¼Œç›®çš„æ˜¯æ–¹ä¾¿å®ç°å¸¸è§çš„ JS ç¼–ç¨‹æ¨¡å¼ï¼Œä¸è¿‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é—®é¢˜</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>Shapeå’ŒåŒ…å«isRightAbgled()æ–¹æ³•çš„Triangle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;</span><br><span class="line">  <span class="comment">// Shape members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Triangle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç»™å®šçš„å®ä¾‹æ˜¯å¦æè¿°äº†ä¸€ä¸ªç›´è§’ä¸‰è§’å½¢</span></span><br><span class="line">  isRightAbgled(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// determine whether it is a right-angled triangle</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// more triangle members</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>åè½¬ç»˜åˆ¶ç¤ºä¾‹:æ›´æ–°åçš„ç»˜åˆ¶å’Œæ¸²æŸ“å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawShape</span>(<span class="params">shape: Shape</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="keyword">declare</span> funtion drawTriangle(triangle: Triangle): <span class="built_in">void</span>;</span><br><span class="line"><span class="comment">// render æœŸæœ›æ”¶åˆ° Shape å’Œä¸€ä¸ªæ¥å— Shape ä½œä¸ºå®å‚çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  shape: Shape,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: (argument: Shape) =&gt; <span class="built_in">void</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  drawFunc(shape)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>è¯•å›¾å¯¹Triangleçš„åŒäº²ç±»å‹è°ƒç”¨isRightAbgled</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">funtion drawTriangle(triangle: Triangle): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(triangle.isRightAbgled())</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  shape: Shape,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: (argument: Shape) =&gt; <span class="built_in">void</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  drawFunc(shape)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ Shape å’Œ drawTriangle æ¥ç»˜åˆ¶</span></span><br><span class="line"><span class="comment">// drawTriangle çš„å®å‚å˜æˆäº† Shapeï¼Œå°†å¯¹ Shape è°ƒç”¨ isRightAbgled()</span></span><br><span class="line"><span class="comment">// è¿è¡Œæ—¶isRightAbgledè‚¯å®šä¼šæŠ¥é”™âŒ</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å®ç°TSæœ‰æ„ä½œå‡ºçš„å†³ç­–</span></span><br><span class="line">render(<span class="keyword">new</span> Shape(), drawTriangle)</span><br></pre></td></tr></table></figure>

<p>åœ¨ TS ä¸­ï¼Œå¦‚æœ Triangle æ˜¯ Shape çš„ subtypeï¼Œé‚£ä¹ˆå‡½æ•°ç±»å‹ <code>(argument: Shape) =&gt; void</code> and <code>(argument: Triangle) =&gt; void</code> èƒ½å¤Ÿå½¼æ­¤æ›¿æ¢ï¼Œäº’ä¸ºsubtypeï¼Œè¿™ç§å±æ€§æˆä¸ºåŒå˜æ€§ï¼ˆåŒå‘åå˜ï¼‰ã€‚</p>
<h2 id="ç¬¬å…«ç« -é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype"><a href="#ç¬¬å…«ç« -é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype" class="headerlink" title="ç¬¬å…«ç«  - é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype"></a>ç¬¬å…«ç«  - é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype</h2><blockquote>
<p>OOP: Object-Oriebted Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚å¯¹è±¡å¯ä»¥åŒ…å«æ•°æ®å’Œä»£ç ï¼Œæ•°æ®æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œä»£ç æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œä¹Ÿå«ã€Œæ¶ˆæ¯ã€ã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯¹è±¡ä¹‹é—´å¯ä»¥â€œå¯¹è¯â€æˆ–è€…å‘é€æ¶ˆæ¯ã€‚</p>
</blockquote>
<p>OOPå…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>å°è£…ï¼šå…è®¸éšè—æ•°æ®å’Œæ–¹æ³•</li>
<li>ç»§æ‰¿ï¼šä½¿ç”¨é¢å¤–çš„æ•°æ®å’Œä»£ç æ‰©å±•ä¸€ä¸ªç±»å‹</li>
</ol>
<h3 id="ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦"><a href="#ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦" class="headerlink" title="ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦"></a>ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦</h3><p> æ¥å£æˆ–å¥‘çº¦ï¼š æè¿°äº†å®ç°è¯¥æ¥å£çš„ä»»ä½•å¯¹è±¡éƒ½ç†è§£çš„<code>ä¸€ç»„æ¶ˆæ¯</code>ã€‚æ¶ˆæ¯æ˜¯æ–¹æ³•ï¼ŒåŒ…æ‹¬åç§°ï¼Œå®å‚å’Œè¿”å›ç±»å‹ã€‚æ¥å£æ²¡æœ‰ä»»ä½•çŠ¶æ€ï¼Œç›¸å½“äºä¹¦é¢åè®®ï¼Œè§„å®šäº†å®ç°ä¸­å°†æä¾›ä»€ä¹ˆã€‚</p>
<blockquote>
<p>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ol>
<li>æŠ½è±¡ç±» <code>ConsoleLogger</code> å’Œ <code>ALogger</code> ä¹‹é—´çš„å…³ç³»æ˜¯æ‰€è°“çš„ <strong>æ˜¯</strong> å…³ç³»ï¼Œå³ <code>ConsoleLogger</code> ç»§æ‰¿äº† <code>ALogger</code>ï¼Œ æ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ª<code>ALogger</code></li>
<li><code>ILogger</code> å®šä¹‰äº†ä¸€ä¸ªå¥‘çº¦ï¼Œæ²¡æœ‰ç»§æ‰¿ï¼Œæ²¡æœ‰åˆ›å»º <strong>æ˜¯</strong> å…³ç³»ï¼Œæ¥å£å¯ä»¥æ‰©å±•ä¹Ÿå¯ä»¥åˆå¹¶ã€‚æ¥å£æœ€ç»ˆè®©æ¶ˆè´¹è€…å—ç›Šï¼Œè€Œä¸æ˜¯å®ç°æ¥å£çš„ç±»å—ç›Šã€‚é’ˆå¯¹æ¥å£ç¼–ç¨‹å¯ä»¥é™ä½ç³»ç»Ÿä¸­ç»„ä»¶çš„è€¦åˆã€‚</li>
</ol>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨æŠ½è±¡ç±»å®ç°æ—¥å¿—ç³»ç»Ÿ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ALogger æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> ALogger &#123;</span><br><span class="line">  <span class="comment">// log æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰å®ç°</span></span><br><span class="line">  <span class="keyword">abstract</span> log(line: <span class="built_in">string</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œå®ç°äº† logæ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> ConsoleLogger <span class="keyword">extends</span> ALogger &#123;</span><br><span class="line">  log(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(line)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨æ¥å£å®ç°æ—¥å¿—ç³»ç»Ÿ-è¿™ç§åœºæ™¯ä¸­æ¨èä½¿ç”¨æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ILogger &#123;</span><br><span class="line">  log(line: sring): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ConsoleLogger <span class="keyword">implements</span> ILogger &#123;</span><br><span class="line">  log(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(line)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ‰©å±•å’Œåˆå¹¶æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰©å±•</span></span><br><span class="line"><span class="keyword">interface</span> ILogger &#123;</span><br><span class="line">  log(line: sring): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IExtendedLogger <span class="keyword">extends</span> ILogger &#123;</span><br><span class="line">  warn(line: sring)L <span class="built_in">void</span>;</span><br><span class="line">  error(line: sring)L <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆå¹¶</span></span><br><span class="line"><span class="keyword">interface</span> ISpeaker &#123;</span><br><span class="line">  playSound(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IVolumeControl &#123;</span><br><span class="line">  up(): <span class="built_in">void</span>;</span><br><span class="line">  down(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> ISpeakerWithIVolumeControl <span class="keyword">extends</span> ISpeaker, IVolumeControl &#123;</span><br><span class="line">  <span class="comment">// åˆå¹¶ä¸ºä¸€ä¸ª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><p>å®ç°ä¸€ä¸ª <code>IterableIterator&lt;T&gt;</code>æ¥å£` </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  next(): IteratorResult&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IterableIterator&lt;T&gt; <span class="keyword">extends</span> Iterable, Iterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º"><a href="#ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º" class="headerlink" title="ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º"></a>ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º</h3><h4 id="ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"><a href="#ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™" class="headerlink" title="ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"></a>ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</h4><figure class="highlight ts"><figcaption><span>ä¸å¥½çš„ç»§æ‰¿</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle <span class="keyword">extends</span> Point &#123;</span><br><span class="line">  radius: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span>, radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">super</span>(x, y)</span><br><span class="line">    <span class="built_in">this</span>.radius = radius</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»§æ‰¿å’Œ <strong>æ˜¯ä¸€ä¸ª</strong> å…³ç³»ï¼š ç»§æ‰¿ä¼šåœ¨ å„¿ç±»å‹å’ŒåŒäº²ç±»å‹ä¹‹é—´å»ºç«‹ä¸€ä¸ª <strong>æ˜¯ä¸€ä¸ª</strong>ï¼Œå¦‚æœåŸºç±»æ˜¯ Shapeï¼Œæ´¾ç”Ÿç±»æ˜¯ Circleï¼Œå…³ç³»å°±æ˜¯ <strong><em>Circleæ˜¯ä¸€ä¸ªShape</em></strong>ï¼Œä¸Šé¢ Circle æ˜æ˜¾ä¸æ˜¯ä¸€ä¸ª Pointã€‚</p>
<h4 id="å»ºæ¨¡å±‚æ¬¡"><a href="#å»ºæ¨¡å±‚æ¬¡" class="headerlink" title="å»ºæ¨¡å±‚æ¬¡"></a>å»ºæ¨¡å±‚æ¬¡</h4><p>ä¸€ç§åœºæ™¯ï¼šå½“æ•°æ®æ¨¡å‹åŒ…å«ä¸åŒå±‚æ¬¡æ˜¯ï¼Œåº”è¯¥è€ƒè™‘ç»§æ‰¿ã€‚</p>
<h4 id="å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º"><a href="#å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º" class="headerlink" title="å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º"></a>å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º</h4><p>å¦ä¸€ç§åœºæ™¯ï¼šå¤§éƒ¨åˆ†è¡Œä¸ºå’ŒçŠ¶æ€æ˜¯å¤šä¸ªç±»å‹å…±æœ‰çš„ï¼Œä½†æ˜¯åˆä¸€å°éƒ¨åˆ†è¡Œä¸ºæˆ–çŠ¶æ€éœ€è¦éšä¸åŒå®ç°è€Œæœ‰å˜åŒ–ã€‚è¿™é‡Œçš„å¤šä¸ªç±»å‹åº”è¯¥é€šè¿‡<strong>æ˜¯ä¸€ä¸ª</strong>æµ‹è¯•</p>
<blockquote>
<p>æ³¨æ„âš ï¸ï¼šä¸è¦åˆ›å»ºå‡ºéå¸¸æ·±çš„ç±»å±‚æ¬¡ï¼Œå¦åˆ™ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªçŠ¶æ€å’Œæ–¹æ³•å¯èƒ½æ¥è‡ªå±‚æ¬¡ç»“æ„ä¸­çš„ä¸åŒçº§åˆ«ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€‚é€šå¸¸è®© subclass æ˜¯å…·ä½“ç±»ï¼Œè®©å±‚æ¬¡ç»“æ„ä¸Šæ–¹çš„åŒäº²ç±»æ˜¯æŠ½è±¡ç±»æ¯”è¾ƒå¥½ã€‚ </p>
</blockquote>
<figure class="highlight ts"><figcaption><span>è¡¨è¾¾å¼å±‚æ¬¡ç»“æ„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IExpression ä¸éœ€è¦æ˜¯ç±»ï¼Œå› ä¸ºå®ƒä¸ä¿å­˜çŠ¶æ€</span></span><br><span class="line"><span class="keyword">interface</span> IExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> BinaryExpression <span class="keyword">implements</span>  &#123;</span><br><span class="line">  <span class="keyword">readonly</span> a: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">readonly</span> b: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">    <span class="built_in">this</span>.b = b</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="built_in">eval</span>(): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> SumExpression <span class="keyword">extends</span> BinaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="built_in">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> MyExpression <span class="keyword">extends</span> BinaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a * <span class="built_in">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> UnaryExpression <span class="keyword">implements</span>  &#123;</span><br><span class="line">  <span class="keyword">readonly</span> a: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">a: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="built_in">eval</span>(): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> UnaryMinusExpression <span class="keyword">extends</span> UnaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="built_in">this</span>.a</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»„åˆæ•°æ®å’Œè¡Œä¸º"><a href="#ç»„åˆæ•°æ®å’Œè¡Œä¸º" class="headerlink" title="ç»„åˆæ•°æ®å’Œè¡Œä¸º"></a>ç»„åˆæ•°æ®å’Œè¡Œä¸º</h3><p>é‡å†™æˆ–æ‰©å±•è¡Œä¸ºï¼Œæ¯”ç»§æ‰¿æ›´å¥½ -&gt; ç»„åˆ</p>
<blockquote>
<p>åªè¦å¯èƒ½å°±ä¼˜å…ˆé€‰æ‹©<strong>ç»„åˆ</strong>è€Œä¸æ˜¯ç»§æ‰¿</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ç»§æ‰¿å’Œç»„åˆ-ä½¿ç”¨ä¸€ä¸ªShape</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;</span><br><span class="line">  id: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  center: Point;</span><br><span class="line">  radius: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">string</span>, center: Point, radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">super</span>(id)</span><br><span class="line">    <span class="built_in">this</span>.center = center</span><br><span class="line">    <span class="built_in">this</span>.radius = radius</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"><a href="#ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™" class="headerlink" title="ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"></a>ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</h4><p>ç»„åˆå’Œ <strong>æœ‰ä¸€ä¸ª</strong> å…³ç³»ï¼š ç»„åˆåœ¨å®¹å™¨ç±»å‹å’Œè¢«åŒ…å«ç±»å‹ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ª <strong>æœ‰ä¸€ä¸ª</strong> çš„å…³ç³»ã€‚å¦‚æœç±»å‹æ˜¯ <code>Circle</code>ï¼Œ è¢«åŒ…å«çš„ç±»å‹æ˜¯ <code>Point</code>ï¼Œé‚£ä¹ˆä»–ä»¬çš„å…³ç³»æ˜¯ <code>Circle</code>æœ‰ä¸€ä¸ª <code>Point</code></p>
<h4 id="å¤åˆç±»"><a href="#å¤åˆç±»" class="headerlink" title="å¤åˆç±»"></a>å¤åˆç±»</h4><p>å¯ä»¥æŠŠå¤åˆç±»çš„çŠ¶æ€çš„éƒ¨åˆ†å£°æ˜ä¸ºç§æœ‰æˆå‘˜ï¼Œå°è£…èµ·æ¥ï¼Œç„¶åä½¿ç”¨é¢å¤–çš„æ–¹æ³•æ¥å¢å¼ºè¿™ä¸ªå¤åˆç±»ï¼Œè®©è¿™äº›æ–¹æ³•æ¥è®¿é—®å®ç°ä¸­çš„ç§æœ‰æˆå‘˜ã€‚</p>
<figure class="highlight ts"><figcaption><span>å‘CEOæå‡ºé—®é¢˜</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CEO &#123;</span><br><span class="line">  isBusy(): <span class="built_in">boolean</span> &#123;&#125;</span><br><span class="line">  answer(question: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Department &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Budget &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Company &#123;</span><br><span class="line">  <span class="keyword">private</span> ceo: CEO = <span class="keyword">new</span> CEO();</span><br><span class="line">  <span class="keyword">private</span> departments: Department[] = []</span><br><span class="line">  <span class="keyword">private</span> budget: Budget = <span class="keyword">new</span> Budget()</span><br><span class="line">  askCEO(question: <span class="built_in">string</span>): <span class="built_in">string</span> | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.ceo.isBusy()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.ceo.answer(question)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®ç°é€‚é…å™¨æ¨¡å¼"><a href="#å®ç°é€‚é…å™¨æ¨¡å¼" class="headerlink" title="å®ç°é€‚é…å™¨æ¨¡å¼"></a>å®ç°é€‚é…å™¨æ¨¡å¼</h4><p>é€‚é…å™¨æ¨¡å¼èƒ½å¤Ÿå…¼å®¹2ä¸ªä¸åŒçš„ç±»ï¼Œä¸”ä¸éœ€è¦ä¿®æ”¹å…¶ä¸­ä»»ä½•ä¸€ä¸ªç±»ã€‚ä¸æŠŠå‡ ä¸ªç»„ä»¶åˆå¹¶åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å°è£…ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶æä¾›å®ƒéœ€è¦çš„èƒ¶æ°´ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿä½œä¸ºå¦ä¸€ç§ç±»å‹ä½¿ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>ä¸€ä¸ªå¤–éƒ¨çš„å‡ ä½•åº“ï¼Œä½†æ˜¯ä¸é€‚åˆæˆ‘ä»¬çš„å¯¹è±¡æ¨¡å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> GeometryLibrary &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> ICircle &#123;</span><br><span class="line">    getCenterX(): <span class="built_in">number</span>;</span><br><span class="line">    getCenterY(): <span class="built_in">number</span>;</span><br><span class="line">    getDiameter(): <span class="built_in">number</span>; <span class="comment">// è·å–ç›´å¾„</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// operations on ICircle omitted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>CircleAdapteré€‚é…å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°äº†åº“æœŸæœ›çš„ICircleæ¥å£</span></span><br><span class="line"><span class="keyword">class</span> CircleAdapter <span class="keyword">implements</span> GeometryLibrary.ICircle &#123;</span><br><span class="line">  <span class="keyword">private</span> circle: Circle;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">circle: Circle</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.circle = circle</span><br><span class="line">  &#125;</span><br><span class="line">  getCenterX(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.x;</span><br><span class="line">  &#125;</span><br><span class="line">  getCenterY(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.y;</span><br><span class="line">  &#125;</span><br><span class="line">  getDiameter(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.radius * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•æ•°æ®å’Œè¡Œä¸º"><a href="#æ‰©å±•æ•°æ®å’Œè¡Œä¸º" class="headerlink" title="æ‰©å±•æ•°æ®å’Œè¡Œä¸º"></a>æ‰©å±•æ•°æ®å’Œè¡Œä¸º</h3><h4 id="ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º"><a href="#ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º" class="headerlink" title="ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º"></a>ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º</h4><h4 id="ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º"><a href="#ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º" class="headerlink" title="ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º"></a>ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º</h4><p>æ··å…¥èƒ½å¤Ÿå‡å°‘æ ·æ¿ä»£ç ï¼Œå…è®¸æ··å…¥ä¸åŒçš„è¡Œä¸ºæ¥æ„æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠåœ¨å¤šä¸ªç±»å‹ä¸­é‡ç”¨å…±æœ‰çš„è¡Œä¸ºã€‚æœ€å‘µå‘µå®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹(cross-cutting concern): ç¨‹åºä¸­å½±å“å…¶ä»–å…³æ³¨ç‚¹å•æ•°ä¸å®¹æ˜“è¢«åˆ†è§£çš„æ–¹é¢ï¼Œä¾‹å¦‚å¼•ç”¨è®¡æ•°ï¼Œç¼“å­˜ï¼ŒæŒä¹…åŒ–ç­‰ã€‚</p>
<blockquote>
<p>æ··å…¥ï¼šæ··å…¥é€šå¸¸æ˜¯ä½¿ç”¨å¤šé‡ç»§æ‰¿å®ç°çš„ï¼ˆä¸æœ¬ç« å¼€å§‹çš„<strong>æ˜¯ä¸€ä¸ª</strong>ç»éªŒå‡†åˆ™å‘ç”Ÿäº†å†²çªï¼‰</p>
</blockquote>
<p>ä»å¤šé‡ç»§æ‰¿çš„è§’åº¦çœ‹ï¼šåˆ›å»ºä¸€ä¸ª <strong>IHunter</strong> ç±»æ¥å®ç°æ•çŒè¡Œä¸ºï¼Œå¹¶è®©æ‰€æœ‰æ•é£Ÿæ€§åŠ¨ç‰©æ´¾ç”Ÿè‡ªè¿™ä¸ªç±»ï¼Œè¿™æ · <code>Cat</code>æ—¢æ˜¯<code>Animal</code>åˆæ˜¯<code>Hunter</code>ï¼Œæ··å…¥ä¸ç»§æ‰¿å¹¶ä¸ç›¸åŒï¼Œå¯ä»¥åªåˆ›å»ºä¸€ä¸ª<code>HunterBehavaior</code>è¡Œä¸ºç±»æ¥å®ç°æ•çŒè¡Œä¸ºï¼Œå¹¶è®©æ‰€æœ‰æ•é£Ÿæ€§åŠ¨ç‰©åŒ…å«è¿™ç§è¡Œä¸ºã€‚</p>
<blockquote>
<p>æ··å…¥ä¸åŒ…å«å…³ç³»ï¼šæ··å…¥åœ¨ä¸€ä¸ªç±»å‹ä¸å…¶æ··å…¥ç±»å‹ä¹‹é—´å»ºç«‹ä¸€ä¸ªåŒ…å«å…³ç³»ï¼Œä¸ <strong>æ˜¯ä¸€ä¸ª</strong> å…³ç³»ä¸åŒ</p>
</blockquote>
<h4 id="TS-ä¸­çš„æ··å…¥"><a href="#TS-ä¸­çš„æ··å…¥" class="headerlink" title="TS ä¸­çš„æ··å…¥"></a>TS ä¸­çš„æ··å…¥</h4><p>ä½¿ç”¨ <code>extend()</code>æ³›å‹å‡½æ•°ï¼Œè®©è¯¥å‡½æ•°æ¥å—2ä¸ªä¸åŒç±»å‹çš„å®ä¾‹ï¼Œå¹¶æŠŠç¬¬äºŒä¸ªå®ä¾‹çš„æ‰€æœ‰æˆå‘˜å¤åˆ¶åˆ°ç¬¬ä¸€ä¸ªå®ä¾‹ä¸­ã€‚</p>
<blockquote>
<p><code>&amp;</code> äº¤å‰ç±»å‹ï¼Œäº¤é›†</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ä¸€ä¸ªå®ä¾‹çš„æˆå‘˜æ‰©å±•å¦ä¸€ä¸ªå®ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>&lt;<span class="title">First</span>, <span class="title">Second</span>&gt;(<span class="params">first: First, second: Second</span>): <span class="title">First</span> &amp; <span class="title">Second</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result: unknown = &#123;&#125;</span><br><span class="line">  <span class="comment">// é¦–å…ˆï¼Œè¿­ä»£ç¬¬ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æˆå‘˜ï¼ŒæŠŠä»–ä»¬å¤åˆ¶åˆ°resultä¸­</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> prop <span class="keyword">in</span> first) &#123;</span><br><span class="line">    <span class="keyword">if</span> (first.hasOwnProperty(prop)) &#123;</span><br><span class="line">      (&lt;First&gt;result)[prop] = first[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¥ä¸‹æ¥ï¼Œå¯¹ç¬¬äºŒä¸ªç±»å‹çš„æˆå‘˜åšç›¸åŒçš„å¤„ç†</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> prop <span class="keyword">in</span> second) &#123;</span><br><span class="line">    <span class="keyword">if</span> (second.hasOwnProperty(prop)) &#123;</span><br><span class="line">      (&lt;Second&gt;result)[prop] = second[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &lt;First &amp; Second&gt;result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ··å…¥è¡Œä¸º</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å®šä¹‰ Catï¼Œ è€Œæ˜¯å®šä¹‰ å–µå–µè¡Œä¸º çš„å® ç‰©ç±»å‹</span></span><br><span class="line"><span class="comment">// è±¹å­ï¼ŒçŒ« éƒ½å¯ä»¥å–µå–µ</span></span><br><span class="line"><span class="comment">// ç”±äºæ²¡æœ‰æ‰©å±•æ•çŒè¡Œä¸ºï¼Œæ‰€ä»¥è¿˜ä¸æ˜¯ Cat</span></span><br><span class="line"><span class="keyword">class</span> MeowingPet <span class="keyword">extends</span> Pet &#123;</span><br><span class="line">  meow(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> HunterBehavior &#123;</span><br><span class="line">  track(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">  stalk(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">  pounce(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Cat = MeowingPet &amp; HunterBehavior</span><br><span class="line"><span class="keyword">const</span> fluffy: Cat = extend(<span class="keyword">new</span> MeowingPet(), <span class="keyword">new</span> HunterBehavior())</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><figcaption><span>è·Ÿè¸ªå¿«é€’å•å’ŒåŒ…è£¹çš„çŠ¶æ€</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Letter &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Package &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Tracking &#123;</span><br><span class="line">  <span class="keyword">private</span> status: <span class="built_in">string</span>;</span><br><span class="line">  constructot(status: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = status</span><br><span class="line">  &#125;</span><br><span class="line">  updateStatus(status) &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = status</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> TrackingLetter = Letter &amp; Tracking</span><br><span class="line"><span class="keyword">type</span> TrackingTracking = Package &amp; Tracking</span><br></pre></td></tr></table></figure>

<h3 id="çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ"></a>çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ</h3><h4 id="1-å’Œç±»å‹"><a href="#1-å’Œç±»å‹" class="headerlink" title="1.å’Œç±»å‹"></a>1.å’Œç±»å‹</h4><p>å¦‚æœéœ€è¦ç”¨ç›¸åŒçš„æ–¹å¼ä¼ é€’ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæˆ–è€…æŠŠä»–ä»¬æ”¾åˆ°ä¸€ä¸ªå…¬å…±çš„é›†åˆä¸­ï¼Œä»–ä»¬å¹¶éå¿…é¡»å®ç°ç›¸åŒçš„æ¥å£ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå…¬å…±çš„åŒäº²ç±»å‹ã€‚ç›¸åï¼Œå¯ä»¥åˆ©ç”¨å’Œç±»å‹ï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨ç±»å‹ä¹‹é—´å»ºç«‹ä»»ä½•å…³ç³»è€Œè·å¾—ç›¸åŒçš„è¡Œä¸ºã€‚</p>
<h4 id="2-å‡½æ•°å¼ç¼–ç¨‹"><a href="#2-å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="2.å‡½æ•°å¼ç¼–ç¨‹"></a>2.å‡½æ•°å¼ç¼–ç¨‹</h4><p>é¿å…äº†ç»´æŠ¤çŠ¶æ€ï¼Œç›´æ¥è®¡ç®—è¿”å›ï¼Œä¹Ÿä¸éœ€è¦æ”¹å˜ä»»ä½•çŠ¶æ€ï¼Œ(çŒœï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥çª¥è§ï¼šæ—¢ä¸éœ€è¦ç»´æŠ¤çŠ¶æ€ä¹Ÿä¸éœ€è¦æ”¹å˜çŠ¶æ€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç° <code>immutable</code>?ï¼Œæ‰€æœ‰å®å‚å›ºå®šæˆä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Ÿ)</p>
<h4 id="3-æ³›å‹ç¼–ç¨‹"><a href="#3-æ³›å‹ç¼–ç¨‹" class="headerlink" title="3.æ³›å‹ç¼–ç¨‹"></a>3.æ³›å‹ç¼–ç¨‹</h4><p>å°†åœ¨ç¬¬ä¹ç« ï¼Œç¬¬åç« æ·±å…¥ä»‹ç»ã€‚</p>
<h2 id="ç¬¬ä¹ç« -æ³›å‹æ•°æ®ç»“æ„"><a href="#ç¬¬ä¹ç« -æ³›å‹æ•°æ®ç»“æ„" class="headerlink" title="ç¬¬ä¹ç«  - æ³›å‹æ•°æ®ç»“æ„"></a>ç¬¬ä¹ç«  - æ³›å‹æ•°æ®ç»“æ„</h2><p>è¦ç‚¹ï¼šåˆ†ç¦»å…³æ³¨ç‚¹ï¼›ä¸ºæ•°æ®å¸ƒå±€ä½¿ç”¨æ³›å‹æ•°æ®ç»“æ„ï¼›éå†ä»»ä½•æ•°æ®ç»“æ„ï¼›è®¾ç½®æ•°æ®å¤„ç†ç®¡é“ï¼›</p>
<h3 id="è§£è€¦å…³æ³¨ç‚¹"><a href="#è§£è€¦å…³æ³¨ç‚¹" class="headerlink" title="è§£è€¦å…³æ³¨ç‚¹"></a>è§£è€¦å…³æ³¨ç‚¹</h3><figure class="highlight ts"><figcaption><span>getNumbers()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TransformFunction = <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumbers</span>(<span class="params">transform: TransformFunction</span>): <span class="title">number</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä¸éœ€è¦è½¬æ¢ï¼Œä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„doNothing</span></span><br><span class="line"><span class="comment">// doNothing æ˜¯æ’ç­‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doNothing</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumbers</span>(<span class="params">transform: TransformFunction = doNothing</span>): <span class="title">number</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>assembleWidgets()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PluckFunction = <span class="function">(<span class="params">widgets: Widget[]</span>) =&gt;</span> Widget[];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä¸éœ€è¦è½¬æ¢ï¼Œä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„ pluckAll</span></span><br><span class="line"><span class="comment">// pluckAll æ˜¯æ’ç­‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluckAll</span>(<span class="params">widgets: Widget[]</span>): <span class="title">Widget</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> widgets;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction = pluckAll</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>pluckAll</code> å’Œ <code>doNothing</code> éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯ç±»å‹ä¸åŒï¼šéƒ½æ¥å—ä¸€ä¸ªå®å‚ï¼Œä¸åšä»»ä½•å¤„ç†å°±è¿”å›è¯¥å®å‚ï¼Œ2ä¸ªéƒ½æ˜¯æ’ç­‰å‡½æ•°ã€‚</p>
<blockquote>
<p>ä»£æ•°ä¸­å®šä¹‰çš„æ’ç­‰å‡½æ•°: <code>f(x) = x</code></p>
</blockquote>
<h4 id="å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°"><a href="#å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°" class="headerlink" title="å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°"></a>å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°</h4><figure class="highlight ts"><figcaption><span>ç®€å•çš„å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•å®ç”¨ any ç±»å‹</span></span><br><span class="line"><span class="comment">// å½“å¼€å§‹ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šå¤±å»ç±»å‹å®‰å…¨ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>(<span class="params">value: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params">x: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * x</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿è¡Œæ—¶å¤±è´¥âŒ</span></span><br><span class="line">square(identity(<span class="string">&#x27;hello&#x27;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç±»å‹å‚æ•°ï¼šæ³›å‹åç§°æ ‡å¿—ç¬¦</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>æ³›å‹æ’ç­‰å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¼–è¯‘å™¨è¶³å¤Ÿåªèƒ½ï¼Œä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®š T æ˜¯ä»€ä¹ˆç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumnbers</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  transform: TransformFunction = identity</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">number</span>[] </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction = identity</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¼–è¯‘âŒ</span></span><br><span class="line">square(identity(<span class="string">&#x27;hello&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h4 id="å¯é€‰ç±»å‹"><a href="#å¯é€‰ç±»å‹" class="headerlink" title="å¯é€‰ç±»å‹"></a>å¯é€‰ç±»å‹</h4><p>æ³›å‹ç±» <code>Optional</code> ç±»å‹ï¼šå½“å¤„ç†æ²¡æœ‰èµ‹å€¼çš„æƒ…å†µæ—¶ï¼Œä½¿ç”¨çš„é€»è¾‘ä¸è¯¥å€¼çš„å®é™…ç±»å‹æ²¡æœ‰å…³ç³»ã€‚<code>Optional</code>å¯ä»¥å­˜å‚¨å…¶ä»–ä»»ä½•ç±»å‹ã€‚å¯¹ <code>Optional</code> çš„ä¿®æ”¹ä¸ä¼šå½±å“ <code>T</code>ï¼Œè€Œå¯¹ <code>T</code> çš„ä¿®æ”¹ä¹Ÿä¸ä¼šå½±å“ <code>Optional</code>ã€‚è¿™æ˜¯ <strong><em>æ³›å‹ç¼–ç¨‹</em></strong> æä¸ºå¼ºå¤§çš„ç‰¹å¾ã€‚</p>
<h4 id="æ³›å‹ç±»å‹"><a href="#æ³›å‹ç±»å‹" class="headerlink" title="æ³›å‹ç±»å‹"></a>æ³›å‹ç±»å‹</h4><p>æ³›å‹ç±»å‹ï¼šæŒ‡å‚æ•°åŒ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹çš„æ³›å‹å‡½æ•°ï¼Œç±»ã€æ¥å£ç­‰ã€‚èƒ½è®©ä»£ç çš„ç»„ä»¶åŒ–ç¨‹åº¦æ›´é«˜ã€‚</p>
<h4 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Box&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: T;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UnBox</span>&lt;<span class="title">T</span>&gt;(<span class="params">boxed: Box&lt;T&gt;</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> boxed.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ³›å‹æ•°æ®å¸ƒå±€"><a href="#æ³›å‹æ•°æ®å¸ƒå±€" class="headerlink" title="æ³›å‹æ•°æ®å¸ƒå±€"></a>æ³›å‹æ•°æ®å¸ƒå±€</h3><figure class="highlight ts"><figcaption><span>æ•°å­—äºŒå‰æ ‘&å­—ç¬¦ä¸²é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°å­—äºŒå‰æ ‘</span></span><br><span class="line"><span class="keyword">class</span> NumberBinaryTreeNode &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  left: NumberBinaryTreeNode | <span class="literal">undefined</span>;</span><br><span class="line">  right: NumberBinaryTreeNode | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²é“¾è¡¨</span></span><br><span class="line"><span class="keyword">class</span> StringLinkedListNode &#123;</span><br><span class="line">  value: <span class="built_in">string</span>;</span><br><span class="line">  next: StringLinkedListNode | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ³›å‹æ•°æ®ç»“æ„"><a href="#æ³›å‹æ•°æ®ç»“æ„" class="headerlink" title="æ³›å‹æ•°æ®ç»“æ„"></a>æ³›å‹æ•°æ®ç»“æ„</h4><p>2ä¸ªä¾‹å­å¯ä»¥çœ‹å‡º <code>NumberBinaryTreeNode</code> &amp; <code>StringLinkedListNode</code>åœ¨æ•°æ®ç»“æ„å’Œç±»å‹ä¸Šäº§ç”Ÿäº†ä¸å¿…è¦çš„è€¦åˆã€‚å½“æœ‰æ–°çš„ <code>StringBinaryTreeNode</code> æ—¶ä¼šæœ‰å†—ä½™ä»£ç ã€‚</p>
<figure class="highlight ts"><figcaption><span>æ³›å‹äºŒå‰æ ‘</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ³›å‹é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">   next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"><a href="#ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"></a>ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„</h4><h5 id="åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š"><a href="#åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š" class="headerlink" title="åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š"></a>åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š</h5><ol>
<li>æ•°æ®è‡ªèº«ï¼Œæ•°æ®ç»“æ„åŒ…å«æ•°æ®ï¼›</li>
<li>æ•°æ®çš„å½¢çŠ¶ï¼šä¾‹å¦‚äºŒå‰æ ‘ï¼Œä»¥åˆ†å±‚æ–¹å¼å¸ƒå±€æ•°æ®ï¼Œæ¯å±‚æœ€å¤š2ä¸ª children nodeã€‚</li>
<li>ä¸€ç»„ä¿ç•™æ˜Ÿåº§çš„æ“ä½œï¼šæ·»åŠ æˆ–ç§»é™¤å…ƒç´ ã€‚</li>
</ol>
<h5 id="2ä¸ªå…³æ³¨ç‚¹ï¼š"><a href="#2ä¸ªå…³æ³¨ç‚¹ï¼š" class="headerlink" title="2ä¸ªå…³æ³¨ç‚¹ï¼š"></a>2ä¸ªå…³æ³¨ç‚¹ï¼š</h5><ol>
<li>æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®çš„ç±»å‹ï¼Œå®ä¾‹ä¿å­˜çš„å®é™…å€¼</li>
<li>æ•°æ®çš„å½¢çŠ¶å’Œä¿ç•™å½¢çŠ¶çš„æ“ä½œã€‚</li>
</ol>
<h4 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°æ ˆï¼Œåè¿›å…ˆå‡º</span></span><br><span class="line"><span class="keyword">class</span> Stack&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> value: T[] = [];</span><br><span class="line">  <span class="keyword">public</span> push(v: T): T[] &#123;</span><br><span class="line">    <span class="built_in">this</span>.value.push(v)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> pop(): T | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value?.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> p = <span class="built_in">this</span>.value.pop()</span><br><span class="line">      <span class="keyword">return</span> p</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> peek(): T | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value?.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.value[<span class="built_in">this</span>.value.length - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°å…ƒç»„</span></span><br><span class="line"><span class="keyword">class</span> Pair&lt;T, U&gt; &#123;</span><br><span class="line">  <span class="keyword">readonly</span> first: T;</span><br><span class="line">  <span class="keyword">readonly</span> second: U;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">f: T, s: U</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.first = f;</span><br><span class="line">    <span class="built_in">this</span>.second = s;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="éå†æ•°æ®ç»“æ„"><a href="#éå†æ•°æ®ç»“æ„" class="headerlink" title="éå†æ•°æ®ç»“æ„"></a>éå†æ•°æ®ç»“æ„</h3><blockquote>
<p>ä¸­åºéå†ï¼šé€’å½’åœ°æ‰¾åˆ°æœ€æ·±å¤„å·¦ä¾§èŠ‚ç‚¹ï¼Œç„¶åä¾æ¬¡éå†åŒäº²èŠ‚ç‚¹ï¼Œå³ä¾§èŠ‚ç‚¹ï¼Œæœ€å·¦ä¾§child treeéå†ç»“æŸåè®¿é—®è¯¥ child tree çš„åŒäº²èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®å³ä¾§èŠ‚ç‚¹</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä¸­åºæ‰“å°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printInOrder</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(roor.left) &#123;</span><br><span class="line">    printInOrder(root.left)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(root.value)</span><br><span class="line">  <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">    printInOrder(root.right)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>)</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>)</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line">printInOrder(rrot)</span><br><span class="line"><span class="comment">// 2 3 1 4</span></span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨è¿­ä»£å™¨"><a href="#ä½¿ç”¨è¿­ä»£å™¨" class="headerlink" title="ä½¿ç”¨è¿­ä»£å™¨"></a>ä½¿ç”¨è¿­ä»£å™¨</h4><p>æŠŠéå†é€»è¾‘ç§»åŠ¨åˆ°è‡ªå·±çš„ç»„ä»¶ä¸­ã€‚</p>
<blockquote>
<p>è¿­ä»£å™¨ï¼šèƒ½å¤Ÿç”¨æ¥éå†æ•°æ®ç»“æ„çš„ä¸€ä¸ªå¯¹è±¡ã€‚æä¾›äº†ä¸€ä¸ªæ ‡å‡†ç»“æ„ï¼Œå°†æ•°æ®ç»“æ„çš„å®é™…å½¢çŠ¶å¯¹å®¢æˆ·çš„éšè—èµ·æ¥ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>è‡ªå®šä¹‰è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¿­ä»£å™¨ç»“æœ</span></span><br><span class="line"><span class="keyword">type</span> IteratorResult&lt;T&gt; = &#123;</span><br><span class="line">  done: <span class="built_in">boolean</span>;</span><br><span class="line">  value: T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  next(): IteratorResult&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// äºŒå‰æ ‘è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">// è¿™ç§å®ç°æ–¹å¼å¹¶ä¸æ˜¯æœ€é«˜æ•ˆçš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é˜Ÿåˆ—çš„å…ƒç´ æ•°é‡å’Œæ ‘çš„èŠ‚ç‚¹æ•°é‡ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ ‘çš„å±‚æ¬¡å¾ˆæ·±ï¼Œä¼šéœ€è¦å ç”¨è¾ƒå¤§çš„å†…å­˜æ¥å­˜å‚¨è¿™ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">// åé¢ä¼šæœ‰æ›´å¥½çš„å®ç°ï¼Œå…ˆä½¿ç”¨è¿™ä¸ªä½œä¸ºç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">class</span> BinaryTreeIterator&lt;T&gt; <span class="keyword">implements</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> values: T[]; <span class="comment">// å€¼çš„é˜Ÿåˆ—</span></span><br><span class="line">  <span class="keyword">private</span> root: BinaryTreeNode&lt;T&gt;;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.values = [];</span><br><span class="line">    <span class="built_in">this</span>.root = root;</span><br><span class="line">    <span class="built_in">this</span>.inOrder(root) <span class="comment">// æ„é€ å‡½æ•°è¿›è¡Œä¸­åºéå†æ¥å¡«å……å€¼çš„é˜Ÿåˆ—</span></span><br><span class="line">  &#125;</span><br><span class="line">  next(): IteratorResult&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// å¯¹ next() çš„æ¯æ¬¡è°ƒç”¨å°†é€šè¿‡è°ƒç”¨ shift() ä»é˜Ÿåˆ—ä¸­å–å‡ºå€¼</span></span><br><span class="line">    <span class="keyword">const</span> result: T | <span class="literal">undefined</span> = <span class="built_in">this</span>.values.shift()</span><br><span class="line">    <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        done: <span class="literal">true</span>,</span><br><span class="line">        value: result</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      done: <span class="literal">false</span>,</span><br><span class="line">      value: result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> inOrder(node: BinaryTreeNode&lt;T&gt;): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.left) &#123;</span><br><span class="line">      <span class="built_in">this</span>.inOrder(node.left)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.values.push(node.value)</span><br><span class="line">    <span class="keyword">if</span> (node.right) &#123;</span><br><span class="line">      <span class="built_in">this</span>.inOrder(node.right)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>é“¾è¡¨è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListIterator&lt;T&gt; <span class="keyword">implements</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> head: LinkedListNode&lt;T&gt;;</span><br><span class="line">  <span class="keyword">private</span> current: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">head: LinkedListNode&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.head = head</span><br><span class="line">    <span class="built_in">this</span>.current = head</span><br><span class="line">  &#125;</span><br><span class="line">  next():  IteratorResult&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.current) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        done: <span class="literal">true</span>,</span><br><span class="line">        value: <span class="built_in">this</span>.head.value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> result: T = <span class="built_in">this</span>.current.value</span><br><span class="line">    <span class="built_in">this</span>.current = <span class="built_in">this</span>.current.next</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      done: <span class="literal">false</span>,</span><br><span class="line">      value: result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„print()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// print()æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterator: Iterator&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ next åˆå§‹åŒ–ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result.value)</span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„contains()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// print()æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterator: Iterator&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ next åˆå§‹åŒ–ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.value === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿­ä»£å™¨æ˜¯æŠŠæ•°æ®ç»“æ„å’Œç®—æ³•è¿æ¥èµ·æ¥çš„èƒ¶æ°´ï¼Œä½¿å¾—è¿™ç§è§£è€¦èƒ½å¤Ÿå®ç°ã€‚</p>
<h4 id="æµæ°´çº¿åŒ–è¿­ä»£ä»£ç "><a href="#æµæ°´çº¿åŒ–è¿­ä»£ä»£ç " class="headerlink" title="æµæ°´çº¿åŒ–è¿­ä»£ä»£ç "></a>æµæ°´çº¿åŒ–è¿­ä»£ä»£ç </h4><p>TSä¸­å·²ç»é¢„å®šä¹‰äº† <code>IteratorResult&lt;T&gt;</code> å’Œ <code>Iterator&lt;T&gt;</code> ç±»å‹</p>
<figure class="highlight ts"><figcaption><span>å¯è¿­ä»£çš„æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">// [Symbol.iterator] æ˜¯ TS ç‰¹æ®Šè¯­æ³•ï¼Œåªæ˜¯ä»£è¡¨ä¸€ä¸ªç‰¹æ®Šåç§°ã€‚</span></span><br><span class="line">  <span class="comment">// ä¸ å‰æ–‡ä¸­å®ç° Normal Subtype æŠ€å·§ç±»ä¼¼</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>å¯è¿­ä»£çš„é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; <span class="keyword">implements</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šè¿‡åœ¨é“¾è¡¨ä¸­åˆ›å»º LinkedListIterator çš„æ–°å®ä¾‹æ¥å®ç° Iterable&lt;T&gt; æ¥å£</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LinkedListIterator&lt;T&gt;(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨TSä¸­ï¼ŒIterable æ•°æ®ç»“æ„å…è®¸ä½¿ç”¨ <code>for...of</code>è¯­æ³•ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'ä½¿ç”¨Iteratorå®å‚çš„print()å’Œcontains()'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterator: Iterator&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result.value)</span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterator: Iterator&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.value === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>'ä½¿ç”¨ Iterable å®å‚çš„print()å’Œcontains()'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterable: Iterable&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterable: Iterable&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="comment">// return å¯ä»¥é€€å‡º for...of å¾ªç¯</span></span><br><span class="line">    <span class="keyword">if</span> (item === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„äºŒå‰æ ‘è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">inOrderIterator</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>):<span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIterator(root.left)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">yield</span> root.value</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIterator(root.right)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„é“¾è¡¨è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">LinkedListIterator</span>&lt;<span class="title">T</span>&gt;(<span class="params">head: LinkedListNode&lt;T&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span> = head;</span><br><span class="line">  <span class="keyword">while</span>(current) &#123;</span><br><span class="line">    <span class="keyword">yield</span> current.value;</span><br><span class="line">    current = current.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„å¯è¿­ä»£é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; <span class="keyword">implements</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// [Symbol.iterator]() åªæ˜¯è¿”å› LinkedListIterator çš„ç»“æœ</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> LinkedListIterator(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-3"><a href="#ä¹ é¢˜-3" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><figcaption><span>æ³›å‹äºŒå‰æ ‘çš„å…ˆåºéå†&é¡ºåºéå†æ•°ç»„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³›å‹äºŒå‰æ ‘ç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">inOrderIteratorFirst</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>):<span class="title">inOrderIteratorFirst</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> root.value</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIteratorFirst(root.left)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIteratorFirst(root.right)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">IteratorArr</span>&lt;<span class="title">T</span>&gt;(<span class="params">array: T[]</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> array) &#123;</span><br><span class="line">    <span class="keyword">yield</span> item;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="headerlink" title="æ•°æ®æµ"></a>æ•°æ®æµ</h3><blockquote>
<p>è¿­ä»£å™¨å¹¶éæ˜¯æœ‰é™çš„</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>æ— é™éšæœºæ•°æ®æµ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ— é™éšæœºæ•°æ®æµ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generateRandomNumbers</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="built_in">Math</span>.random()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨æµä¸­çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">let</span> iter: IterableIterator&lt;<span class="built_in">number</span>&gt; = generateRandomNumbers()</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨ çš„è°ƒç”¨æ–¹å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br></pre></td></tr></table></figure>

<h4 id="å¤„ç†ç®¡é“"><a href="#å¤„ç†ç®¡é“" class="headerlink" title="å¤„ç†ç®¡é“"></a>å¤„ç†ç®¡é“</h4><p>å¤„ç†ç®¡é“çš„ç»„ä»¶æ˜¯ä¸€äº›å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™ç§å‡½æ•°å¯ä»¥é“¾æ¥èµ·æ¥ã€‚è¿™ç§æ¨¡å¼æ˜¯ååº”å¼ç¼–ç¨‹çš„åŸºç¡€ã€‚</p>
<blockquote>
<p>ç”±å‰æ–‡å®ç° <code>IterableIterator&lt;T&gt;</code> æ–¹å¼å¯çŸ¥ï¼Œ<code>IterableIterator&lt;T&gt;</code> æ˜¯ <code>Iterable&lt;T&gt;</code> ç±»å‹çš„ subtypeï¼Œ å‡½æ•°å®å‚æ˜¯åŒå‘åå˜çš„ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥ä¼ å…¥ <code>Iterable&lt;T&gt;</code></p>
</blockquote>
<p>ç®¡é“æ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œå¯ä»¥é€ä¸ªï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰å¤„ç†å€¼</p>
<figure class="highlight ts"><figcaption><span>square & take & ç®¡é“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">square</span>(<span class="params">iter: Iterable&lt;<span class="built_in">number</span>&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">yield</span> value ** <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">take</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, n: <span class="built_in">number</span></span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n-- &lt;= <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">yield</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> values: IterableIterator&lt;<span class="built_in">number</span>&gt; = take(square(generateRandomNumbers()), <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> values) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»ƒä¹  å®ç° drop ä¸¢å¼ƒä¸€ä¸ªè¿­ä»£å™¨çš„å‰nä¸ªå…ƒç´ è€Œè¿”å›å…¶ä½™å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">drop</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, n: <span class="built_in">number</span></span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [v, k] <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n-- &gt; <span class="number">0</span>) <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">yield</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">count</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    n++</span><br><span class="line">    <span class="keyword">yield</span> n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> take(drop(count(), <span class="number">5</span>), <span class="number">5</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬åç« -æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨"><a href="#ç¬¬åç« -æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨" class="headerlink" title="ç¬¬åç«  - æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨"></a>ç¬¬åç«  - æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨</h2><h3 id="æ›´å¥½çš„-map-ã€filter-å’Œreduce"><a href="#æ›´å¥½çš„-map-ã€filter-å’Œreduce" class="headerlink" title="æ›´å¥½çš„ map()ã€filter()å’Œreduce()"></a>æ›´å¥½çš„ <code>map()</code>ã€<code>filter()</code>å’Œ<code>reduce()</code></h3><figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„ map & filter & reduce</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åº”ç”¨åˆ°ä»»ä½• Iterable&lt;T&gt;,è€Œä¸åªæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">map</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, func: (item: T) =&gt; U</span>):<span class="title">IterableIterator</span>&lt;<span class="title">U</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">yield</span> func(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// pred=è°“è¯</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">filter</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, pred: (item: T) =&gt; <span class="built_in">boolean</span></span>):<span class="title">IterableIterator</span>&lt;<span class="title">U</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(value)) &#123;</span><br><span class="line">      <span class="keyword">yield</span> func(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">reduce</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, init: T, op: (x: T, y: T) =&gt; T</span>):<span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: T = init</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    result=op(result, value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="filter-reduce-ç®¡é“"><a href="#filter-reduce-ç®¡é“" class="headerlink" title="filter()/reduce()ç®¡é“"></a><code>filter()/reduce()ç®¡é“</code></h4><p>ä»ä¸€ä¸ªäºŒå‰æ ‘ä¸­å–å‡ºå¶æ•°å¹¶å¯¹å®ƒä»¬æ±‚å’Œï¼Œä½¿ç”¨ç¬¬ä¹ç« çš„ <code>BinaryTreeNode&lt;T&gt;</code>ï¼Œé‡‡ç”¨ä¸­åºéå†ï¼Œå¹¶é“¾æ¥åˆ°ä¸€ä¸ªå¶æ•°è¿‡æ»¤å‡½æ•°å’Œä½¿ç”¨åŠ æ³•æ“ä½œçš„reduce</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//    2     4</span></span><br><span class="line"><span class="comment">//     3</span></span><br><span class="line"><span class="comment">// ä¸­åºéå†æ‰“å°ç»“æœï¼š2 3 1 4</span></span><br><span class="line"><span class="keyword">const</span> result: <span class="built_in">number</span> = reduce(filter(inOrderIterator(root), <span class="function">(<span class="params">value</span>) =&gt;</span> value % <span class="number">2</span> == <span class="number">0</span>), <span class="number">0</span>, <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-4"><a href="#ä¹ é¢˜-4" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥æ‰€æœ‰éç©ºå­—ç¬¦ä¸²ï¼Œå¤„ç† string ç±»å‹çš„ä¸€ä¸ªå¯è¿­ä»£ç»“æ„</span></span><br><span class="line"><span class="comment">// reduce + filter</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatStrAndFilterEmpty</span>(<span class="params">iter: Iterable&lt;<span class="built_in">string</span>&gt;</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> reduce(filter(iter, <span class="function">(<span class="params">value</span>) =&gt;</span> value.length &gt; <span class="number">0</span>), <span class="string">&#x27;&#x27;</span>, <span class="function">(<span class="params">x: <span class="built_in">string</span>, y: <span class="built_in">string</span></span>) =&gt;</span> x + y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€‰æ‹©æ‰€æœ‰çš„å¥‡æ•°å¹¶æ±‚å¹³æ–¹ï¼Œå¤„ç† number ç±»å‹çš„ä¸€ä¸ªå¯è¿­ä»£ç»“æ„</span></span><br><span class="line"><span class="comment">// map + filter</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">squareOdds</span>(<span class="params">iter: Iterable&lt;<span class="built_in">number</span>&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> map(filter(iter, <span class="function">(<span class="params">value</span>) =&gt;</span> value % <span class="number">2</span> == <span class="number">1</span>), <span class="function">(<span class="params">x</span>) =&gt;</span> x * x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨ç®—æ³•"><a href="#å¸¸ç”¨ç®—æ³•" class="headerlink" title="å¸¸ç”¨ç®—æ³•"></a>å¸¸ç”¨ç®—æ³•</h3><p>å®ç°æµç•…ç®¡é“ï¼šå°è£…æ›´å¥½çš„æµç•…çš„å¯è¿­ä»£ç»“æ„</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> FluentIterable&lt;T&gt; &#123;</span><br><span class="line">  iter: Iterable&lt;T&gt;;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">iter: Iterable&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.iter = iter</span><br><span class="line">  &#125;</span><br><span class="line">  map&lt;U&gt;(func: <span class="function">(<span class="params">item: T</span>) =&gt;</span> U): FluentIterable&lt;U&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.mapImpl(func))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *mapImpl&lt;U&gt;(func: <span class="function">(<span class="params">item: T</span>) =&gt;</span> U): IterableIterator&lt;U&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">yield</span> func(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  filter&lt;U&gt;(pred: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="built_in">boolean</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.filterImpl(pred))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *filterImpl(pred: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="built_in">boolean</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (pred(value)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ take()</span></span><br><span class="line">  take&lt;T&gt;(n: <span class="built_in">number</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.takeImpl(n))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *takeImpl&lt;T&gt;(n: <span class="built_in">number</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (n-- &lt;= <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">yield</span> value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ drop()</span></span><br><span class="line">  drop&lt;T&gt;(n: <span class="built_in">number</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.dropImpl(n))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *dropImpl&lt;T&gt;(n: <span class="built_in">number</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> [v, k] <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (n-- &gt; <span class="number">0</span>) <span class="keyword">continue</span></span><br><span class="line">      <span class="keyword">yield</span> value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  reduce(init: T, op: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T): T &#123;</span><br><span class="line">    <span class="keyword">let</span> result: T = init;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      result = op(result, value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>åº”ç”¨filter/reduceç®¡é“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//    2     4</span></span><br><span class="line"><span class="comment">//     3</span></span><br><span class="line"><span class="comment">// ä¸­åºéå†æ‰“å°ç»“æœï¼š2 3 1 4</span></span><br><span class="line"><span class="keyword">const</span> result: <span class="built_in">number</span> = <span class="keyword">new</span> FluentIterable(inOrderIterator(root)).filter(<span class="function"><span class="params">value</span> =&gt;</span> value % <span class="number">2</span> == <span class="number">0</span>).reduce(<span class="number">0</span>, <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>

<h3 id="çº¦æŸç±»å‹å‚æ•°"><a href="#çº¦æŸç±»å‹å‚æ•°" class="headerlink" title="çº¦æŸç±»å‹å‚æ•°"></a>çº¦æŸç±»å‹å‚æ•°</h3><p>çº¦æŸå‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªç±»å‹å®å‚å¿…é¡»å…·æœ‰çš„èƒ½åŠ›ï¼ˆè¯¥ç±»å‹ç‹¬æœ‰çš„æ–¹æ³•ï¼Œå±æ€§ç­‰ï¼‰ã€‚ä¸€æ—¦è¦æ±‚æ³›å‹ç±»å‹è¦å¿…é¡»æœ‰ç‰¹å®šæˆå‘˜ï¼Œå°±ä½¿ç”¨çº¦æŸå°†å…è®¸ç±»å‹çš„é›†åˆé™åˆ¶ä¸ºå…·æœ‰å¿…è¦æˆå‘˜çš„é‚£äº›ç±»å‹</p>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç±»å‹çº¦æŸçš„ renderAll</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IRenderable &#123;</span><br><span class="line">  render(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderAll</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">IRenderable</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    item.render()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•"><a href="#å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•" class="headerlink" title="å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•"></a>å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•</h4><blockquote>
<p>ä»¥å®ç°ä¸€ä¸ª <code>max()</code> æ³›å‹ç®—æ³•ä¸ºä¾‹</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Icomparable æ¥å£</span></span><br><span class="line"><span class="built_in">enum</span> ComparisonResult &#123;</span><br><span class="line">  LessThan,</span><br><span class="line">  Equal,</span><br><span class="line">  GreeterThan</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Icomparable&lt;T&gt; &#123;</span><br><span class="line">  compareTo(value: T): ComparisonResult;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨æ— å€¼çš„æƒ…å†µä¸‹ä¼šè¿”å›undefined</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ä¸ä½¿ç”¨ for ofå¾ªç¯ï¼Œè€Œä½¿ç”¨ next()æ‰‹åŠ¨å‘å‰æ¨è¿›è¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">iter: Iterable&lt;T&gt;</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> iterator: Iterator&lt;T&gt; = iter[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">  <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> current: IteratorResult&lt;T&gt; = iter.next()</span><br><span class="line">  <span class="keyword">if</span> (current.done) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">let</span> result: T = current.value</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    current = iterator.next()</span><br><span class="line">    <span class="keyword">if</span> (current.done) <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">if</span> (current.value.compareTo(result) == ComparisonResult.GreeterThan) &#123;</span><br><span class="line">      result = current.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ª compare æ–¹æ³•ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">iter: Iterable&lt;T&gt;, compare: (x: T, y: T) =&gt; ComparisonResult</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> iterator: Iterator&lt;T&gt; = iter[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">  <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> current: IteratorResult&lt;T&gt; = iter.next()</span><br><span class="line">  <span class="keyword">if</span> (current.done) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">let</span> result: T = current.value</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    current = iterator.next()</span><br><span class="line">    <span class="keyword">if</span> (current.done) <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">if</span> (compare(current.value, result) === ComparisonResult.GreeterThan) &#123;</span><br><span class="line">      result = current.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-5"><a href="#ä¹ é¢˜-5" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><p>å®ç°ä¸€ä¸ªæ³›å‹å‡½æ•° <code>Clamp(value, min, max)</code>, å¦‚æœ `min &lt; value &lt; max ? value : (value &lt;= min ? min : max)</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> ComparisonResult &#123;</span><br><span class="line">  LessThan,</span><br><span class="line">  Equal,</span><br><span class="line">  GreeterThan</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Icomparable&lt;T&gt; &#123;</span><br><span class="line">  compareTo(value: T): ComparisonResult;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Clamp</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">v: T, min: T, max: T</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">if</span> (value.compareTo(min) === ComparisonResult.LessThan) <span class="keyword">return</span> min</span><br><span class="line">  <span class="keyword">if</span> (value.compareTo(max) === ComparisonResult.GreeterThan) <span class="keyword">return</span> max</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é«˜æ•ˆ-reverse-å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•"><a href="#é«˜æ•ˆ-reverse-å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•" class="headerlink" title="é«˜æ•ˆ reverse å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•"></a>é«˜æ•ˆ reverse å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•</h3><blockquote>
<p>ä½¿ç”¨ä¸€ä¸ªæ ˆå­˜å‚¨æ¥å®ç°<code>reverse</code>çš„ç©ºé—´æ˜¯O(n)ï¼Œæ—¶é—´ä¹Ÿæ˜¯T(n)ï¼Œéƒ½æ˜¯çº¿æ€§çš„ï¼›ä½¿ç”¨æ•°ç»„äº¤æ¢ä¸¤å¤´æ¥å®ç°<code>reverse</code>çš„ç©ºé—´æ˜¯O(1)ï¼Œåªç”¨äº†ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ—¶é—´æ˜¯T(n/2)</p>
</blockquote>
<h4 id="è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—"><a href="#è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—" class="headerlink" title="è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—"></a>è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—</h4><p>åˆ¤æ–­è¿­ä»£å™¨åˆé€‚åº”è¯¥åœæ­¢=æ•è·2ä¸ªè¿­ä»£å™¨ç›¸åŒçš„æ—¶æœºï¼šé‡æ–°å®šä¹‰ä¸ºä¸€ç»„æ¥å£ï¼Œå…¬å¼€ä¸€ä¸ª<code>get()</code>æ–¹æ³•ï¼Œç”¨äºè¿”å›<code>T</code>ç±»å‹çš„ä¸€ä¸ªå€¼ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»è¿­ä»£å™¨ä¸­è¯»å–å€¼</p>
<figure class="highlight ts"><figcaption><span>'IReadable<T>, IIncrementable<T>, IInputIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get() ç”¨äºè·å–è¿­ä»£å™¨å½“å‰çš„å€¼</span></span><br><span class="line"><span class="keyword">interface</span> IReadable&lt;T&gt; &#123;</span><br><span class="line">  get(): T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// increment() ç”¨äºå°†è¿­ä»£å™¨æ¨è¿›åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">interface</span> IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  increment(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IInputIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IInputIterator): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºé“¾è¡¨å®ç°ä¸€ä¸ªæ»¡è¶³æ–°çš„ <code>IInputIterator&lt;T&gt;</code> æ¥å£çš„ <code>LinkedListInputIterator&lt;T&gt;</code></p>
<blockquote>
<p>è¾“å…¥è¿­ä»£å™¨: èƒ½å¤Ÿéå†åºåˆ—ä¸€æ¬¡å¹¶æä¾›å…¶å€¼çš„è¿­ä»£å™¨ï¼Œä¸èƒ½ç¬¬äºŒæ¬¡é‡æ”¾å€¼ã€‚å¹¶éå¿…é¡»éå†æŒä¹…æ€§æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä»ç”Ÿæˆå™¨æˆ–è€…å…¶ä»–æŸç§æ•°æ®æºæä¾›å€¼ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>é“¾è¡¨è¾“å…¥è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListInputIterator&lt;T&gt; <span class="keyword">implements</span> IInputIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>();</span><br><span class="line">    <span class="built_in">this</span>.node = <span class="built_in">this</span>.node.next</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node.value</span><br><span class="line">  &#125;</span><br><span class="line">  equals(other: IInputIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node == (&lt;LinkedListInputIterator&lt;T&gt;&gt;other).node</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ï¼šé“¾è¡¨ä¸Šçš„ä¸€å¯¹è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">const</span> head: LinkedListNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListNode(<span class="number">0</span>)</span><br><span class="line">head.next = <span class="keyword">new</span> LinkedListNode(<span class="number">1</span>)</span><br><span class="line">head.next.next = <span class="keyword">new</span> LinkedListNode(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> begin: IInputIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListInputIterator(head)</span><br><span class="line"><span class="comment">// end çš„å€¼æ˜¯ undefined</span></span><br><span class="line"><span class="keyword">let</span> end: IInputIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListInputIterator(<span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¾“å‡ºè¿­ä»£å™¨: èƒ½å¤Ÿéå†ä¸€ä¸ªåºåˆ—å¹¶å‘å…¶å¸ä»»å€¼çš„è¿­ä»£å™¨ï¼Œå¹¶ä¸éœ€è¦èƒ½å¤Ÿè¯»å€¼ã€‚åŒæ ·çš„ï¼Œå¹¶éå¿…é¡»éå†æŒä¹…æ€§æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥æŠŠå€¼å¸ä»»å…¶ä»–è¾“å‡ºã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'IWritable<T> and IOutputIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IWritable&lt;T&gt; &#123;</span><br><span class="line">  set(value: T): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IOutputIterator&lt;T&gt; <span class="keyword">extends</span> IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IOutputIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°ä¸€ä¸ªå†™å…¥åˆ°æ§åˆ¶å°çš„è¾“å‡ºè¿­ä»£å™¨ï¼šå†™å…¥åˆ°è¾“å‡ºæµã€‚ä¾‹å¦‚ï¼šç½‘ç»œè¿æ¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯ç­‰ï¼Œä½†æ˜¯ä¸èƒ½è¯»å€¼ã€‚</p>
<figure class="highlight ts"><figcaption><span>æ§åˆ¶å°è¾“å‡ºè¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> ConsoleOutputIterator&lt;T&gt; <span class="keyword">implements</span> IOutputIterator&lt;T&gt; &#123;</span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªä¾‹å­æ²¡æœ‰éå†æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¯ä»¥å•¥ä¹Ÿä¸åš</span></span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">  equals(other: IOutputIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// å§‹ç»ˆè¿”å›falseï¼Œå› ä¸ºå†™å…¥æ§åˆ¶å°æ²¡æœ‰å¯ä»¥æ¯”è¾ƒçš„åºåˆ—æœ«å°¾</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>å…·æœ‰è¾“å…¥å’Œè¾“å‡ºè¿­ä»£å™¨çš„map</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IInputIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IInputIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  out: IOutputIterator&lt;U&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  func: (value: T) =&gt; U</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (!begin.equals(end)) &#123;</span><br><span class="line">    out.set(func(begin.get()))</span><br><span class="line">    begin.increment()</span><br><span class="line">    out.increment()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æœ‰ç”¨çš„find"><a href="#æœ‰ç”¨çš„find" class="headerlink" title="æœ‰ç”¨çš„find()"></a><code>æœ‰ç”¨çš„find()</code></h4><p>å‰å‘è¿­ä»£å™¨ï¼šå‘å‰æ¨è¿›ï¼Œå¯ä»¥è¯»å–å½“å‰ä½ç½®çš„å€¼ä»¥åŠæ›´æ–°è¯¥å€¼çš„è¿­ä»£å™¨ã€‚å‰å‘è¿­ä»£å™¨ä¹Ÿå¯ä»¥è¢«å…‹éš†ï¼Œä½¿å¾—æ¨è¿›è¯¥è¿­ä»£å™¨ä¸ä¼šå½±å“è¯¥è¿­ä»£å™¨çš„å…‹éš†ã€‚è·Ÿè¾“å…¥è¾“å‡ºè¿­ä»£å™¨ä¸åŒï¼Œå®ƒå¯ä»¥å¤šæ¬¡éå†ä¸€ä¸ªåºåˆ—ã€‚åœ¨æ¨è¿›åŸè¿­ä»£å™¨æ—¶ï¼Œå‰¯æœ¬è¿­ä»£å™¨ä¸ä¼šç§»åŠ¨ï¼Œæ˜¯ç‹¬ç«‹çš„ã€‚å› æ­¤å®ƒå¯ä»¥å¤šæ¬¡éå†ã€‚</p>
<figure class="highlight ts"><figcaption><span>'IForwardIterator<T> and LinkedListIterator<T> å®ç° IForwardIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IForwardIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IForwardIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IForwardIterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> LinkedListIterator&lt;T&gt; <span class="keyword">implements</span> IForwardIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.node) <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">this</span>.node = <span class="built_in">this</span>.node.next</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node.value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// set() æ˜¯ IWritable&lt;T&gt; éœ€è¦çš„ä¸€ä¸ªé¢å¤–çš„æ–¹æ³•ï¼Œç”¨äºå°ä¿¡é“¾è¡¨èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="built_in">this</span>.node.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// equals ç°åœ¨æœŸæœ›æ”¶åˆ°å¦å¤–ä¸€ä¸ª IForwardIterator&lt;T&gt;</span></span><br><span class="line">  equals(other: IForwardIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node = (&lt;LinkedListIterator&lt;T&gt;&gt;other).node</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">//  åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ï¼ŒæŒ‡å‘ä¸å½“å‰è¿­ä»£å™¨ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">  clone(): IForwardIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LinkedListIterator(<span class="built_in">this</span>.node)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨å‰å‘è¿­ä»£å™¨çš„find</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  pred: (value: T) =&gt; booean</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(begin.equals(end))) &#123;</span><br><span class="line">      <span class="keyword">return</span> begin</span><br><span class="line">    &#125;</span><br><span class="line">    begin.increment()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> end</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åº”ç”¨ï¼šå°†é“¾è¡¨ä¸­çš„42æ›¿æ¢ä¸º0</span></span><br><span class="line"><span class="keyword">let</span> head: LinkedListNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListNode(<span class="number">1</span>)</span><br><span class="line">head.next = <span class="keyword">new</span> LinkedListNode(<span class="number">2</span>)</span><br><span class="line">head.next.next = <span class="keyword">new</span> LinkedListNode(<span class="number">42</span>)</span><br><span class="line"><span class="keyword">let</span> begin: IForwardIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> IForwardIterator(head)</span><br><span class="line"><span class="keyword">let</span> end: IForwardIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> IForwardIterator(<span class="literal">undefined</span>)</span><br><span class="line"><span class="keyword">let</span> iter: IForwardIterator&lt;<span class="built_in">number</span>&gt; = find(begin, end, <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> value == <span class="number">42</span>)</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="keyword">if</span> (!iter.equals(end)) &#123;</span><br><span class="line">  iter.set(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é«˜æ•ˆçš„reverse"><a href="#é«˜æ•ˆçš„reverse" class="headerlink" title="é«˜æ•ˆçš„reverse()"></a>é«˜æ•ˆçš„<code>reverse()</code></h4><p>æ•°ç»„å®ç°<code>reverse()</code>æ—¶æ˜¯ä»æ•°ç»„çš„ä¸¤ç«¯å¼€å§‹äº’æ¢å…ƒç´ ï¼Œä¸€ç›´é€’å¢å‰å‘ç´¢å¼•ã€‚é€’å‡åå‘ç´¢å¼•ï¼Œç›´åˆ°ä¸¤è€…ç›¸é‡ã€‚</p>
<blockquote>
<p>åŒå‘è¿­ä»£å™¨ï¼šä¸ä»…å…·æœ‰å‰å‘è¿­ä»£å™¨çš„æ‰€æœ‰èƒ½åŠ›ï¼Œè€Œä¸”è¿˜å¯ä»¥é€’å‡ã€‚æ—¢èƒ½å‰å‘ï¼Œåˆèƒ½åå‘éå†ã€‚å¯ä»¥è¯»å†™å½“å‰å…ƒç´ çš„å€¼ï¼Œå…‹éš†è‡ªå·±ï¼Œä»¥åŠå‘å‰æˆ–å‘åæ­¥è¿›ã€‚</p>
</blockquote>
<p>é“¾è¡¨ä¸æ”¯æŒåå‘è¿­ä»£ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒå‘é“¾è¡¨ä¿å­˜å…¶å‰å¯¼èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>'IBiddirectionalIterator<T> and ArrayIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IBiddirectionalIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  decrement(): <span class="built_in">void</span>;</span><br><span class="line">  equals(other: IBiddirectionalIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IBiddirectionalIterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ArrayIterator&lt;T&gt; <span class="keyword">implements</span> IBiddirectionalIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> array: T[];</span><br><span class="line">  <span class="keyword">private</span> index: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">array: T[], index: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.array = array;</span><br><span class="line">    <span class="built_in">this</span>.index = index</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.array(<span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.array(<span class="built_in">this</span>.index) = value</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index++</span><br><span class="line">  &#125;</span><br><span class="line">  decrement(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index--</span><br><span class="line">  &#125;</span><br><span class="line">  equals(other: IBiddirectionalIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index == (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">  clone(): IBiddirectionalIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayIterator(<span class="built_in">this</span>.array, <span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨åŒå‘è¿­ä»£å™¨çš„reverse</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>&lt;<span class="title">T</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IBiddirectionalIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IBiddirectionalIterator&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end)) &#123;</span><br><span class="line">    <span class="comment">// end ä»æ•°ç»„æœ«å°¾åé¢çš„ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦é€’å‡</span></span><br><span class="line">    end.decrement()</span><br><span class="line">    <span class="keyword">if</span> (begin.equals(end)) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">const</span> tmp: T = begin.get()</span><br><span class="line">    begin.set(end.get())</span><br><span class="line">    end.set(temp)</span><br><span class="line">    begin.increment()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¿»è½¬ä¸€ä¸ªæ•°å€¼æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> array: <span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> begin: IBiddirectionalIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> ArrayIterator(array, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> end: IBiddirectionalIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> ArrayIterator(array, array.length) <span class="comment">// å°†æ•°ç»„çš„endè¿­ä»£å™¨åˆå§‹åŒ–ä¸ºç´¢å¼•é•¿åº¦ï¼Œæ‰€ä»¥åˆå§‹array[end]å€¼ä¸ºundefined</span></span><br><span class="line">reverse(begin, end)</span><br><span class="line"><span class="built_in">console</span>.log(array) <span class="comment">// [5,4,3,2,1]</span></span><br></pre></td></tr></table></figure>

<h4 id="é«˜æ•ˆåœ°è·å–å…ƒç´ "><a href="#é«˜æ•ˆåœ°è·å–å…ƒç´ " class="headerlink" title="é«˜æ•ˆåœ°è·å–å…ƒç´ "></a>é«˜æ•ˆåœ°è·å–å…ƒç´ </h4><p>éšæœºè®¿é—®è¿­ä»£å™¨ï¼šèƒ½å¤Ÿä»¥O(1)æ—¶é—´å‘å‰æˆ–å‘åè·³è¿‡ä»»æ„å¤šå…ƒç´ ã€‚å¯ä»¥è¯»å†™å½“å‰å…ƒç´ çš„å€¼ã€å…‹éš†è‡ªå·±ä»¥åŠå‘å‰æˆ–å‘åç§»åŠ¨ä»»æ„å…ƒç´ ã€‚</p>
<blockquote>
<p>æ•°ç»„å¯ä»¥é€šè¿‡ç´¢å¼•å¿«é€Ÿè·å–ä»»ä½•å…ƒç´ ï¼Œä½†æ˜¯åŒå‘é“¾è¡¨/é“¾è¡¨å‡ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'IRandomAccessIterator<T> & æ›´æ–°åçš„ ArrayIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IRandomAccessIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  decrement(): <span class="built_in">void</span>;</span><br><span class="line">  equals(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IRandomAccessIterator&lt;T&gt;;</span><br><span class="line">  move(n: <span class="built_in">number</span>): <span class="built_in">void</span>;</span><br><span class="line">  distance(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ArrayIterator&lt;T&gt; <span class="keyword">implements</span> IRandomAccessIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// ä¸ä¸Šé¢ç›¸åŒçš„éƒ¨åˆ†</span></span><br><span class="line">  <span class="comment">// æ›´æ–°</span></span><br><span class="line">  equals(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index == (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">  clone(): IRandomAccessIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayIterator(<span class="built_in">this</span>.array, <span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å°†è¿­ä»£å™¨æ¨è¿› n ä¸ªæ­¥é•¿ï¼ˆn å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œä»£è¡¨å‘åç§»åŠ¨ï¼‰</span></span><br><span class="line">  move(n: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index += n</span><br><span class="line">  &#125;</span><br><span class="line">  distance(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index - (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°ä¸€ä¸ª <code>elementAt()</code> ç®—æ³•ï¼Œè¿”å›åªæƒ³åºåˆ—ä¸­ç¬¬nä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚ä½¿ç”¨ä¸€ä¸ªè¾“å…¥è¿­ä»£å™¨æ¥å®ç°æ—¶ï¼šéœ€è¦é€’å¢è¿­ä»£å™¨ <code>n</code> æ¬¡æ­¤æ¡ˆè¾¾åˆ°æœŸæœ›çš„åŸè‰²ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›ä½¿ç”¨éšæœºè®¿é—®è¿­ä»£å™¨æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›</p>
<figure class="highlight ts"><figcaption><span>è®¿é—®æŒ‡å®šä½ç½®çš„å…ƒç´ </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAtRandomAccessIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IRandomAccessIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IRandomAccessIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IRandomAccessIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// ç§»åŠ¨ n ä¸ªå…ƒç´ </span></span><br><span class="line">  begin.move(n)</span><br><span class="line">  <span class="keyword">if</span> (begin.distance(end) &lt;= <span class="number">0</span>) <span class="keyword">return</span> end;</span><br><span class="line">  <span class="keyword">return</span> begin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªé€‚åº”ç®—æ³•"><a href="#è‡ªé€‚åº”ç®—æ³•" class="headerlink" title="è‡ªé€‚åº”ç®—æ³•"></a>è‡ªé€‚åº”ç®—æ³•</h3><figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¾“å…¥è¿­ä»£å™¨çš„elementAt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAtForwardIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end) &amp;&amp; n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    begin.increment()</span><br><span class="line">    n--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> begin</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>è‡ªé€‚åº”çš„elementAt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isRandomAccessIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  iter: IForwardIterator&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">iter</span> <span class="title">is</span> <span class="title">IRandomAccessIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;distabce&#x27;</span> <span class="keyword">in</span> iter</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAt</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(isRandomAccessIterator(begin) &amp;&amp; isRandomAccessIterator(end)) &#123;</span><br><span class="line">    <span class="keyword">return</span> elementAtRandomAccessIterator(begin, end, n)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> elementAtForwardIterator(begin, end, n)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnVue3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/ilearnVue3/" class="post-title-link" itemprop="url">Vue & Mutable</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:39:55" itemprop="dateCreated datePublished" datetime="2022-01-11T15:39:55+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-18 11:12:50" itemprop="dateModified" datetime="2022-01-18T11:12:50+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnReact/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/ilearnReact/" class="post-title-link" itemprop="url">React & Immutable</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:39:48" itemprop="dateCreated datePublished" datetime="2022-01-11T15:39:48+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-18 11:12:40" itemprop="dateModified" datetime="2022-01-18T11:12:40+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnTS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/ilearnTS/" class="post-title-link" itemprop="url">ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ - ç¼–ç¨‹éƒ¨åˆ†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:39:42" itemprop="dateCreated datePublished" datetime="2022-01-11T15:39:42+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-18 17:06:39" itemprop="dateModified" datetime="2022-01-18T17:06:39+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç¬¬äºŒç« ï¼šåŸºæœ¬ç±»å‹"><a href="#ç¬¬äºŒç« ï¼šåŸºæœ¬ç±»å‹" class="headerlink" title="ç¬¬äºŒç« ï¼šåŸºæœ¬ç±»å‹"></a>ç¬¬äºŒç« ï¼šåŸºæœ¬ç±»å‹</h2><h3 id="never-ä¸-è‡ªå®šä¹‰-never-ç±»å‹"><a href="#never-ä¸-è‡ªå®šä¹‰-never-ç±»å‹" class="headerlink" title="never ä¸ è‡ªå®šä¹‰ never ç±»å‹"></a>never ä¸ è‡ªå®šä¹‰ never ç±»å‹</h3><ol>
<li>æ— æ³•å®ä¾‹åŒ–çš„ç±»</li>
<li>æ²¡æœ‰å…ƒç´ çš„æšä¸¾</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> EmptyType: unique symbol; <span class="comment">// symbols çš„å­ç±»ï¼Œ ç”¨äºå¸¸é‡å’Œå±æ€§åï¼Œå¿…é¡»ç”¨constä¸èƒ½ç”¨let</span></span><br><span class="line"><span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ç¡®ä¿å…¶ä»–ä»£ç ä¸èƒ½å®ä¾‹åŒ–è¿™ä¸ªç±»å‹</span></span><br><span class="line"><span class="comment">// å› æ­¤ï¼Œä¹Ÿæ— æ³•ç”¨ InstanceType è·å–å®ä¾‹ ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> Empty &#123;</span><br><span class="line">  [EmptyType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Empty ä¸ never ä½œç”¨ç›¸å½“</span></span><br><span class="line"><span class="comment">// å› ä¸ºä¸èƒ½åˆ›å»º Empty å®ä¾‹ï¼Œæ‰€ä»¥æ ¹æœ¬ä¸èƒ½æ·»åŠ  return è¯­å¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">raise</span>(<span class="params">msg: <span class="built_in">string</span></span>): <span class="title">Empty</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Error &quot;<span class="subst">$&#123;msg&#125;</span>&quot; raised at <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ²¡æœ‰å€¼çš„æšä¸¾</span></span><br><span class="line"><span class="built_in">enum</span> EmptyType &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å•å…ƒç±»å‹"><a href="#å•å…ƒç±»å‹" class="headerlink" title="å•å…ƒç±»å‹"></a>å•å…ƒç±»å‹</h3><p>å•å…ƒç±»å‹åªå…è®¸æœ‰ä¸€ä¸ªå€¼ï¼ŒJS &amp; TS ä¸­éƒ½æ˜¯ <strong>void</strong>ï¼Œ</p>
<blockquote>
<p>åˆ©ç”¨å‡½æ•°çš„ <strong>å‰¯ä½œç”¨</strong>è€Œä¸æ˜¯è¿”å›å€¼, React &amp; Vue3: useEffect, useEffective -&gt; è€ƒè™‘è¿™ä¿©çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿè·å¾—å…¶çœŸæ­£çš„åŠŸèƒ½ã€‚å‡½æ•°æ¥å—ä»»æ„æ•°é‡çš„å®å‚å´ä¸è¿”å›ä»»æ„æœ‰æ„ä¹‰çš„å€¼ï¼Œè¿™ç§å‡½æ•°ç§°ä¸º <strong>åŠ¨ä½œ or æ¶ˆè´¹è€…</strong>ï¼›</p>
</blockquote>
<ol>
<li><code>void</code></li>
<li>è‡ªåˆ¶å•å…ƒç±»å‹ï¼šåªæœ‰ä¸€ä¸ªå€¼çš„æšä¸¾ï¼Œæˆ–è€…æ²¡æœ‰çŠ¶æ€çš„å•ä¾‹</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªæœ‰ä¸€ä¸ªå€¼çš„æšä¸¾</span></span><br><span class="line"><span class="built_in">enum</span> UnitTypeSingle &#123;</span><br><span class="line">  value = <span class="string">&#x27;void&#x27;</span> <span class="comment">// å€¼æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œæ»¡è¶³æšä¸¾ç‰¹æ€§å³å¯</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ²¡æœ‰çŠ¶æ€çš„å•ä¾‹</span></span><br><span class="line"><span class="comment">// ä¸ä¸Šé¢çš„ Empty ç±»ä¼¼ï¼Œåªä¸è¿‡æœ‰ä¸€ä¸ªå€¼ï¼Œå¯ä»¥ return</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> UnitType: unique symbol;</span><br><span class="line"><span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ç¡®ä¿å…¶ä»–ä»£ç ä¸èƒ½å®ä¾‹åŒ–è¿™ä¸ªç±»å‹</span></span><br><span class="line"><span class="comment">// å› æ­¤ï¼Œä¹Ÿæ— æ³•ç”¨ InstanceType è·å–å®ä¾‹ ç±»å‹</span></span><br><span class="line"><span class="comment">// ä»…ä½œä¸ºç±»å‹ä½¿ç”¨ï¼Œæ— æ³•å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">class</span> Unit &#123;</span><br><span class="line">  [EmptyType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">readonly</span> value: Unit = <span class="keyword">new</span> Unit(); <span class="comment">// å•ä¸ªå®ä¾‹ï¼Œé™æ€åªè¯»å±æ€§</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params"></span>) &#123;&#125;; <span class="comment">// ä¸èƒ½å®ä¾‹åŒ–</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>): <span class="title">Unit</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Unit.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°å€¼ç±»å‹å¸¸è§é™·é˜±"><a href="#æ•°å€¼ç±»å‹å¸¸è§é™·é˜±" class="headerlink" title="æ•°å€¼ç±»å‹å¸¸è§é™·é˜±"></a>æ•°å€¼ç±»å‹å¸¸è§é™·é˜±</h3><ol>
<li>æ•´æ•°ç±»å‹ä¸æº¢å‡º</li>
</ol>
<blockquote>
<p>å¤„ç†<code>ä¸Šæº¢</code>å’Œ<code>ä¸‹æº¢</code>çš„3ç§ä¸»è¦æ–¹å¼ï¼šç¯ç»•ï¼ˆç®€å•ä¸¢å¼ƒä¸åˆé€‚çš„ä½ï¼‰ï¼Œé¥±å’Œï¼ˆåœåœ¨æœ€å¤§å€¼ï¼Œç®—æ•°è¿ç®—å¤±å»ç»“åˆæ€§ï¼‰ï¼ŒæŠ¥é”™</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  4ä½æ— ç¬¦å·ç¼–ç è¡¨ç¤ºï¼š0~15ï¼Œå³ `b^N-1b^N-2....b1b0` è½¬ä¸º 10è¿›åˆ¶ `b^N-1 x 2^N-1 + ....b^0 x 2^0`</span></span><br><span class="line"><span class="comment">// 4ä½å¸¦ç¬¦å·ç¼–ç è¡¨ç¤ºï¼š-8~7ï¼Œé¦–ä½1å³è´Ÿæ•°ï¼Œ0å³æ­£æ•°ï¼Œè´Ÿæ•°ç¼–ç æ˜¯ 2^N - (ç»å¯¹å€¼)</span></span><br><span class="line"><span class="number">-8</span> = <span class="number">2</span>^<span class="number">4</span> - <span class="number">8</span> <span class="comment">// </span></span><br><span class="line"><span class="comment">// ç®—æ•°ä¸Šæº¢ - æ•°è¶…å‡ºè¡¨è¾¾èŒƒå›´</span></span><br><span class="line"><span class="comment">// ä¸‹æº¢ - æ•°å¤ªå°æ— æ³•ç»™å®š ä½æ•° è¡¨ç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šæº¢ - ç¯ç»•ï¼š 1111(15) + 1 =&gt; 10000 è¶…å‡º4ä½ï¼Œä¸¢å¼ƒ1ä½ï¼ˆä»å³åˆ°å·¦ï¼‰1 =&gt; 0000ï¼Œå³ç¯ç»•å›0</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æµ®ç‚¹ç±»å‹å’Œåœ†æ•´</li>
</ol>
<blockquote>
<p>TS &amp; JS: ä½¿ç”¨ binary64 ç¼–ç å°†æ•°å­—è¡¨ç¤ºä¸º 64 ä½æµ®ç‚¹æ•°ï¼Œ0.10 çš„è¿‘ä¼¼æ•°ä¸º <code>0.100000000000000005551115123216</code>ï¼Œå¤„ç† 0.1 æ—¶ è¿‘ä¼¼æ•°è¢«åœ†æ•´ä¸º 0.1ï¼Œç›¸åŠ  3æ¬¡åçš„å’Œè¢«åœ†æ•´æˆ<code>0.10000000000000004</code>ï¼Œæ‰€ä»¥ 0.30 !== 0.1 + 0.1 + 0.1</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜²æ­¢åœ†æ•´</span></span><br><span class="line"><span class="built_in">Number</span>.isSafeInteger() <span class="comment">// ä¸€ä¸ªæ•´æ•°å€¼èƒ½å¦åœ¨ä¸è¢«åœ†æ•´çš„æƒ…å†µä¸‹è¡¨ç¤ºå‡ºæ¥</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ¯”è¾ƒæµ®ç‚¹æ•°</li>
</ol>
<blockquote>
<p>ç¡®ä¿2æµ®ç‚¹æ•°å·®å€¼åœ¨ç»™å®šé˜ˆå€¼å†…ï¼ŒJså†…çš„ç»™å®šé˜ˆå€¼æ˜¯ <code>Number.epsilon</code></p>
</blockquote>
<ol start="4">
<li><p>ä»»æ„å¤§æ•´æ•°JS:  <code>BigInt</code></p>
<p>JS åŸç”Ÿæä¾›BigIntå‡½æ•°ï¼Œå¯ä»¥ç”¨å®ƒç”Ÿæˆ BigInt ç±»å‹çš„æ•°å€¼ã€‚è½¬æ¢è§„åˆ™åŸºæœ¬ä¸Number()ä¸€è‡´ï¼Œå°†å…¶ä»–ç±»å‹çš„å€¼è½¬ä¸º BigInt</p>
</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123n</span> <span class="comment">// &#x27;bigint&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">123</span> <span class="comment">// number</span></span><br><span class="line"><span class="number">-42n</span> <span class="comment">// æ­£ç¡®</span></span><br><span class="line">+<span class="number">42n</span> <span class="comment">// æŠ¥é”™ - BigInt å¯ä»¥ä½¿ç”¨è´Ÿæ•° - ï¼Œä¸èƒ½ä½¿ç”¨ +ï¼Œä¸ asm.js è¯­æ³•å†²çª</span></span><br><span class="line">BigInt(<span class="number">123</span>) <span class="comment">// 123n</span></span><br><span class="line">BigInt(<span class="string">&#x27;123&#x27;</span>) <span class="comment">// 123n</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h3><blockquote>
<p>UTF-32 æ˜¯å›ºå®šç¼–ç ï¼Œä¸€ä¸ªå­—ç¬¦ç”±4ä¸ªå­—èŠ‚ç»„æˆï¼ŒUTF-8æ˜¯å˜é•¿ç¼–ç ï¼Œå­—èŠ‚æ•°ä¾èµ–å­—ç¬¦æ•°</p>
</blockquote>
<h3 id="ä½¿ç”¨æ•°ç»„å’Œå¼•ç”¨æ„å»ºæ•°æ®ç»“æ„"><a href="#ä½¿ç”¨æ•°ç»„å’Œå¼•ç”¨æ„å»ºæ•°æ®ç»“æ„" class="headerlink" title="ä½¿ç”¨æ•°ç»„å’Œå¼•ç”¨æ„å»ºæ•°æ®ç»“æ„"></a>ä½¿ç”¨æ•°ç»„å’Œå¼•ç”¨æ„å»ºæ•°æ®ç»“æ„</h3><p>å›ºå®šå¤§å°æ•°ç»„ï¼ˆå…·æœ‰æå¿«çš„è¯»å–/æ›´æ–°èƒ½åŠ›ï¼Œåˆ©äºè¡¨ç¤ºç¨ å¯†æ•°æ®ï¼‰ï¼šè¿ç»­å†…å­˜åŒºåŸŸï¼Œä¸èƒ½åœ¨åŸå†…å­˜ä½ç½®å¢é•¿æˆ–è€…ç¼©å‡ã€‚å¦‚æœè¦ push ä¸€ä¸ªå€¼ï¼Œåˆ™æ”¹å˜äº† <code>å›ºå®š</code>ï¼Œæ­¤æ—¶åˆ™éœ€è¦åˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå°†ä¹‹å‰çš„5ä¸ªå€¼å¤åˆ¶è¿‡æ¥</p>
<blockquote>
<p>è€ƒè™‘ React ä¸­ä¸šåŠ¡å¯¹æ•°ç»„çš„å¤„ç†ï¼šä½¿ç”¨ slice &amp; concat è€Œä¸æ˜¯ push &amp; popï¼Œå¯¹ <code>ä¸å¯å˜</code> çš„å¤„ç†</p>
</blockquote>
<h3 id="é«˜æ•ˆåˆ—è¡¨"><a href="#é«˜æ•ˆåˆ—è¡¨" class="headerlink" title="é«˜æ•ˆåˆ—è¡¨"></a>é«˜æ•ˆåˆ—è¡¨</h3><ol>
<li>ä½¿ç”¨ <code>é“¾è¡¨</code> å®ç° åˆ—è¡¨æ•°æ®ç»“æ„: è®¿é—®æŸä¸ªå…ƒç´ å¼€é”€è¾ƒå¤§ <code>T(N)</code>ï¼Œappend åˆ™å¾ˆå®¹æ˜“</li>
<li>ä½¿ç”¨ <code>æ•°ç»„</code> å®ç° åˆ—è¡¨æ•°æ®ç»“æ„: è®¿é—®æŸä¸ªå…ƒç´ å¾ˆå®¹æ˜“ï¼Œappend å¼€é”€è¾ƒå¤§ <code>T(N)</code></li>
</ol>
<blockquote>
<p>å¤§éƒ¨åˆ†è¯­è¨€éƒ½ä½¿ç”¨ å…·æœ‰é¢å¤–å®¹é‡çš„åŸºäºæ•°ç»„çš„åˆ—è¡¨å®ç°</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> NumberList &#123;</span><br><span class="line">  <span class="keyword">private</span> numbers: <span class="built_in">number</span>[] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">private</span> length: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> capacity: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  at(index: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="built_in">this</span>.length) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">RangeError</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.numbers[index];</span><br><span class="line">  &#125;</span><br><span class="line">  append(value: <span class="built_in">number</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.length &lt; <span class="built_in">this</span>.capacity) &#123;</span><br><span class="line">      <span class="built_in">this</span>.numbers[<span class="built_in">this</span>.length] = value</span><br><span class="line">      <span class="built_in">this</span>.length++</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰©å®¹</span></span><br><span class="line">    <span class="built_in">this</span>.capacity =  <span class="built_in">this</span>.capacity * <span class="number">2</span></span><br><span class="line">    <span class="keyword">let</span> newNumbers: <span class="built_in">number</span>[] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">this</span>.capacity)</span><br><span class="line">    <span class="comment">// å¤åˆ¶åŸæ•°ç»„å€¼åˆ°æ–°æ‰©å®¹åçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; <span class="built_in">this</span>.length; i++&gt;) &#123;</span><br><span class="line">      newNumbers[i] = <span class="built_in">this</span>.numbers[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// append value</span></span><br><span class="line">    newNumbers[<span class="built_in">this</span>.length] = value</span><br><span class="line">    <span class="comment">// è¿ç§»æ•°ç»„</span></span><br><span class="line">    <span class="built_in">this</span>.numbers = newNumbers</span><br><span class="line">    <span class="built_in">this</span>.length++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h3><ol>
<li><p>åŸºäºæ•°ç»„çš„äºŒå‰æ ‘å®ç° - ç¨€ç–äºŒå‰æ ‘æµªè´¹ç©ºé—´</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ‘çš„ä¸‹æ ‡ä»1å¼€å§‹</span></span><br><span class="line"><span class="keyword">class</span> Tree &#123;</span><br><span class="line">  nodes: (<span class="built_in">number</span> | <span class="literal">undefined</span>)[] = []</span><br><span class="line">  <span class="comment">// ç»™å®šä¸Šå±‚èŠ‚ç‚¹çš„ç´¢å¼•æ—¶ï¼Œè®¡ç®—å·¦ä¾§èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">  left_node_index(index: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> index * <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç»™å®šä¸Šå±‚èŠ‚ç‚¹çš„ç´¢å¼•æ—¶ï¼Œè®¡ç®—å³ä¾§èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">  right_node_index(index: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> index * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  add_level() &#123;</span><br><span class="line">    <span class="comment">// æ•°ç»„æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">let</span> newNodes: (<span class="built_in">number</span> | <span class="literal">undefined</span>)[] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">this</span>.nodes.length * <span class="number">2</span> + <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// æ‰©å®¹åå¤åˆ¶åŸæ•°ç»„å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.nodes.length; i++) &#123;</span><br><span class="line">      newNodes[i] = <span class="built_in">this</span>.nodes[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿ç§»æ•°ç»„</span></span><br><span class="line">    <span class="built_in">this</span>.nodes = newNodes</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¹æ ‘çš„æ ¹èŠ‚ç‚¹çš„å¼•ç”¨æ¥è¡¨ç°æ ‘ - ç´§å‡‘äºŒå‰æ ‘å®ç°</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> TreeNode &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  left: TreeNode | <span class="literal">undefined</span>; <span class="comment">// å¼•ç”¨å…¶ä»–èŠ‚ç‚¹</span></span><br><span class="line">  right: TreeNode | <span class="literal">undefined</span>;<span class="comment">// å¼•ç”¨å…¶ä»–èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123; <span class="comment">// åˆå§‹åŒ–èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">    <span class="built_in">this</span>.left = <span class="literal">undefined</span></span><br><span class="line">    <span class="built_in">this</span>.right = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="å…³è”æ•°ç»„-å­—å…¸-å“ˆå¸Œè¡¨ï¼ˆJS-TSï¼‰"><a href="#å…³è”æ•°ç»„-å­—å…¸-å“ˆå¸Œè¡¨ï¼ˆJS-TSï¼‰" class="headerlink" title="å…³è”æ•°ç»„ - å­—å…¸/å“ˆå¸Œè¡¨ï¼ˆJS/TSï¼‰"></a>å…³è”æ•°ç»„ - å­—å…¸/å“ˆå¸Œè¡¨ï¼ˆJS/TSï¼‰</h3><blockquote>
<p>å›ºå®šå¤§å°æ•°ç»„+å¼•ç”¨ï¼ˆå¼•ç”¨çš„è¿½åŠ æ•ˆæœæ›´å¥½ï¼Œåˆ©äºè¡¨ç¤ºç¨€ç–æ•°æ®ï¼‰ï¼Œå¼•ç”¨æŒ‡å‘ä¸€ä¸ªåˆ—è¡¨ï¼ˆå‚è€ƒä¸Šè¿°é«˜æ•ˆåˆ—è¡¨ï¼‰</p>
</blockquote>
<h2 id="ç¬¬ä¸‰ç« ï¼šç»„åˆ"><a href="#ç¬¬ä¸‰ç« ï¼šç»„åˆ" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šç»„åˆ"></a>ç¬¬ä¸‰ç« ï¼šç»„åˆ</h2><h3 id="å¤åˆç±»å‹"><a href="#å¤åˆç±»å‹" class="headerlink" title="å¤åˆç±»å‹"></a>å¤åˆç±»å‹</h3><ol>
<li><p>å…ƒç»„ <code>Tuple</code> - å›ºå®šé•¿åº¦æ•°ç»„ï¼ˆä¸€ç»„ä¸åŒæˆ–ç›¸åŒç±»å‹ï¼‰ï¼ŒæŒ‰åˆ†é‡å€¼ä½ç½®è®¿é—®å€¼ï¼Œå®¹æ˜“å‡ºé”™</p>
</li>
<li><p>è®°å½• <code>Record</code> - é€šè¿‡å±æ€§åç§°è®¿é—®å€¼</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰å…ƒç»„</span></span><br><span class="line"><span class="keyword">class</span> Pair&lt;T1, T2&gt; &#123;</span><br><span class="line">  m0: T1;</span><br><span class="line">  m1: T2;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">m0: T1, m1: T2</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.m0 = m0</span><br><span class="line">    <span class="built_in">this</span>.m1 = m1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Point2D = Pair&lt;<span class="built_in">number</span>, <span class="built_in">number</span>&gt;</span><br><span class="line"><span class="comment">// Record</span></span><br><span class="line"><span class="keyword">class</span> Point&lt;T1, T2&gt; &#123;</span><br><span class="line">  x: T1;</span><br><span class="line">  y: T2;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: T1, y: T2</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// point1 åªèƒ½æœ‰ x, y2ä¸ªå±æ€§</span></span><br><span class="line"><span class="keyword">const</span> point1: Point&lt;<span class="built_in">number</span>, <span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">  x: <span class="number">1</span>,</span><br><span class="line">  y: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç»´æŠ¤ä¸å˜é‡ï¼šclass åˆ›å»ºçš„å˜é‡ï¼ˆobjectï¼‰å¯ä»¥æœ‰å…³è”çš„æ–¹æ³•</p>
<ul>
<li>ä¸éœ€è¦ä¿è¯ä¸å˜é‡ï¼Œå±æ€§å…¬æœ‰å³å¯</li>
<li>å±æ€§åªè¯»ï¼Œä¹Ÿä¸éœ€è¦ç»´æŠ¤ä¸å˜é‡ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­éªŒè¯åˆå§‹å€¼å³å¯</li>
</ul>
</li>
</ol>
<blockquote>
<p>ç¡®ä¿å€¼çš„æ ¼å¼æ­£ç¡®çš„è§„åˆ™ç§°ä¸ºä¸å˜é‡ï¼šä»¥JS/TS ä¸ºä¾‹ï¼Œé€šè¿‡è®©å±æ€§ç§æœ‰ï¼Œå¹¶æä¾›æ›´æ–°ç§æœ‰å±æ€§æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿ç»´æŒä¸å˜é‡çš„ç¨³å®š</p>
</blockquote>
<h3 id="ä½¿ç”¨ç±»å‹è¡¨è¾¾å¤šé€‰ä¸€"><a href="#ä½¿ç”¨ç±»å‹è¡¨è¾¾å¤šé€‰ä¸€" class="headerlink" title="ä½¿ç”¨ç±»å‹è¡¨è¾¾å¤šé€‰ä¸€"></a>ä½¿ç”¨<code>ç±»å‹</code>è¡¨è¾¾å¤šé€‰ä¸€</h3><ol>
<li><p>ä½¿ç”¨æšä¸¾æ›¿ä»£å¸¸é‡</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> DayofWeek &#123;</span><br><span class="line">  Sunday,</span><br><span class="line">  Monday,</span><br><span class="line">  Tuesday,</span><br><span class="line">  Webnesday,</span><br><span class="line">  Thursday,</span><br><span class="line">  Friday,</span><br><span class="line">  Saturday</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰å¯é€‰ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> Optional&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> value: T | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">private</span> assigned: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value?: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value ? value : <span class="literal">undefined</span></span><br><span class="line">    <span class="built_in">this</span>.assigned = value ? <span class="literal">true</span> : <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  hasValue():<span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.assigned</span><br><span class="line">  &#125;</span><br><span class="line">  getValue(): T &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.assigned) <span class="keyword">throw</span> <span class="built_in">Error</span>();</span><br><span class="line">    <span class="keyword">return</span> &lt;T&gt;<span class="built_in">this</span>.value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»“æœæˆ–é”™è¯¯ï¼šè¿”å›ä¸€ä¸ªç»“æœæˆ–è€…è¿”å›é”™è¯¯</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> InputError &#123;</span><br><span class="line">  NoInput,</span><br><span class="line">  Invaild</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Result &#123;</span><br><span class="line">  error: InputError | <span class="literal">undefined</span>;</span><br><span class="line">  value: DayofWeek | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">error?: InputError, value?: DayofWeek</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.error = error || <span class="literal">undefined</span></span><br><span class="line">    <span class="built_in">this</span>.value = value || <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseDayofWeek</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">Result</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!input) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Result(InputError.NoInput)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">switch</span>(input.toLowerCase()) &#123;</span><br><span class="line">    <span class="comment">// sunday ~ monday</span></span><br><span class="line">    <span class="comment">// new Result(undefained, input)</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Result(InputError.Invaild);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‡ªåˆ¶ Either ç±»å‹</p>
<p>è€ƒè™‘ä¸Šè¿°çš„ <code>Result</code> å¹¶ä¸é€šç”¨ï¼Œè¿›ä¸€æ­¥æå– Eitherï¼Œä½¿å…¶å¯ä»¥åº”ç”¨åˆ°å…¶ä»–åœ°æ–¹</p>
<blockquote>
<p>Either ç±»å‹ åŒ…å«2ä¸ªç±»å‹ï¼Œ TLeft &amp; TRight, çº¦å®š TLeft å­˜å‚¨é”™è¯¯ç±»å‹ï¼Œ TRightå­˜å‚¨æœ‰æ•ˆå€¼ç±»å‹</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Either&lt;TL, TR&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> value: TL | TR;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> left: <span class="built_in">boolean</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œå› ä¸ºéœ€è¦ç¡®ä¿ value å’Œ left æ ‡å¿—æ˜¯åŒæ­¥çš„</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params">value: TL | TR, left: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">    <span class="built_in">this</span>.left = left</span><br><span class="line">  &#125;</span><br><span class="line">  isLeft(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.left</span><br><span class="line">  &#125;</span><br><span class="line">  getLeft(): TL &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.isLeft()) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="keyword">return</span> &lt;TL&gt;<span class="built_in">this</span>.value</span><br><span class="line">  &#125;</span><br><span class="line">  isRight(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="built_in">this</span>.left</span><br><span class="line">  &#125;</span><br><span class="line">  getRight(): TR &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.isRight()) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="keyword">return</span> &lt;TR&gt;<span class="built_in">this</span>.value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> makeLeft&lt;TL, TR&gt;(value: TL) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Either&lt;TL, TR&gt;(value, <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> makeRight&lt;TL, TR&gt;(value: TR) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Either&lt;TL, TR&gt;(value, <span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ Either æ”¹é€ ä¸Šè¿° è¿”å›</span></span><br><span class="line"><span class="built_in">enum</span> InputError &#123;</span><br><span class="line">  NoInput,</span><br><span class="line">  Invaild</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Result = Either&lt;InputError, DayofWeek&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseDayofWeek</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">Result</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!input) &#123;</span><br><span class="line">    <span class="keyword">return</span> Either.makeLeft(InputError.NoInput)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">switch</span>(input.toLowerCase()) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;sunday&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> Either.makeRight(DayofWeek.Sunday)</span><br><span class="line">    <span class="comment">// å…¶ä»–åŒç†</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> Either.makeLeft(InputError.Invaild);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="å˜ä½“ç±»å‹ï¼šæ ‡ç­¾è”åˆç±»å‹-ts-tagged-union"><a href="#å˜ä½“ç±»å‹ï¼šæ ‡ç­¾è”åˆç±»å‹-ts-tagged-union" class="headerlink" title="å˜ä½“ç±»å‹ï¼šæ ‡ç­¾è”åˆç±»å‹ (ts tagged union ?)"></a>å˜ä½“ç±»å‹ï¼šæ ‡ç­¾è”åˆç±»å‹ (ts tagged union ?)</h4><blockquote>
<p>å˜ä½“ç±»å‹åŒ…å«ä»»æ„æ•°é‡çš„åŸºæœ¬ç±»å‹çš„å€¼ï¼Œæ ‡ç­¾æŒ‡çš„æ˜¯ å³ä½¿åŸºæœ¬ç±»å‹æœ‰é‡åˆçš„å€¼ï¼Œä»ç„¶èƒ½å¤Ÿå‡†ç¡®è¯´æ˜è¯¥å€¼æ¥è‡ªå“ªä¸ªç±»å‹</p>
</blockquote>
<ol>
<li><p>å…ˆæ¥æ¬£èµä¸€æ®µä½“æ“</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°† tagged union ç±»å‹è½¬ä¸º union type</span></span><br><span class="line"><span class="keyword">interface</span> Example &#123;</span><br><span class="line">  a: <span class="built_in">string</span>;</span><br><span class="line">  b: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> SingleProp&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;[P <span class="keyword">in</span> keyof T]?: P <span class="keyword">extends</span> K ? T[P] : <span class="built_in">never</span>&#125;</span><br><span class="line"><span class="keyword">type</span> oneOf&lt;T&gt; = &#123;[K <span class="keyword">in</span> keyof T]: Pick&lt;T, K&gt; &amp; SingleProp&lt;T, K&gt;&#125;[keyof T]</span><br><span class="line"><span class="keyword">type</span> ExamplePropUnion = oneOf&lt;Example&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡ ä½•å½¢çŠ¶é›†åˆï¼šæ·»åŠ ä¸€ä¸ª <code>kind</code> å±æ€§æ ‡ç­¾ï¼Œæ–¹ä¾¿ä½¿ç”¨æ—¶åˆ¤æ–­æˆ–è€…å¼ºåˆ¶è½¬æ¢å½¢çŠ¶</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  <span class="keyword">readonly</span> kind: <span class="built_in">string</span> = <span class="string">&#x27;Point&#x27;</span></span><br><span class="line">  x: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  y: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle &#123;</span><br><span class="line">  <span class="keyword">readonly</span> kind: <span class="built_in">string</span> = <span class="string">&#x27;Circle&#x27;</span></span><br><span class="line">  x: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  y: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  radius: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Shape = Point | Circle</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ç°ä¸€ä¸ªé€šç”¨çš„å˜ä½“ï¼šè€Œä¸éœ€è¦ç±»å‹è‡ªèº«å­˜å‚¨ä¸€ä¸ªæ ‡ç­¾</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåˆ¶å˜ä½“</span></span><br><span class="line"><span class="keyword">class</span> Variant&lt;T1, T2, T3&gt; &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: T1 | T2 | T3;</span><br><span class="line">  <span class="keyword">readonly</span> index: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params">value: T1 | T2 | T3, index: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">    <span class="built_in">this</span>.index = index;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> make1&lt;T1, T2, T3&gt;(value: T1): Variant&lt;T1, T2, T3&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Variant&lt;T1, T2, T3&gt;(value, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> make2&lt;T1, T2, T3&gt;(value: T2): Variant&lt;T1, T2, T3&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Variant&lt;T1, T2, T3&gt;(value, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> make3&lt;T1, T2, T3&gt;(value: T3): Variant&lt;T1, T2, T3&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Variant&lt;T1, T2, T3&gt;(value, <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ›´æ–° å‡ ä½•å½¢çŠ¶é›†åˆ</span></span><br><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  y: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle &#123;</span><br><span class="line">  x: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  y: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  radius: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Rectangle &#123;</span><br><span class="line">  x: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  y: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  width: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  height: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Shape = Variant&lt;Point, Circle, Rectangle&gt;;</span><br><span class="line"><span class="keyword">let</span> shapes: Shape[] = [</span><br><span class="line">  Variant.make2(<span class="keyword">new</span> Circle()),</span><br><span class="line">  Variant.make3(<span class="keyword">new</span> Rectangle()),</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> shape <span class="keyword">of</span> shapes) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (shape.index) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">let</span> point: Point = &lt;Point&gt;shape.value;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`Point <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(point)&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">let</span> cicle: Circle = &lt;Circle&gt;shape.value;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`Circle <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(cicle)&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      <span class="keyword">let</span> rectangle: Rectangle = &lt;Rectangle&gt;shape.value;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`Point <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(rectangle)&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h3><h4 id="è§’åº¦1-é¢å‘å¯¹è±¡"><a href="#è§’åº¦1-é¢å‘å¯¹è±¡" class="headerlink" title="è§’åº¦1: é¢å‘å¯¹è±¡"></a>è§’åº¦1: é¢å‘å¯¹è±¡</h4><p>  å®ç°ä¸€ä¸ªæ–‡æ¡£ï¼Œè¯¥æ–‡æ¡£åŒ…å«3ä¸ªé¡¹ç›®ï¼šæ®µè½ã€å›¾ç‰‡å’Œè¡¨æ ¼ï¼Œåœ¨å±å¹•ä¸­æ¸²æŸ“æˆ–è€…ä¸ºæœ‰è§†éšœäººç¾¤é˜…è¯»çš„åŠŸèƒ½;<br>  å¯è§ <code>IDocItem</code> å­˜å‚¨äº†æè¿°æ–‡æ¡£çš„ä¿¡æ¯ï¼Œä¸åº”è¯¥è´Ÿè´£å…¶ä»–å·¥ä½œï¼Œå¦‚ æ¸²æŸ“å’Œé˜…è¯»ï¼Œå¦‚æœæ·»åŠ æ–°åŠŸèƒ½ï¼Œå°±éœ€è¦æ›´æ–° <code>IDocItem</code>æ¥å£ä»¥åŠæ‰€æœ‰å®ç°ç±»ï¼š<code>Paragraph</code>ï¼Œ<code>Picture</code>ï¼Œ<code>Table</code>ï¼Œæ¥å®ç°è¿™ä¸ªæ–°åŠŸèƒ½ã€‚</p>
<ol>
<li><p>ä¸ä½¿ç”¨è®¿é—®è€…æ¨¡å¼</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä½¿ç”¨è®¿é—®è€…æ¨¡å¼</span></span><br><span class="line"><span class="keyword">class</span> Renderer &#123;<span class="comment">/* Rendering methods */</span>&#125;</span><br><span class="line"><span class="keyword">class</span> ScreenReader &#123;<span class="comment">/* Screen reading methods */</span>&#125;</span><br><span class="line"><span class="keyword">interface</span> IDocItem &#123;</span><br><span class="line">  render(renderer: renderer): <span class="built_in">void</span>;</span><br><span class="line">  read(ScreenReader: ScreenReader): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°æ®µè½</span></span><br><span class="line"><span class="keyword">class</span> Paragraph <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Paragraph members omitted</span></span><br><span class="line">  render(renderer: renderer) &#123;</span><br><span class="line">    <span class="comment">// draw</span></span><br><span class="line">  &#125;</span><br><span class="line">  read(ScreenReader: ScreenReader) &#123;</span><br><span class="line">    <span class="comment">// read</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">class</span> Picture <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Picture members omitted</span></span><br><span class="line">  render(renderer: renderer) &#123;</span><br><span class="line">    <span class="comment">// draw</span></span><br><span class="line">  &#125;</span><br><span class="line">  read(ScreenReader: ScreenReader) &#123;</span><br><span class="line">    <span class="comment">// read</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¡¨æ ¼</span></span><br><span class="line"><span class="keyword">class</span> Table <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Table members omitted</span></span><br><span class="line">  render(renderer: renderer) &#123;</span><br><span class="line">    <span class="comment">// draw</span></span><br><span class="line">  &#125;</span><br><span class="line">  read(ScreenReader: ScreenReader) &#123;</span><br><span class="line">    <span class="comment">// read</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> doc: IDocItem = [<span class="keyword">new</span> Paragraph(), <span class="keyword">new</span> Table()]</span><br><span class="line"><span class="keyword">let</span> renderer: Renderer = <span class="keyword">new</span> Renderer()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> doc) &#123;</span><br><span class="line">  v.render(renderer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨è®¿é—®è€…æ¨¡å¼: åœ¨ä¸€ä¸ªå¯¹è±¡ç»“æ„çš„å…ƒç´ ä¸Šæ‰§è¡Œçš„æ“ä½œï¼Œè¿™ç§æ¨¡å¼å…è®¸åœ¨å®šä¹‰æ–°æ“ä½œæ—¶ï¼Œä¸æ”¹å˜å…¶æ“ä½œå…ƒç´ çš„ç±»</p>
<blockquote>
<p>ä½¿ç”¨ <code>åŒåˆ†æ´¾</code> æœºåˆ¶ï¼Œè®©æ–‡æ¡£æ¥å—è®¿é—®è€…ï¼Œç„¶åæŠŠè‡ªå·±ä¼ é€’ç»™è®¿é—®è€…æ¥å®ç°ä»»åŠ¡</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IVistor &#123;</span><br><span class="line">  visitParagraph(paragraph: Paragraph): <span class="built_in">void</span>;</span><br><span class="line">  visitPicture(picture: Picture): <span class="built_in">void</span>;</span><br><span class="line">  visitTable(table: Table): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Randerer <span class="keyword">implements</span> IVistor &#123;</span><br><span class="line">  <span class="comment">// Randerer methods ommited</span></span><br><span class="line">  visitParagraph(paragraph: Paragraph) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitPicture(picture: Picture)&#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitTable(table: Table) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ScreenReader <span class="keyword">implements</span> IVistor &#123;</span><br><span class="line">  <span class="comment">// Randerer methods ommited</span></span><br><span class="line">  visitParagraph(paragraph: Paragraph) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitPicture(picture: Picture) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitTable(table: Table) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IDocItem &#123;</span><br><span class="line">  accept(visitor: IVistor, printer: Printer&lt;&gt;): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°æ®µè½</span></span><br><span class="line"><span class="keyword">class</span> Paragraph <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Paragraph members omitted</span></span><br><span class="line">  accept(visitor: IVistor) &#123;</span><br><span class="line">    visitor.visitParagraph(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">class</span> Picture <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Picture members omitted</span></span><br><span class="line">  accept(visitor: IVistor) &#123;</span><br><span class="line">    visitor.visitPicture(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¡¨æ ¼</span></span><br><span class="line"><span class="keyword">class</span> Table <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">// Table members omitted</span></span><br><span class="line">  accept(visitor: IVistor) &#123;</span><br><span class="line">    visitor.visitTable(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> doc: IDocItem = [<span class="keyword">new</span> Paragraph(), <span class="keyword">new</span> Table()]</span><br><span class="line"><span class="keyword">let</span> renderer: IVistor = <span class="keyword">new</span> Renderer()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> doc) &#123;</span><br><span class="line">  v.accept(renderer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="è§’åº¦2-æ³›å‹æ ‡ç­¾è”åˆç±»å‹"><a href="#è§’åº¦2-æ³›å‹æ ‡ç­¾è”åˆç±»å‹" class="headerlink" title="è§’åº¦2: æ³›å‹æ ‡ç­¾è”åˆç±»å‹"></a>è§’åº¦2: æ³›å‹æ ‡ç­¾è”åˆç±»å‹</h4><ol>
<li><p>è®¿é—®å˜ä½“</p>
<blockquote>
<p>ä½¿ç”¨å˜ä½“è®¿é—®è€…è¿›è¡Œå¤„ç†: å°†åŸŸå¯¹è±¡ä¸è®¿é—®è€…å®Œå…¨åˆ†ç¦»å¼€ï¼Œç”šè‡³ä¸éœ€è¦åœ¨å­˜å‚¨æ–‡æ¡£ç±»å†…å®ç° <code>accept</code> æ–¹æ³•</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜ä½“è®¿é—®è€…</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visit</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>, <span class="title">T3</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  variant: Variant&lt;T1, T2, T3&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  func1: (value: T1) =&gt; <span class="built_in">void</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">  func2: (value: T2) =&gt; <span class="built_in">void</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">  func3: (value: T3) =&gt; <span class="built_in">void</span>;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (variant.index) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      func1(&lt;T1&gt;variant.value);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      func2(&lt;T2&gt;variant.value);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      func3(&lt;T3&gt;variant.value);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨å˜ä½“è®¿é—®è€…è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="keyword">class</span> Randerer &#123;</span><br><span class="line">  <span class="comment">// Randerer methods ommited</span></span><br><span class="line">  visitParagraph(paragraph: Paragraph) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitPicture(picture: Picture) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitTable(table: Table) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ScreenReader &#123;</span><br><span class="line">  <span class="comment">// Randerer methods ommited</span></span><br><span class="line">  visitParagraph(paragraph: Paragraph) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitPicture(picture: Picture) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">  visitTable(table: Table) &#123;<span class="comment">/* do something */</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ–‡æ¡£ä¸å†éœ€è¦ä¸€ä¸ªå…¬å…±æ¥å£</span></span><br><span class="line"><span class="comment">// å®ç°æ®µè½</span></span><br><span class="line"><span class="keyword">class</span> Paragraph &#123;</span><br><span class="line">  <span class="comment">// Paragraph members omitted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">class</span> Picture &#123;</span><br><span class="line">  <span class="comment">// Picture members omitted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¡¨æ ¼</span></span><br><span class="line"><span class="keyword">class</span> Table &#123;</span><br><span class="line">  <span class="comment">// Table members omitted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†æ–‡æ¡£å­˜å‚¨åˆ°å˜ä½“ä¸­</span></span><br><span class="line"><span class="keyword">let</span> doc: Variant&lt;Paragraph, Picture, Table&gt;[] = [</span><br><span class="line">  Variant.make(<span class="keyword">new</span> Paragraph(), <span class="number">0</span>),</span><br><span class="line">  Variant.make(<span class="keyword">new</span> Table(), <span class="number">2</span>),</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> renderer = <span class="keyword">new</span> Renderer()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> doc) &#123;</span><br><span class="line">  visit(</span><br><span class="line">    v,</span><br><span class="line">    (paragraph: Paragraph) =&gt; renderer.visitParagraph(paragraph),</span><br><span class="line">    (picture: Picture) =&gt; renderer.visitPicture(picture)</span><br><span class="line">    (table: Table) =&gt; renderer.visitTable(table)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¹ é¢˜ï¼šå®ç° <code>visit()</code> åœ¨ç»™å®š <code>Variant&lt;T1, T2, T3&gt;</code> è¿”å› <code>Variant&lt;U1, U2, U3&gt;</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visit</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>, <span class="title">T3</span>, <span class="title">U1</span>, <span class="title">U2</span>, <span class="title">U3</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">variant: Variant&lt;T1, T2, T3&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">func1: (value: T1) =&gt; U1,</span></span></span><br><span class="line"><span class="function"><span class="params">func2: (value: T2) =&gt; U2,</span></span></span><br><span class="line"><span class="function"><span class="params">func3: (value: T3) =&gt; U3</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">Variant</span>&lt;<span class="title">U1</span>, <span class="title">U2</span>, <span class="title">U3</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (variant.index) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">return</span> Variant.make1(func1(&lt;T1&gt;variant.value));</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">return</span> Variant.make2(func2(&lt;T2&gt;variant.value));</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      <span class="keyword">return</span> Variant.make3(func3(&lt;T3&gt;variant.value));</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä»£æ•°æ•°æ®ç±»å‹-AlgeBraic-Data-Type-ADT"><a href="#ä»£æ•°æ•°æ®ç±»å‹-AlgeBraic-Data-Type-ADT" class="headerlink" title="ä»£æ•°æ•°æ®ç±»å‹ AlgeBraic Data Type, ADT"></a>ä»£æ•°æ•°æ®ç±»å‹ AlgeBraic Data Type, ADT</h3><blockquote>
<p>åœ¨ç±»å‹ç³»ç»Ÿä¸­ç»„åˆç±»å‹çš„æ–¹å¼</p>
</blockquote>
<h4 id="ä¹˜ç§¯ç±»å‹-gt-å¤åˆç±»å‹ï¼ˆå…ƒç»„-amp-è®°å½•ï¼‰"><a href="#ä¹˜ç§¯ç±»å‹-gt-å¤åˆç±»å‹ï¼ˆå…ƒç»„-amp-è®°å½•ï¼‰" class="headerlink" title="ä¹˜ç§¯ç±»å‹ =&gt; å¤åˆç±»å‹ï¼ˆå…ƒç»„ &amp; è®°å½•ï¼‰"></a>ä¹˜ç§¯ç±»å‹ =&gt; å¤åˆç±»å‹ï¼ˆå…ƒç»„ &amp; è®°å½•ï¼‰</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> A &#123;</span><br><span class="line">  a1,</span><br><span class="line">  a2</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">enum</span> B &#123;</span><br><span class="line">  b1,</span><br><span class="line">  b2</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 X 2 = 4</span></span><br><span class="line"><span class="keyword">type</span> AB = [A, B]; <span class="comment">// [A.a1, B.b1], [A.a1, B.b2], [A.a2, B.b1], [A.a2, B.b2]</span></span><br><span class="line"><span class="keyword">type</span> AB1 = Record&lt;A, B&gt;; <span class="comment">// &#123;0: B; 1: B&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="å’Œç±»å‹-gt-å¤šé€‰ä¸€ç±»å‹-amp-å˜ä½“ç±»å‹"><a href="#å’Œç±»å‹-gt-å¤šé€‰ä¸€ç±»å‹-amp-å˜ä½“ç±»å‹" class="headerlink" title="å’Œç±»å‹ -&gt; å¤šé€‰ä¸€ç±»å‹ &amp; å˜ä½“ç±»å‹"></a>å’Œç±»å‹ -&gt; å¤šé€‰ä¸€ç±»å‹ &amp; å˜ä½“ç±»å‹</h4><blockquote>
<p>TS æä¾›çš„ <code>|</code> æ“ä½œï¼Œ å‰é¢çš„ <code>Optional</code>, <code>Either</code>, <code>Variant</code></p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AB = A | B <span class="comment">// A.a1 | A.a2 | B.b1 | B.b2, 2 + 2 = 4ç§</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="ç¬¬å››ç« -ç±»å‹å®‰å…¨"><a href="#ç¬¬å››ç« -ç±»å‹å®‰å…¨" class="headerlink" title="ç¬¬å››ç«  - ç±»å‹å®‰å…¨"></a>ç¬¬å››ç«  - ç±»å‹å®‰å…¨</h2><blockquote>
<p>å¦‚æœ2ç§ç±»å‹å…·æœ‰ç›¸åŒå½¢çŠ¶ï¼Œé‚£ä¹ˆTSä¼šè®¤ä¸ºç±»å‹å…¼å®¹ï¼Œå¦‚æœä½¿ç”¨ <code>unique symbol</code> ï¼Œå°±ä¸èƒ½å°†ä¸€ç§éšå¼ç±»å‹è§£é‡Šä¸ºå¦ä¸€ç§ç±»å‹</p>
</blockquote>
<h3 id="é¿å…åŸºæœ¬ç±»å‹åæ‰§æ¥é˜²æ­¢é”™è¯¯è§£é‡Š"><a href="#é¿å…åŸºæœ¬ç±»å‹åæ‰§æ¥é˜²æ­¢é”™è¯¯è§£é‡Š" class="headerlink" title="é¿å…åŸºæœ¬ç±»å‹åæ‰§æ¥é˜²æ­¢é”™è¯¯è§£é‡Š"></a>é¿å…åŸºæœ¬ç±»å‹åæ‰§æ¥é˜²æ­¢é”™è¯¯è§£é‡Š</h3><blockquote>
<p>åŸºæœ¬ç±»å‹åæ‰§åæ¨¡å¼: æŒ‡ä¾èµ–åŸºæœ¬ç±»å‹æ¥è¡¨ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œå› ä¸ºç±»å‹ç³»ç»Ÿæ²¡æœ‰æ˜¾ç¤ºæ•æ‰åˆ°å€¼çš„æ„ä¹‰ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‡ºé”™</p>
</blockquote>
<ol>
<li>ä¸å…¼å®¹ç»„ä»¶</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lbfs(ç£…åŠ›ç§’)ï¼ŒNs(ç‰›é¡¿ç§’)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trajectoryCorrection</span>(<span class="params">momenttum: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (momenttum &lt; <span class="number">2</span> <span class="comment">/* Ns */</span>) &#123;</span><br><span class="line">    disintegrate()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">provideMomenttum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  trajectoryCorrection(<span class="number">1.5</span> <span class="comment">/* lbfs */</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¢åŠ  ç£…åŠ›ç§’ &amp; ç‰›é¡¿ç§’ ç±»å‹</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> NsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Ns &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: <span class="built_in">number</span>;</span><br><span class="line">  [NsType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> LbfsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Lbfs &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: <span class="built_in">number</span>;</span><br><span class="line">  [LbfsType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è½¬åŒ–å•ä½ï¼šä» lbfs =&gt; Ns</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lbfsToNs</span>(<span class="params">lbfs: Lbfs</span>): <span class="title">Ns</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Ns(lbfs.value * <span class="number">4.448222</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trajectoryCorrection</span>(<span class="params">momenttum: Ns</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (momenttum &lt; <span class="keyword">new</span> Ns(<span class="number">2</span>) <span class="comment">/* Ns */</span>) &#123;</span><br><span class="line">    disintegrate()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">provideMomenttum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  trajectoryCorrection(lbfsToNs(<span class="keyword">new</span> Lbfs(<span class="number">1.5</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®æ–½çº¦æŸ"><a href="#å®æ–½çº¦æŸ" class="headerlink" title="å®æ–½çº¦æŸ"></a>å®æ–½çº¦æŸ</h3><h4 id="ä½¿ç”¨æ„é€ å‡½æ•°å®æ–½çº¦æŸ"><a href="#ä½¿ç”¨æ„é€ å‡½æ•°å®æ–½çº¦æŸ" class="headerlink" title="ä½¿ç”¨æ„é€ å‡½æ•°å®æ–½çº¦æŸ"></a>ä½¿ç”¨æ„é€ å‡½æ•°å®æ–½çº¦æŸ</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> celsiusType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Celsius &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: <span class="built_in">number</span>;</span><br><span class="line">  [celsiusType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value &lt; <span class="number">-273.15</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(); <span class="comment">// è¯•å›¾åˆ›å»ºä¸€ä¸ªæ— æ•ˆçš„æ¸©åº¦ï¼Œæ„é€ å‡½æ•°ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="comment">// æˆ–è€…ï¼šå¼ºåˆ¶ä¿®æ”¹æ— æ•ˆå€¼</span></span><br><span class="line">    <span class="comment">// if (value &lt; -273.15) value = -273.15;</span></span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨å·¥å‚å®æ–½çº¦æŸ"><a href="#ä½¿ç”¨å·¥å‚å®æ–½çº¦æŸ" class="headerlink" title="ä½¿ç”¨å·¥å‚å®æ–½çº¦æŸ"></a>ä½¿ç”¨å·¥å‚å®æ–½çº¦æŸ</h4><p>ä¸æƒ³æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯å¸Œæœ›è¿”å› <code>undefined</code> æˆ–è€…å…¶ä»–æŸä¸ªä¸æ˜¯æ¸©åº¦è€Œæ˜¯è¡¨ç¤ºå¤±è´¥çš„å€¼ä»¥åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆçš„å®ä¾‹æ—¶ï¼Œä½¿ç”¨å·¥å‚å‡½æ•°ï¼›å¦‚æœæ„é€ å‡½æ•°å’ŒéªŒè¯å¯¹è±¡çš„é€»è¾‘å¾ˆå¤æ‚ï¼Œåˆ™åº”è¯¥åœ¨å¤–éƒ¨å®ç°é€»è¾‘æ›´åŠ åˆç†ï¼Œæ„é€ å‡½æ•°ä¸åº”è¯¥åšå¤ªå¤æ‚çš„å·¥ä½œï¼Œè€Œåº”è¯¥åªåšåˆå§‹åŒ–å¯¹è±¡ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> celsiusType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Celsius &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: <span class="built_in">number</span>;</span><br><span class="line">  [celsiusType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// private å£°æ˜æ„é€ å‡½æ•°ï¼Œåªæœ‰å·¥å‚å‡½æ•°æ‰èƒ½è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> makeCelsius(value: <span class="built_in">number</span>): Celsius | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value &lt; <span class="number">-273.15</span>) <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Celsius(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜ï¼šå®ç°ä¸€ä¸ª-Percentage-ç±»å‹æ¥è¡¨ç¤º-0ï½100ä¹‹é—´çš„å€¼ï¼Œå°äº-0-ç½®0ï¼Œå¤§äº-100-ç½®-100"><a href="#ä¹ é¢˜ï¼šå®ç°ä¸€ä¸ª-Percentage-ç±»å‹æ¥è¡¨ç¤º-0ï½100ä¹‹é—´çš„å€¼ï¼Œå°äº-0-ç½®0ï¼Œå¤§äº-100-ç½®-100" class="headerlink" title="ä¹ é¢˜ï¼šå®ç°ä¸€ä¸ª Percentage ç±»å‹æ¥è¡¨ç¤º 0ï½100ä¹‹é—´çš„å€¼ï¼Œå°äº 0 ç½®0ï¼Œå¤§äº 100 ç½® 100"></a>ä¹ é¢˜ï¼šå®ç°ä¸€ä¸ª <code>Percentage</code> ç±»å‹æ¥è¡¨ç¤º 0ï½100ä¹‹é—´çš„å€¼ï¼Œå°äº 0 ç½®0ï¼Œå¤§äº 100 ç½® 100</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> percentageType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Percentage &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: <span class="built_in">number</span>;</span><br><span class="line">  [percentageType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// private å£°æ˜æ„é€ å‡½æ•°ï¼Œåªæœ‰å·¥å‚å‡½æ•°æ‰èƒ½è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> makePercentage(value: <span class="built_in">number</span>): Percentage | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value &lt; <span class="number">0</span>) value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (value &gt; <span class="number">100</span>) value = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Percentage(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="æ·»åŠ ç±»å‹ä¿¡æ¯"><a href="#æ·»åŠ ç±»å‹ä¿¡æ¯" class="headerlink" title="æ·»åŠ ç±»å‹ä¿¡æ¯"></a>æ·»åŠ ç±»å‹ä¿¡æ¯</h3><h4 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»å‹å¼ºåˆ¶è½¬æ¢å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯</span></span><br><span class="line"><span class="keyword">class</span> Bike &#123;</span><br><span class="line">  ride(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> SportsCar &#123;</span><br><span class="line">  drive(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> myBike: Bike = <span class="keyword">new</span> Bike()</span><br><span class="line">Bike.ride()</span><br><span class="line"><span class="comment">// å…ˆæŠŠ myBike è½¬æˆ unknown å†è½¬æˆ SportsCar</span></span><br><span class="line"><span class="keyword">let</span> myPretendSportsCar: SportsCar = &lt;SportsCar&gt;&lt;unknown&gt;myBike;</span><br><span class="line"><span class="comment">// æˆ–è€…å†™æˆï¼š</span></span><br><span class="line"><span class="comment">// let myPretendSportsCar: SportsCar = myBike as unknown as SportsCar;</span></span><br><span class="line">myPretendSportsCar.drive() <span class="comment">// è¿è¡Œæ—¶é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<h4 id="å¸¸è§ç±»å‹è½¬æ¢"><a href="#å¸¸è§ç±»å‹è½¬æ¢" class="headerlink" title="å¸¸è§ç±»å‹è½¬æ¢"></a>å¸¸è§ç±»å‹è½¬æ¢</h4><ol>
<li>å‘ä¸Šè½¬æ¢ - è¿™ä¸ªæ˜¯å®‰å…¨çš„ï¼šå°†æ´¾ç”Ÿç±»å‹çš„å¯¹è±¡è§£é‡Šä¸ºåŸºç±»å‹ï¼Œå¯è‡ªåŠ¨<em>éšå¼è½¬æ¢</em></li>
<li>å‘ä¸‹è½¬æ¢ - è¿™ä¸ªä¸æ˜¯å®‰å…¨çš„ï¼šå°†åŸºç±»å‹è½¬åŒ–æˆæ´¾ç”Ÿç±»å‹ï¼Œä¸ä¼šè‡ªåŠ¨å®Œæˆå‘ä¸‹è½¬æ¢ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•è‡ªåŠ¨ç¡®å®šæŸä¸ªå€¼æ˜¯å¤šä¸ªæ´¾ç”Ÿç±»çš„å“ªä¸€ä¸ªã€‚</li>
<li>æ‹“å®½è½¬æ¢ï¼šä¸€ç§å¸¸è§çš„<em>éšå¼è½¬æ¢</em>-ä»å›ºå®šä½æ•°çš„æ•´æ•°ç±»å‹ï¼ˆ8ä½æ— ç¬¦å·æ•´æ•°ï¼‰è½¬æ¢ä¸ºå¦ä¸€ä¸ªä½æ•°æ›´å¤šçš„æ•´æ•°ç±»å‹ï¼ˆ16ä½æ— ç¬¦å·æ•´æ•°ï¼‰ã€‚</li>
<li>ç¼©çª„è½¬æ¢ï¼šä½æ•°æ›´å¤šçš„æ•´æ•°è½¬æ¢æˆä½æ•°æ›´å°‘çš„æ— ç¬¦å·æ•´æ•°ï¼Œåªèƒ½ç”¨å°ç±»å‹å¯ä»¥è¡¨ç¤ºçš„å€¼ã€‚**<em>å¿…é¡»æ˜¾ç¤ºæŒ‡å®šè¿™ç§è½¬æ¢**</em></li>
</ol>
<h3 id="éšè—å’Œæ¢å¤ç±»å‹ä¿¡æ¯"><a href="#éšè—å’Œæ¢å¤ç±»å‹ä¿¡æ¯" class="headerlink" title="éšè—å’Œæ¢å¤ç±»å‹ä¿¡æ¯"></a>éšè—å’Œæ¢å¤ç±»å‹ä¿¡æ¯</h3><ol>
<li>åŒæ„é›†åˆï¼šåŒ…å«ç›¸åŒç±»å‹é¡¹çš„é›†åˆ</li>
<li>å¼‚æ„é›†åˆï¼šåŒ…å«ä¸åŒç±»å‹é¡¹çš„é›†åˆ</li>
</ol>
<h4 id="å¼‚æ„é›†åˆ"><a href="#å¼‚æ„é›†åˆ" class="headerlink" title="å¼‚æ„é›†åˆ"></a>å¼‚æ„é›†åˆ</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å±‚æ¬¡ç»“æ„</span></span><br><span class="line"><span class="keyword">interface</span> IDocItem &#123;</span><br><span class="line">  <span class="comment">/* æ®µè½ï¼Œå›¾ç‰‡å’Œè¡¨æ ¼ å…¬å…±éƒ¨åˆ† */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Paragraph <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">    <span class="comment">/* æ®µè½ç‹¬æœ‰éƒ¨åˆ† */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Picture <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">    <span class="comment">/* å›¾ç‰‡ç‹¬æœ‰éƒ¨åˆ† */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Table <span class="keyword">implements</span> IDocItem &#123;</span><br><span class="line">    <span class="comment">/* è¡¨æ ¼ç‹¬æœ‰éƒ¨åˆ† */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> MyDoc &#123;</span><br><span class="line">  items: IDocItem[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å’Œç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> Paragraph &#123;</span><br><span class="line">    <span class="comment">/* æ®µè½ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Picture &#123;</span><br><span class="line">    <span class="comment">/* å›¾ç‰‡ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Table &#123;</span><br><span class="line">    <span class="comment">/* è¡¨æ ¼ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> MyDoc1 &#123;</span><br><span class="line">  items: (Paragraph | Picture | Table)[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// unknown ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> MyDoc2 &#123;</span><br><span class="line">  items: unknown[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¼‚æ„ç±»å‹ä¼˜ç¼ºç‚¹"><a href="#å¼‚æ„ç±»å‹ä¼˜ç¼ºç‚¹" class="headerlink" title="å¼‚æ„ç±»å‹ä¼˜ç¼ºç‚¹"></a>å¼‚æ„ç±»å‹ä¼˜ç¼ºç‚¹</h4><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>å±‚æ¬¡ç»“æ„</td>
<td>èƒ½å¤Ÿè½»æ¾åœ°ä½¿ç”¨åŸºç¡€ç±»å‹çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•ï¼Œä¸éœ€è¦è½¬æ¢</td>
<td>é›†åˆä¸­çš„ç±»å‹å¿…é¡»é€šè¿‡åŸºç¡€ç±»å‹æˆ–è€…å®ç°çš„æ¥å£å½¼æ­¤ç›¸å…³</td>
</tr>
<tr>
<td>å’Œç±»å‹</td>
<td>ä¸è¦æ±‚ç±»å‹å½¼æ­¤ç›¸å…³</td>
<td>å¦‚æœæ²¡æœ‰ <code>Variant</code> çš„ <code>visit()</code>, å°±éœ€è¦è½¬æ¢ä¸ºå®é™…çš„ç±»å‹æ¥é©±åŠ¨</td>
</tr>
<tr>
<td>unknownç±»å‹</td>
<td>å¯ä»¥å­˜å‚¨ä»»ä½•å†…å®¹</td>
<td>éœ€è¦è·Ÿè¸ªå®é™…ç±»å‹å¹¶è½¬æ¢ä¸ºå¯¹åº”çš„ç±»å‹æ‰èƒ½ä½¿ç”¨</td>
</tr>
</tbody></table>
<h4 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h4><blockquote>
<p>JSON.stringify() &amp; JSON.parse()</p>
</blockquote>
<ol>
<li>åºåˆ—åŒ–åŠè·Ÿè¸ªç±»å‹</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Cat &#123;</span><br><span class="line">  meow() &#123; <span class="comment">/* how about bark ? */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Dog &#123;</span><br><span class="line">  bark() &#123; <span class="comment">/* how about meow ? */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serializeCat</span>(<span class="params">cat: Cat</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;c&#x27;</span> + <span class="built_in">JSON</span>.stringify(cat)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serializeDog</span>(<span class="params">dog: Dog</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;d&#x27;</span> + <span class="built_in">JSON</span>.stringify(dog)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tryDeserializeCat</span>(<span class="params"><span class="keyword">from</span>: <span class="built_in">string</span></span>): <span class="title">Cat</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">from</span>[<span class="number">0</span>] !== <span class="string">&#x27;c&#x27;</span>) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">return</span> &lt;Cat&gt;<span class="built_in">Object</span>.assign(<span class="keyword">new</span> Cat(), <span class="built_in">JSON</span>.parse(<span class="keyword">from</span> .substr(<span class="number">1</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¸¦æœ‰è·Ÿè¸ªç±»å‹çš„ååºåˆ—åŒ–</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catString: <span class="built_in">string</span> = serializeCat(<span class="keyword">new</span> Cat())</span><br><span class="line"><span class="keyword">let</span> dogString: <span class="built_in">string</span> = serializeDog(<span class="keyword">new</span> Dog())</span><br><span class="line"><span class="keyword">let</span> maybeCat: Cat | <span class="literal">undefined</span> = tryDeserializeCat(catString)</span><br><span class="line"><span class="keyword">if</span> (maybeCat) &#123;</span><br><span class="line">  <span class="keyword">let</span> cat: Cat = &lt;Cat&gt;maybeCat</span><br><span class="line">  cat.meow()</span><br><span class="line">&#125;</span><br><span class="line">maybeCat = tryDeserializeCat(dogString) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬äº”ç« -å‡½æ•°ç±»å‹"><a href="#ç¬¬äº”ç« -å‡½æ•°ç±»å‹" class="headerlink" title="ç¬¬äº”ç«  - å‡½æ•°ç±»å‹"></a>ç¬¬äº”ç«  - å‡½æ•°ç±»å‹</h2><h3 id="ä¸€ä¸ªç®€å•çš„ç­–ç•¥æ¨¡å¼"><a href="#ä¸€ä¸ªç®€å•çš„ç­–ç•¥æ¨¡å¼" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç­–ç•¥æ¨¡å¼"></a>ä¸€ä¸ªç®€å•çš„ç­–ç•¥æ¨¡å¼</h3><blockquote>
<p>ä¸€ç­‰å‡½æ•°ï¼šå½“è¯­è¨€çœ‹å¾…å‡½æ•°çš„æ–¹å¼ä¸çœ‹å¾…å…¶ä»–ä»»ä½•å€¼ç›¸åŒæ—¶ï¼Œåˆ™è¯¥è¯­è¨€æ”¯æŒä¸€ç­‰å‡½æ•°ã€‚</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Car &#123;</span><br><span class="line">  <span class="comment">// Represents a car</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> WashingStrategy = <span class="function">(<span class="params">car: Car</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">standardWash</span>(<span class="params">car: Car</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// perform standard wash</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">premiumWash</span>(<span class="params">car: Car</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// perform premium wash</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> CarWash &#123;</span><br><span class="line">  service(car: Car, premium: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> washStrategy: WashingStrategy</span><br><span class="line">    <span class="keyword">if</span> (premium) &#123;</span><br><span class="line">      washStrategy = premiumWash</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      washStrategy = standardWash</span><br><span class="line">    &#125;</span><br><span class="line">    washStrategy(car)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ä½¿ç”¨-switch-è¯­å¥çš„çŠ¶æ€æœº"><a href="#ä¸ä½¿ç”¨-switch-è¯­å¥çš„çŠ¶æ€æœº" class="headerlink" title="ä¸ä½¿ç”¨ switch è¯­å¥çš„çŠ¶æ€æœº"></a>ä¸ä½¿ç”¨ switch è¯­å¥çš„çŠ¶æ€æœº</h3><ol>
<li>å°†çŠ¶æ€é›†åˆå®šä¹‰ä¸ºä¸€ä¸ªæšä¸¾ï¼Œè·Ÿè¸ªå½“å‰çš„çŠ¶æ€</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼šçŠ¶æ€å’Œç›¸åº”çš„é€»è¾‘æ²¡æœ‰è”ç³»åœ¨ä¸€èµ·ï¼ŒåŒæ—¶è¿˜éœ€è¦å•ç‹¬ç»´æŠ¤æšä¸¾å’Œcaseï¼Œä¼šæœ‰å€¼å’Œé€»è¾‘ä¸åŒæ­¥çš„é£é™©</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çŠ¶æ€æœºç”¨ä¸€ä¸ªæšä¸¾è¡¨ç¤º</span></span><br><span class="line"><span class="built_in">enum</span> TextProcessingMode &#123;</span><br><span class="line">  Text,</span><br><span class="line">  Marker,</span><br><span class="line">  Code</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> TextProcessor &#123;</span><br><span class="line">  <span class="keyword">private</span> mode: TextProcessingMode = TextProcessingMode.Text;</span><br><span class="line">  <span class="keyword">private</span> result: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">private</span> codeSample: <span class="built_in">string</span>[] = [];</span><br><span class="line">  processText(lines: <span class="built_in">string</span>[]): <span class="built_in">string</span>[] &#123;</span><br><span class="line">    <span class="built_in">this</span>.result = []</span><br><span class="line">    <span class="built_in">this</span>.mode = TextProcessingMode.Text</span><br><span class="line">    <span class="comment">// å¤„ç†æ–‡æœ¬æ–‡æ¡£æ„å‘³ç€å¤„ç†æ¯è¡Œæ–‡æœ¬ï¼Œå¹¶è¿”å›ç»“æœå­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> line <span class="keyword">of</span> lines) &#123;</span><br><span class="line">      <span class="built_in">this</span>.processLine(line)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(<span class="built_in">this</span>.mode) &#123;</span><br><span class="line">      <span class="keyword">case</span> TextProcessingMode.Text:</span><br><span class="line">        <span class="built_in">this</span>.processTextLine(line);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> TextProcessingMode.Marker:</span><br><span class="line">        <span class="built_in">this</span>.processMarkerLine(line);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> TextProcessingMode.Code:</span><br><span class="line">        <span class="built_in">this</span>.processCodeLine(line)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¤„ç†ä¸€è¡Œæ–‡æœ¬ï¼Œå¦‚æœæœ¬è¡Œä»¥ `&lt;!--`å¼€å¤´ï¼Œåˆ™åŠ è½½ä»£ç ç¤ºä¾‹ï¼Œå¹¶è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€</span></span><br><span class="line">  <span class="keyword">private</span> processTextLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.result.push(line)</span><br><span class="line">    <span class="keyword">if</span> (line.startsWith(<span class="string">&#x27;&lt;!--&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.loadCodeSample(line);</span><br><span class="line">      <span class="built_in">this</span>.mode = TextProcessingMode.Marker</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processMarkerLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.result.push(line)</span><br><span class="line">    <span class="keyword">if</span> (line.startsWith(<span class="string">&#x27;```ts&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.result = <span class="built_in">this</span>.result.concat(<span class="built_in">this</span>.codeSample)</span><br><span class="line">      <span class="built_in">this</span>.mode = TextProcessingMode.code</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processCodeLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (line.startsWith(<span class="string">&#x27;```&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.result.push(line)</span><br><span class="line">      <span class="built_in">this</span>.mode = TextProcessingMode.Text</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> loadCodeSample(line: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="comment">// load sample based on marker, store in this codeSample</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¦ä¸€ç§å®Œå…¨ç”±å‡½æ•°å®ç°çš„çŠ¶æ€æœºï¼Œä¸éœ€è¦åœ¨å†…éƒ¨è·Ÿè¸ªçŠ¶æ€ä¹Ÿä¸éœ€è¦æšä¸¾</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼š1. éœ€è¦ä¸ºæ¯ç§çŠ¶æ€å…³è”æ›´å¤šä¿¡æ¯ï¼›2. å¯èƒ½æ›´éœ€è¦æ˜¾ç¤ºå£°æ˜çš„çŠ¶æ€å’Œè½¬ç§»</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> TextProcessor &#123;</span><br><span class="line">  <span class="keyword">private</span> result: <span class="built_in">string</span>[] = []</span><br><span class="line">  <span class="keyword">private</span> processLine: <span class="function">(<span class="params">line: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span> = <span class="built_in">this</span>.processTextLine</span><br><span class="line">  <span class="keyword">private</span> codeSample: <span class="built_in">string</span>[] = []</span><br><span class="line">  processText(lines: <span class="built_in">string</span>[]): <span class="built_in">string</span>[] &#123;</span><br><span class="line">    <span class="built_in">this</span>.result = []</span><br><span class="line">    <span class="built_in">this</span>.processLine = <span class="built_in">this</span>.processTextLine</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> line <span class="keyword">of</span> lines) &#123;</span><br><span class="line">      <span class="built_in">this</span>.processLine(line)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processTextLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.result.push(line)</span><br><span class="line">    <span class="keyword">if</span>(line.startsWith(<span class="string">&#x27;&lt;!--&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.loadCodeSample(line)</span><br><span class="line">      <span class="built_in">this</span>.processLine = <span class="built_in">this</span>.processMarkerLine; <span class="comment">// é€šè¿‡æŠŠ this.processLineæ›´æ–°ä¸ºåˆé€‚çš„æ–¹æ³•æ¥å®ç°çŠ¶æ€è½¬ç§»ï¼šä¸€ç§ç­–ç•¥æ¨¡å¼ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processMarkerLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.result.push(line)</span><br><span class="line">    <span class="keyword">if</span>(line.startsWith(<span class="string">&#x27;```ts&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.processLine = <span class="built_in">this</span>.processCodeLine; <span class="comment">// é€šè¿‡æŠŠ this.processLineæ›´æ–°ä¸ºåˆé€‚çš„æ–¹æ³•æ¥å®ç°çŠ¶æ€è½¬ç§»ï¼šä¸€ç§ç­–ç•¥æ¨¡å¼ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> processCodeLine(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(line.startsWith(<span class="string">&#x27;```ts&#x27;</span>)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.result.push(line)</span><br><span class="line">      <span class="built_in">this</span>.processLine = <span class="built_in">this</span>.processTextLine; <span class="comment">// é€šè¿‡æŠŠ this.processLineæ›´æ–°ä¸ºåˆé€‚çš„æ–¹æ³•æ¥å®ç°çŠ¶æ€è½¬ç§»ï¼šä¸€ç§ç­–ç•¥æ¨¡å¼ï¼Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> loadCodeSample(line: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="comment">// load sample based on marker, store in this codeSample</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨å’Œç±»å‹çš„çŠ¶æ€æœº</li>
</ol>
<blockquote>
<p>ç¼ºç‚¹ï¼šä»£ç é‡è¾ƒå¤š</p>
</blockquote>
<h4 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ä¸€ä¸ªå…·æœ‰open, close2ç§çŠ¶æ€ç®€å•è¿æ¥ä¸ºä¸€ä¸ªçŠ¶æ€æœºï¼Œä½¿ç”¨ connect æ‰“å¼€ï¼Œä½¿ç”¨ disconnectå…³é—­</span></span><br><span class="line"><span class="built_in">enum</span> State &#123;</span><br><span class="line">  open = <span class="string">&#x27;OPEN&#x27;</span>,</span><br><span class="line">  closed = <span class="string">&#x27;CLOSED&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Connection &#123;</span><br><span class="line">  <span class="keyword">private</span> state: <span class="built_in">string</span> = State.open</span><br><span class="line">  <span class="keyword">private</span> processState: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="built_in">this</span>.connect</span><br><span class="line">  <span class="keyword">private</span> connect() &#123;</span><br><span class="line">    <span class="built_in">this</span>.state = State.open</span><br><span class="line">    <span class="built_in">this</span>.processState = <span class="built_in">this</span>.disconnect</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> disconnect() &#123;</span><br><span class="line">    <span class="built_in">this</span>.state = State.closed</span><br><span class="line">    <span class="built_in">this</span>.processState = <span class="built_in">this</span>.connect</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. ä½¿ç”¨ processæ–¹æ³•å°†å‰é¢çš„è¿æ¥å®ç°ä¸ºä¸€ä¸ªå‡½æ•°çŠ¶æ€æœºï¼Œprocess å‡½æ•°æ‰­è½¬çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">read</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="keyword">class</span> Connection &#123;</span><br><span class="line">  <span class="keyword">private</span> processState: <span class="function">() =&gt;</span> <span class="built_in">void</span> = <span class="built_in">this</span>.disconnect</span><br><span class="line">  <span class="keyword">public</span> process() &#123;</span><br><span class="line">    <span class="built_in">this</span>.processState()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> connect() &#123;</span><br><span class="line">    <span class="keyword">const</span> value: <span class="built_in">string</span> = read()</span><br><span class="line">    <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">      <span class="built_in">this</span>.processState = <span class="built_in">this</span>.disconnect</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.processState = <span class="built_in">this</span>.disconnect</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> disconnect() &#123;</span><br><span class="line">    <span class="built_in">this</span>.processState = <span class="built_in">this</span>.connect</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å»¶è¿Ÿå€¼é¿å…é«˜å¼€é”€çš„è®¡ç®—"><a href="#ä½¿ç”¨å»¶è¿Ÿå€¼é¿å…é«˜å¼€é”€çš„è®¡ç®—" class="headerlink" title="ä½¿ç”¨å»¶è¿Ÿå€¼é¿å…é«˜å¼€é”€çš„è®¡ç®—"></a>ä½¿ç”¨å»¶è¿Ÿå€¼é¿å…é«˜å¼€é”€çš„è®¡ç®—</h3><ol>
<li>ç«‹å³åˆ›å»º</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Bike &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Car &#123;&#125; <span class="comment">// å‡è®¾åˆ›å»º Car å¼€é”€è¾ƒå¤§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chooseMyRide</span>(<span class="params">bike: Bike, car: Car</span>) <span class="title">Car</span> | <span class="title">Bike</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isItRaining()) &#123;</span><br><span class="line">    <span class="keyword">return</span> car</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bike</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨æ—¶å°±åˆ›å»ºCar</span></span><br><span class="line">chososeMyRide(<span class="keyword">new</span> Bike(), <span class="keyword">new</span> Car())</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å»¶è¿Ÿç”Ÿæˆ car</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Bike &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Car &#123;&#125; <span class="comment">// å‡è®¾åˆ›å»º Car å¼€é”€è¾ƒå¤§</span></span><br><span class="line"><span class="comment">// å‚æ•°æ”¹ä¸ºä¸€ä¸ªè¿”å› Car çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chooseMyRide</span>(<span class="params">bike: Bike, car: () =&gt; Car</span>) <span class="title">Car</span> | <span class="title">Bike</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isItRaining()) &#123;</span><br><span class="line">    <span class="keyword">return</span> car()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bike</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeCar</span>(<span class="params"></span>): <span class="title">Car</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Car()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨æ—¶å°±åˆ›å»ºCar</span></span><br><span class="line">chososeMyRide(<span class="keyword">new</span> Bike(), makeCar)</span><br></pre></td></tr></table></figure>

<h4 id="lambda-åŒ¿åå‡½æ•°"><a href="#lambda-åŒ¿åå‡½æ•°" class="headerlink" title="lambda åŒ¿åå‡½æ•°"></a>lambda åŒ¿åå‡½æ•°</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">class</span> Bike &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Car &#123;&#125; <span class="comment">// å‡è®¾åˆ›å»º Car å¼€é”€è¾ƒå¤§</span></span><br><span class="line"><span class="comment">// å‚æ•°æ”¹ä¸ºä¸€ä¸ªè¿”å› Car çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chooseMyRide</span>(<span class="params">bike: Bike, car: () =&gt; Car</span>) <span class="title">Car</span> | <span class="title">Bike</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isItRaining()) &#123;</span><br><span class="line">    <span class="keyword">return</span> car()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> bike</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨æ—¶å°±åˆ›å»ºCar</span></span><br><span class="line">chososeMyRide(<span class="keyword">new</span> Bike(), <span class="function">() =&gt;</span> <span class="keyword">new</span> Car())</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨-map-filter-reduce"><a href="#ä½¿ç”¨-map-filter-reduce" class="headerlink" title="ä½¿ç”¨ map,filter,reduce"></a>ä½¿ç”¨ map,filter,reduce</h3><h4 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h4><p>å¯¹æ¯ä¸ªå€¼è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»“æœé›†åˆ</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåˆ¶ map()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">items: T[], func: (item: T) =&gt; U</span>) : <span class="title">U</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: U[] = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    result.push(func(item))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h4><p>ä¸¢å¼ƒæŸäº›å…ƒç´ ï¼Œæ¥å—ä¸€ä¸ªå®å‚å¹¶è¿”å›ä¸€ä¸ª <code>boolean</code> çš„å‡½æ•°ä¹Ÿç§°ä¸º <code>è°“è¯</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåˆ¶ filter()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>&lt;<span class="title">T</span>&gt;(<span class="params">items: T[], pred: (item: T) =&gt; <span class="built_in">boolean</span></span>): <span class="title">T</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: T[] = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(item)) &#123;</span><br><span class="line">      result.push(item)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h4><p>å°†æ‰€æœ‰é›†åˆé¡¹åˆå¹¶ä¸ºä¸€ä¸ªå€¼</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåˆ¶ reduce()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce</span>&lt;<span class="title">T</span>&gt;(<span class="params">items: T[], op: (x: T, y: T) =&gt; T, init: T</span>):<span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: T = init</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    result = op(result, item)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¹ºåŠç¾¤"><a href="#å¹ºåŠç¾¤" class="headerlink" title="å¹ºåŠç¾¤"></a>å¹ºåŠç¾¤</h4><p>æŠ½è±¡ä»£æ•°å¤„ç†é›†åˆä»¥åŠé›†åˆä¸Šçš„æ“ä½œã€‚ å¦‚æœç±»å‹ <code>T</code> çš„ä¸€ä¸ªæ“ä½œæ¥å— 2ä¸ª <code>T</code> ä½œä¸ºå®å‚ï¼Œå¹¶è¿”å›å¦ä¸€ä¸ª <code>T</code>ï¼Œ å³ <code>(T, T) =&gt; T</code>ï¼Œåˆ™å¯ä»¥æŠŠè¯¥æ“ä½œè§£é‡Šä¸º <code>T</code> å€¼é›†åˆä¸Šçš„ä¸€ä¸ªæ“ä½œã€‚ä¾‹å¦‚ï¼š<code>number é›†åˆ +</code>ï¼Œå³ <code>(x, y) =&gt; x + y</code>, å°±æ„æˆäº†ä¸€ä¸ªä»£æ•°ç»“æ„ã€‚<br>ç›¸å…³æ€§ï¼šè¡¨æ˜å¯¹å…ƒç´ åºåˆ—åº”ç”¨æ“ä½œçš„é¡ºåºå¹¶ä¸é‡è¦ï¼Œå› ä¸ºæœ€ç»ˆç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚</p>
<blockquote>
<p>å¦‚æœé›†åˆ <code>T</code> ä¸Šçš„æ“ä½œæœ‰ä¸€ä¸ªæ“ä½œå…ƒï¼Œå¹¶ä¸”å…·æœ‰ç›¸å…³æ€§ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ä»£æ•°ç»“æ„ç§°ä¸º å¹ºåŠç¾¤</p>
</blockquote>
<h4 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°ä¸€ä¸ª first å‡½æ•°ï¼Œè¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ»¡è¶³ è°“è¯çš„å…ƒç´ ï¼Œå¦‚æœæ•°ç»„ä¸ºç©ºï¼Œåˆ™è¿”å›undefined, åŠŸèƒ½ä¸ find ç›¸ä¼¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>&lt;<span class="title">T</span>&gt;(<span class="params">items: T[], pred: (item: T) =&gt; <span class="built_in">boolean</span></span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!items || items.length) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(item)) &#123;</span><br><span class="line">      <span class="keyword">return</span> item</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// all&lt;T&gt;(items: T[], pred: (item: T) =&gt; boolean): boolean</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">all</span>&lt;<span class="title">T</span>&gt;(<span class="params">items: T[], pred: (item: T) =&gt; <span class="built_in">boolean</span></span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!items || items.length) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!pred(item)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬å…­ç« -å‡½æ•°ç±»å‹çš„é«˜çº§åº”ç”¨"><a href="#ç¬¬å…­ç« -å‡½æ•°ç±»å‹çš„é«˜çº§åº”ç”¨" class="headerlink" title="ç¬¬å…­ç«  - å‡½æ•°ç±»å‹çš„é«˜çº§åº”ç”¨"></a>ç¬¬å…­ç«  - å‡½æ•°ç±»å‹çš„é«˜çº§åº”ç”¨</h2><h3 id="ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨æ¨¡å¼"><a href="#ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨æ¨¡å¼"></a>ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨æ¨¡å¼</h3><p>å¯æ‰©å±•å¯¹è±¡çš„ <code>è¡Œä¸º</code>ï¼Œè€Œä¸å¿…ä¿®æ”¹å¯¹è±¡çš„ç±»</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Widget &#123;&#125;</span><br><span class="line"><span class="comment">// æ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> IWidgetFactory &#123;</span><br><span class="line">  makeWidget(): Widget;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°æ¥å£</span></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è·å–å¤šä¸ªå®ä¾‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ WidgetFactory</span></span><br><span class="line"><span class="keyword">class</span> WidgetFactory <span class="keyword">implements</span> IWidgetFactory &#123;</span><br><span class="line">  <span class="keyword">public</span> makeWidget(): Widget &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Widget() <span class="comment">// WidgetFactory åªæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ Widget</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è£…é¥°å™¨ï¼Œè´Ÿè´£å•ä¾‹è¡Œä¸º</span></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è·å–å•ä¸ªå®ä¾‹ï¼Œä½¿ç”¨SingletonDecorator</span></span><br><span class="line"><span class="keyword">class</span> SingletonDecorator <span class="keyword">implements</span> IWidgetFactory &#123;</span><br><span class="line">  <span class="keyword">private</span> factory: IWidgetFactory</span><br><span class="line">  <span class="keyword">private</span> instance: Widget | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">factory: IWidgetFactory</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.factory = factory</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> makeWidget(): Widget &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">      <span class="built_in">this</span>.instance = <span class="built_in">this</span>.factory.makeWidget() <span class="comment">// makeWidget() å®ç°äº†å•ä¾‹é€»è¾‘ï¼Œå¹¶ç¡®ä¿åªä¼šåˆ›å»ºä¸€ä¸ª Widget</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å‡½æ•°è£…é¥°å™¨"><a href="#å‡½æ•°è£…é¥°å™¨" class="headerlink" title="å‡½æ•°è£…é¥°å™¨"></a>å‡½æ•°è£…é¥°å™¨</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Widget &#123;&#125;</span><br><span class="line"><span class="keyword">type</span> WidgetFactory = <span class="function">() =&gt;</span> Widget;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeWidget</span>(<span class="params"></span>): <span class="title">Widget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Widget()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singletonDecorator</span>(<span class="params">factory: WidgetFactory</span>): <span class="title">WidgetFactory</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance: Widget | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="comment">// singletonDecorator() è¿”å›ä¸€ä¸ª lambda, è¯¥ lambda å®ç°äº†å•ä¾‹è¡Œä¸ºï¼Œå¹¶ä½¿ç”¨ç»™å®šå·¥å‚åˆ›å»ºä¸€ä¸ª Widget</span></span><br><span class="line">  <span class="keyword">return</span> (): <span class="function"><span class="params">Widget</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!instance ) &#123;</span><br><span class="line">      instance = factory()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">use10Widgets</span>(<span class="params">factory: WidgetFactory</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> widget = factory()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">use10Widgets(singletonDecorator(makeWidget))</span><br></pre></td></tr></table></figure>

<h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><blockquote>
<p><code>lambdaæ•è·</code>ï¼š<code>singletonDecorator()</code> å°½ç®¡è¿”å›ä¸€ä¸ª <code>lambda</code>ï¼Œä½†è¯¥  <code>lambda</code>å¼•ç”¨äº†  <code>factory</code> å®å‚å’Œ <code>instance</code> å˜é‡ï¼Œè€Œè¯¥å¯¹è±¡æ˜¯ <code>singletonDecorator()</code>å‡½æ•°çš„å±€éƒ¨å˜é‡</p>
</blockquote>
<p>æ¯”è¾ƒå¯¹è±¡å’Œé—­åŒ…ï¼š<br>å¯¹è±¡ï¼šå¯¹è±¡ä»£è¡¨ä¸€ç»„æ–¹æ³•çš„æŸä¸ªçŠ¶æ€ï¼›é—­åŒ…ï¼šä»£è¡¨æ•è·åˆ°æŸä¸ªçŠ¶æ€çš„å‡½æ•°</p>
<h4 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Widget &#123;&#125;</span><br><span class="line"><span class="keyword">type</span> WidgetFactory = <span class="function">() =&gt;</span> Widget;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Widget()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingDecorator</span>(<span class="params">factory: WidgetFactory</span>): <span class="title">WidgetFactory</span> </span>&#123;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ª lambda å»¶è¿Ÿè°ƒç”¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Widget created&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> factory()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°ä¸€ä¸ªè®¡æ•°å™¨"><a href="#å®ç°ä¸€ä¸ªè®¡æ•°å™¨" class="headerlink" title="å®ç°ä¸€ä¸ªè®¡æ•°å™¨"></a>å®ç°ä¸€ä¸ªè®¡æ•°å™¨</h3><h4 id="ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è®¡æ•°å™¨"><a href="#ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è®¡æ•°å™¨" class="headerlink" title="ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è®¡æ•°å™¨"></a>ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è®¡æ•°å™¨</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Counter &#123;</span><br><span class="line">  <span class="keyword">private</span> n: <span class="built_in">number</span> = <span class="number">1</span>; <span class="comment">// ç¦æ­¢è¢«å¤–éƒ¨è®¿é—®ä¿®æ”¹</span></span><br><span class="line">  next(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.n++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨é—­åŒ…å®ç°çš„è®¡æ•°å™¨"><a href="#ä½¿ç”¨é—­åŒ…å®ç°çš„è®¡æ•°å™¨" class="headerlink" title="ä½¿ç”¨é—­åŒ…å®ç°çš„è®¡æ•°å™¨"></a>ä½¿ç”¨é—­åŒ…å®ç°çš„è®¡æ•°å™¨</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Counter = <span class="function">() =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeCounter</span>(<span class="params"></span>): <span class="title">Counter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> n++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¯æ¢å¤çš„è®¡æ•°å™¨"><a href="#å¯æ¢å¤çš„è®¡æ•°å™¨" class="headerlink" title="å¯æ¢å¤çš„è®¡æ•°å™¨"></a>å¯æ¢å¤çš„è®¡æ•°å™¨</h4><blockquote>
<p>è·Ÿè¸ªè‡ªå·±çŠ¶æ€çš„å‡½æ•°ï¼Œè°ƒç”¨æ—¶ï¼Œä¸ä¼šä»å¤´å¼€å§‹è¿è¡Œï¼Œè€Œæ˜¯ä»ä¸Šä¸€æ¬¡è¿”å›æ—¶çš„çŠ¶æ€æ¢å¤æ‰§è¡Œï¼›åœ¨ TS ä¸­ä¸ä½¿ç”¨ <code>return</code> å…³é”®å­—æ¥é€€å‡ºå‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>yield</code>: 2ä¸ªé™åˆ¶ï¼š1. å¿…é¡»å°†å‡½æ•°å£°æ˜ä¸ºä¸€ä¸ªç”Ÿæˆå™¨ï¼› 2. å¹¶ä¸”å…¶è¿”å›ç±»å‹å¿…é¡»æ˜¯å¯å æˆ´çš„è¿­ä»£å™¨ï¼›</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">counter</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> n++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> counter1: IterableIterator&lt;<span class="built_in">number</span>&gt; = counter()</span><br><span class="line">counter1.next()</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-3"><a href="#ä¹ é¢˜-3" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ é—­åŒ…åˆ›å»ºå‡½æ•° è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib1</span>(<span class="params"></span>): (<span class="params"></span>) =&gt; <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> next: <span class="built_in">number</span> = a</span><br><span class="line">    a = b</span><br><span class="line">    b = b + next</span><br><span class="line">    <span class="keyword">return</span> next</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ç”Ÿæˆå™¨åˆ›å»ºå‡½æ•° è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fib2</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> next: <span class="built_in">number</span> = a</span><br><span class="line">    a = b</span><br><span class="line">    b = b + next</span><br><span class="line">    <span class="keyword">return</span> next</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæ—¶é—´é•¿çš„æ“ä½œ"><a href="#å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæ—¶é—´é•¿çš„æ“ä½œ" class="headerlink" title="å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæ—¶é—´é•¿çš„æ“ä½œ"></a>å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæ—¶é—´é•¿çš„æ“ä½œ</h3><h4 id="åŒæ­¥æ‰§è¡Œ"><a href="#åŒæ­¥æ‰§è¡Œ" class="headerlink" title="åŒæ­¥æ‰§è¡Œ"></a>åŒæ­¥æ‰§è¡Œ</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> readlineSync = <span class="built_in">require</span>(<span class="string">&#x27;readline-sync&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> name: <span class="built_in">string</span> = readlineSync.question(<span class="string">&#x27;what is your name&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Hi <span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">weather</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> open = <span class="built_in">require</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">  open(<span class="string">&#x27;heeps://weather.com/&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">greet(); <span class="comment">// å…ˆè°ƒç”¨ greet</span></span><br><span class="line">weather(); <span class="comment">// ç­‰å¾… greet æ‰§è¡Œå®Œæ¯•</span></span><br></pre></td></tr></table></figure>

<h4 id="å¼‚æ­¥æ‰§è¡Œï¼šå›è°ƒ"><a href="#å¼‚æ­¥æ‰§è¡Œï¼šå›è°ƒ" class="headerlink" title="å¼‚æ­¥æ‰§è¡Œï¼šå›è°ƒ"></a>å¼‚æ­¥æ‰§è¡Œï¼šå›è°ƒ</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨å¼‚æ­¥ readline</span></span><br><span class="line">  <span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">&#x27;readline&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> rl = readline.createInterface(&#123;</span><br><span class="line">    input: process.stdin,</span><br><span class="line">    output: process.stdout</span><br><span class="line">  &#125;)</span><br><span class="line">  rl.question(<span class="string">&#x27;what is your name&#x27;</span>, <span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hi <span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">    rl.close()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">weather</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> open = <span class="built_in">require</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">  open(<span class="string">&#x27;heeps://weather.com/&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">greet(); <span class="comment">//  rl.question ä¼šç›´æ¥è·³è¿‡å…ˆæ‰§è¡Œ å‰©ä¸‹çš„ åŒæ­¥å‡½æ•° weatherï¼Œç­‰å›è°ƒé€šçŸ¥</span></span><br><span class="line">weather(); <span class="comment">// ä¸å¿…ç­‰å¾… greet æ‰§è¡Œå®Œæ¯•</span></span><br></pre></td></tr></table></figure>

<h4 id="å¼‚æ­¥æ‰§è¡Œæ¨¡å‹"><a href="#å¼‚æ­¥æ‰§è¡Œæ¨¡å‹" class="headerlink" title="å¼‚æ­¥æ‰§è¡Œæ¨¡å‹"></a>å¼‚æ­¥æ‰§è¡Œæ¨¡å‹</h4><ol>
<li>åœ¨äº‹ä»¶å¾ªç¯ä¸­å€’æ•°</li>
</ol>
<blockquote>
<p>ä¼˜ç‚¹ï¼šä¸éœ€è¦åŒæ­¥ï¼›ç¼ºç‚¹ï¼šåœ¨ I/O æ“ä½œç­‰å¾…æ•°æ®æ—¶æ’é˜Ÿæ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯ CPUå¯†é›†æ“ä½œï¼ˆå¤æ‚è®¡ç®—ï¼‰ä»ç„¶ä¼šé€ æˆé˜»å¡ã€‚å› ä¸ºè¿™ç§æ“ä½œæ²¡æœ‰ç­‰å¾…æ•°æ®ï¼Œè€Œæ˜¯éœ€è¦CPUå‘¨æœŸï¼Œå¯¹äºè¿™ç§ä»»åŠ¡çº¿ç¨‹çš„æ•ˆæœæ›´å¥½ã€‚</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AsyncFunction = <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">let</span> queue: AsyncFunction[] = []; <span class="comment">// é˜Ÿåˆ—å°†æ˜¯ä¸€ä¸ªå‡½æ•°æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countDown</span>(<span class="params">counterId: <span class="built_in">string</span>, fro: <span class="built_in">number</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;counterId&#125;</span>: <span class="subst">$&#123;<span class="keyword">from</span>&#125;</span>`</span>)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">from</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    queue.push(<span class="function">() =&gt;</span> countDown(counterId, <span class="keyword">from</span> - <span class="number">1</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">queue.push(<span class="function">() =&gt;</span> countDown(<span class="string">&#x27;counter1&#x27;</span>, <span class="number">4</span>)) <span class="comment">// å¯åŠ¨å€’æ•°1</span></span><br><span class="line">queue.push(<span class="function">() =&gt;</span> countDown(<span class="string">&#x27;counter2&#x27;</span>, <span class="number">4</span>)) <span class="comment">// å¯åŠ¨å€’æ•°2</span></span><br><span class="line"><span class="keyword">while</span>(queue.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> func: AsyncFunction = &lt;AsyncFunction&gt;queue.shift()</span><br><span class="line">  func()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// counter1: 4</span></span><br><span class="line"><span class="comment">// counter2: 2</span></span><br><span class="line"><span class="comment">// counter1: 3</span></span><br><span class="line"><span class="comment">// counter2: 1</span></span><br><span class="line"><span class="comment">// counter1: 2</span></span><br><span class="line"><span class="comment">// counter2: 0</span></span><br><span class="line"><span class="comment">// counter1: 1</span></span><br><span class="line"><span class="comment">// counter1: 0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ç®€å•å¼‚æ­¥ä»£ç "><a href="#ç®€å•å¼‚æ­¥ä»£ç " class="headerlink" title="ç®€å•å¼‚æ­¥ä»£ç "></a>ç®€å•å¼‚æ­¥ä»£ç </h3><p>é“¾å¼å›è°ƒå¾ˆéš¾é˜…è¯»ï¼ŒåµŒå¥—å¤ªæ·±</p>
<h4 id="é“¾æ¥-promise"><a href="#é“¾æ¥-promise" class="headerlink" title="é“¾æ¥ promise"></a>é“¾æ¥ promise</h4><blockquote>
<p>Promise: å°†æ¥æŸä¸ªæ—¶åˆ»å¯ç”¨å€¼çš„ä¸€ä¸ªä»£ç†ã€‚Continuation: åœ¨promiseçš„ç»“æœå¯ç”¨åè°ƒç”¨çš„å‡½æ•°ç§°ä¸º continuation;</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserName</span>(<span class="params"></span>): <span class="title">Promise</span>&lt;<span class="title">string</span>&gt;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserBirthday</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="title">Promise</span>&lt;<span class="title">Date</span>&gt;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserEmail</span>(<span class="params">birthday: <span class="built_in">Date</span></span>): <span class="title">Promise</span>&lt;<span class="title">string</span>&gt;</span>;</span><br><span class="line">getUserName().then(<span class="function">(<span class="params">name: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;name&#125;</span>!`</span>)</span><br><span class="line">  <span class="keyword">return</span> getUserBirthday(name)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">birthday: <span class="built_in">Date</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> today: <span class="built_in">Date</span> = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">if</span> (birthday.getMonth() === today.getMonth() &amp;&amp; birthday.getDay() === today.getDay()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Happy birthday!&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> getUserEmail(birthday)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">emain: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†é‚®ä»¶</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h4><blockquote>
<p><code>async</code> ä¸ä¼šæ”¹å˜å‡½æ•°ç±»å‹ï¼Œåªä¼šå°†ä¸€ä¸ªå‡½æ•°æ ‡è®°æˆå¼‚æ­¥å‡½æ•°ï¼Œå¹¶å…è®¸åœ¨å…¶ä¸­è°ƒç”¨ <code>await</code></p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserData</span>(<span class="params"></span>): <span class="title">Promise</span>&lt;<span class="title">void</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> name: <span class="built_in">string</span> = <span class="keyword">await</span> getUserName();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">  <span class="keyword">let</span> birthday: <span class="built_in">Date</span> = <span class="keyword">await</span> getUserBirthday(name)</span><br><span class="line">  <span class="keyword">const</span> today: <span class="built_in">Date</span> = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">if</span> (birthday.getMonth() === today.getMonth() &amp;&amp; birthday.getDay() === today.getDay()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Happy birthday!&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> email: <span class="built_in">string</span> = getUserEmail(birthday)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  getUserData()</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">  <span class="comment">// å¼‚å¸¸å°†ä» await è°ƒç”¨æŠ›å‡ºï¼Œåœ¨ try/catch è¯­å¥ä¸­æ•è·é”™è¯¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/04/2021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/04/2021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">2021å¹´ç»ˆæ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-04 10:47:05 / ä¿®æ”¹æ—¶é—´ï¼š10:47:22" itemprop="dateCreated datePublished" datetime="2022-01-04T10:47:05+08:00">2022-01-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>äººç±»ä¸€è´¥æ¶‚åœ°</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/04/VScode%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/04/VScode%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" class="post-title-link" itemprop="url">VScodeå¸¸ç”¨å¿«æ·é”®</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-04 10:27:00" itemprop="dateCreated datePublished" datetime="2022-01-04T10:27:00+08:00">2022-01-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/04/React-17-Router-16-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/04/React-17-Router-16-review/" class="post-title-link" itemprop="url">React@17 & Router@16 é¡¹ç›®æ€»ç»“</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-04 10:25:57" itemprop="dateCreated datePublished" datetime="2022-01-04T10:25:57+08:00">2022-01-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-18 17:23:07" itemprop="dateModified" datetime="2022-01-18T17:23:07+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é‡è¡¨å•åŠŸèƒ½é¡¹ç›®"><a href="#é‡è¡¨å•åŠŸèƒ½é¡¹ç›®" class="headerlink" title="é‡è¡¨å•åŠŸèƒ½é¡¹ç›®"></a>é‡è¡¨å•åŠŸèƒ½é¡¹ç›®</h2><p>æ•´ä¸ªé¡¹ç›®80%éƒ½æ˜¯å¡«å†™è¡¨å•ï¼Œä¸€å¼€å§‹æ²¡é˜²å¤‡ï¼Œç”Ÿå†™æ–°å»ºå’Œç¼–è¾‘ï¼Œç—›è‹¦ä¸å ªï¼Œåæ¥ä¸Šäº† antd çš„ Form è¡¨å•ç»„ä»¶å¥½å¤šäº†ï¼Œä½†æ˜¯æ—¶é—´ç´§è¿«æ”¹çš„åˆæ€¥ï¼Œä¸šåŠ¡ä»£ç å˜çš„å¾ˆæ··ä¹±ï¼Œå…ˆè®°å½•ä¸€ä¸‹é‡æ„æ€è·¯</p>
<h3 id="ç¤ºä¾‹ç»„ä»¶ï¼š-1ä¸ªparentç»„ä»¶-3ä¸ªchildç»„ä»¶ï¼Œå…¶ä¸­ï¼ŒæŸä¸ªchildè¿˜åµŒå¥—äº†2å±‚ï¼Œå±‚çº§è¾ƒæ·±"><a href="#ç¤ºä¾‹ç»„ä»¶ï¼š-1ä¸ªparentç»„ä»¶-3ä¸ªchildç»„ä»¶ï¼Œå…¶ä¸­ï¼ŒæŸä¸ªchildè¿˜åµŒå¥—äº†2å±‚ï¼Œå±‚çº§è¾ƒæ·±" class="headerlink" title="ç¤ºä¾‹ç»„ä»¶ï¼š 1ä¸ªparentç»„ä»¶+3ä¸ªchildç»„ä»¶ï¼Œå…¶ä¸­ï¼ŒæŸä¸ªchildè¿˜åµŒå¥—äº†2å±‚ï¼Œå±‚çº§è¾ƒæ·±"></a>ç¤ºä¾‹ç»„ä»¶ï¼š 1ä¸ªparentç»„ä»¶+3ä¸ªchildç»„ä»¶ï¼Œå…¶ä¸­ï¼ŒæŸä¸ªchildè¿˜åµŒå¥—äº†2å±‚ï¼Œå±‚çº§è¾ƒæ·±</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parent.tsx</span></span><br><span class="line"><span class="comment">// childA.tsx</span></span><br><span class="line"><span class="comment">// childB.tsx</span></span><br><span class="line"><span class="comment">// childC.tsx</span></span><br></pre></td></tr></table></figure>

<h4 id="é¡µé¢å¡é¡¿ï¼Œfunction-å‡½æ•°ç»„ä»¶çš„UIæ›´æ–°é—®é¢˜"><a href="#é¡µé¢å¡é¡¿ï¼Œfunction-å‡½æ•°ç»„ä»¶çš„UIæ›´æ–°é—®é¢˜" class="headerlink" title="é¡µé¢å¡é¡¿ï¼Œfunction å‡½æ•°ç»„ä»¶çš„UIæ›´æ–°é—®é¢˜"></a>é¡µé¢å¡é¡¿ï¼Œfunction å‡½æ•°ç»„ä»¶çš„UIæ›´æ–°é—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; parent.tsx</span><br><span class="line">import React, &#123; useState, useEffect &#125; from &#39;react&#39;</span><br><span class="line">export const Parent &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const [count, setCount] &#x3D; useState(0)</span><br><span class="line">  return &lt;ChildA count&#x3D;&#123;count&#125; onchange&#x3D;&#123;(c) &#x3D;&gt; setCount(c)&#125; &#x2F;&gt;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; ChildA.tsx</span><br><span class="line">export const ChildA &#x3D; (&#123;count, onChange&#125;: &#123;count: number; onChange: (c: number) &#x3D;&gt; void;&#125;) &#x3D;&gt; &#123;</span><br><span class="line">  useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;, [count])</span><br><span class="line">  return (</span><br><span class="line">    &lt;div onClick&#x3D;&#123;() &#x3D;&gt; &#125;&gt;You click it &#123;count&#125; times&lt;&#x2F;div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é¡µé¢å¡é¡¿ï¼Œchildren-ç»„ä»¶è¢«é‡å¤æ¸²æŸ“-ä½¿ç”¨-useMemo-amp-useCallback-amp-useReducer-æ›¿æ¢-useState"><a href="#é¡µé¢å¡é¡¿ï¼Œchildren-ç»„ä»¶è¢«é‡å¤æ¸²æŸ“-ä½¿ç”¨-useMemo-amp-useCallback-amp-useReducer-æ›¿æ¢-useState" class="headerlink" title="é¡µé¢å¡é¡¿ï¼Œchildren ç»„ä»¶è¢«é‡å¤æ¸²æŸ“: ä½¿ç”¨ useMemo &amp; useCallback &amp; useReducer æ›¿æ¢ useState"></a>é¡µé¢å¡é¡¿ï¼Œchildren ç»„ä»¶è¢«é‡å¤æ¸²æŸ“: ä½¿ç”¨ useMemo &amp; useCallback &amp; useReducer æ›¿æ¢ useState</h4><h4 id="é¡µé¢å¡é¡¿ï¼Œchild-çš„-useEffect-ç‹‚åˆ·é¡µé¢ï¼Œå› ä¸ºæœ‰ä¾èµ–æ˜¯å¤šå±‚åµŒå¥—å¼•ç”¨å¯¹è±¡ç±»å‹"><a href="#é¡µé¢å¡é¡¿ï¼Œchild-çš„-useEffect-ç‹‚åˆ·é¡µé¢ï¼Œå› ä¸ºæœ‰ä¾èµ–æ˜¯å¤šå±‚åµŒå¥—å¼•ç”¨å¯¹è±¡ç±»å‹" class="headerlink" title="é¡µé¢å¡é¡¿ï¼Œchild çš„ useEffect ç‹‚åˆ·é¡µé¢ï¼Œå› ä¸ºæœ‰ä¾èµ–æ˜¯å¤šå±‚åµŒå¥—å¼•ç”¨å¯¹è±¡ç±»å‹"></a>é¡µé¢å¡é¡¿ï¼Œchild çš„ useEffect ç‹‚åˆ·é¡µé¢ï¼Œå› ä¸ºæœ‰ä¾èµ–æ˜¯å¤šå±‚åµŒå¥—å¼•ç”¨å¯¹è±¡ç±»å‹</h4><h4 id="useEffect-å†…éƒ¨æ¥å£è¯·æ±‚çš„å¤„ç†-å¤–éƒ¨è¯·æ±‚-å‡ºç°2ä¸ªç›¸åŒå®šä¹‰å‡½æ•°-å†—ä½™ä»£ç "><a href="#useEffect-å†…éƒ¨æ¥å£è¯·æ±‚çš„å¤„ç†-å¤–éƒ¨è¯·æ±‚-å‡ºç°2ä¸ªç›¸åŒå®šä¹‰å‡½æ•°-å†—ä½™ä»£ç " class="headerlink" title="useEffect å†…éƒ¨æ¥å£è¯·æ±‚çš„å¤„ç† + å¤–éƒ¨è¯·æ±‚ = å‡ºç°2ä¸ªç›¸åŒå®šä¹‰å‡½æ•° = å†—ä½™ä»£ç "></a>useEffect å†…éƒ¨æ¥å£è¯·æ±‚çš„å¤„ç† + å¤–éƒ¨è¯·æ±‚ = å‡ºç°2ä¸ªç›¸åŒå®šä¹‰å‡½æ•° = å†—ä½™ä»£ç </h4><h4 id="ä½¿ç”¨-immer-immutable"><a href="#ä½¿ç”¨-immer-immutable" class="headerlink" title="ä½¿ç”¨ immer / immutable"></a>ä½¿ç”¨ immer / immutable</h4><h2 id="ç±»å‹å¤ç”¨é€»è¾‘"><a href="#ç±»å‹å¤ç”¨é€»è¾‘" class="headerlink" title="ç±»å‹å¤ç”¨é€»è¾‘"></a>ç±»å‹å¤ç”¨é€»è¾‘</h2><blockquote>
<p>type &amp;&amp; interface çš„ä½¿ç”¨ï¼Œè€ƒè™‘é¡¹ç›®ä¸­ç±»å‹ï¼Œç®€çŸ­çš„å¯åšåŸºç¡€ç±»å‹çš„ä¼˜å…ˆè€ƒè™‘ typeï¼Œ æµè§ˆå™¨è¯·æ±‚æ¥å£çš„å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ä½¿ç”¨ interfaceï¼Œå‡½æ•°&amp;å…¶ä»–å˜é‡ï¼Œé›†åˆç±»å‹ ä¼˜å…ˆä½¿ç”¨ type</p>
</blockquote>
<blockquote>
<p>typeå’Œinterface åŒºåˆ«åœ¨äºï¼šintefaceæ— æ³•åº”ç”¨äºunion type | intersection type | conditional type | tupleï¼Œä½†æ˜¯å¯ä»¥ augumented è€Œtypeä¸è¡Œ</p>
</blockquote>
<blockquote>
<p>æŠŠç±»å‹å½“ä½œå€¼çš„é›†åˆï¼Œç†è§£ ç±»å‹ä¸­çš„ union type - äº¤é›† å’Œ intersection type -å¹¶é›†</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// type</span></span><br><span class="line"><span class="keyword">type</span> AB = <span class="string">&#x27;A&#x27;</span> | <span class="string">&#x27;B&#x27;</span> <span class="comment">// union type å¹¶é›†</span></span><br><span class="line"><span class="keyword">type</span> NamedVariable = &#123;age: <span class="built_in">number</span>&#125; &amp; &#123; name: <span class="built_in">string</span>&#125; <span class="comment">// intersection type äº¤é›†</span></span><br><span class="line"><span class="keyword">type</span> mytuple = [<span class="built_in">number</span>, <span class="built_in">string</span>] <span class="comment">// tupleå…ƒç»„</span></span><br><span class="line"><span class="comment">// inteface</span></span><br><span class="line"><span class="comment">// a.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> BaseInfo &#123;</span><br><span class="line">  name :<span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// b.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; BaseInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;path/to/a.ts&#x27;</span></span><br><span class="line"><span class="keyword">interface</span> BaseInfo &#123;</span><br><span class="line">  phoneNum: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> base: BaseInfo = &#123;</span><br><span class="line">  name: <span class="string">&#x27;xx&#x27;</span>,</span><br><span class="line">  age: <span class="number">21</span>,</span><br><span class="line">  phoneNum: <span class="string">&#x27;19xxxxxxxxx&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŠŠç±»å‹å½“ä½œå€¼çš„é›†åˆ</span></span><br><span class="line"><span class="keyword">type</span> AA = &#123;aa: <span class="string">&#x27;A&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">type</span> BB = &#123;bb: <span class="string">&#x27;B&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">type</span> ABor = AA | BB</span><br><span class="line"><span class="keyword">type</span> ABand = AA &amp; BB</span><br><span class="line"><span class="keyword">type</span> AAkeys = keyof AA <span class="comment">// &#x27;aa&#x27;</span></span><br><span class="line"><span class="keyword">type</span> BBkeys = keyof BB <span class="comment">// &#x27;bb&#x27;</span></span><br><span class="line"><span class="keyword">type</span> ABandKeys = keyof ABand <span class="comment">// &#x27;aa&#x27; | &#x27;bb&#x27;, keyof ABand === (keyof AAkeys) | (keyof BBkeys)</span></span><br><span class="line"><span class="keyword">type</span> ABorKeys = keyof ABor <span class="comment">// never, keyof ABor === (keyof AAkeys) &amp; (keyof BBkeys)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> aaa: ABand = &#123;</span><br><span class="line">  aa: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">  bb: <span class="string">&#x27;B&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="useEffect-åŸºäº-useMemo-amp-useCallback-å¯¼è‡´çš„æ›´æ–°é—®é¢˜"><a href="#useEffect-åŸºäº-useMemo-amp-useCallback-å¯¼è‡´çš„æ›´æ–°é—®é¢˜" class="headerlink" title="useEffect: åŸºäº useMemo &amp; useCallback å¯¼è‡´çš„æ›´æ–°é—®é¢˜"></a>useEffect: åŸºäº useMemo &amp; useCallback å¯¼è‡´çš„æ›´æ–°é—®é¢˜</h2><p>å†™Vue3å†™å¤šäº†ï¼Œåˆæ¬¡å†™Reacté¡¹ç›®å¾ˆä¸é€‚åº”ï¼Œé¦–å…ˆé¢ä¸´çš„ä¸€ä¸ªå¤§é—®é¢˜å°±æ˜¯ useEffect æ›´æ–° child ç»„ä»¶ï¼Œæ•°æ¬¡è¿›å…¥æ— é™å¾ªç¯ï¼ŒæŠŠæµè§ˆå™¨æå´©äº†ã€‚ç”±äºæˆ‘æœ¬äººé¦–æ¬¡å†™ React ä¸Šäº†å¼º debuff, å¯¼è‡´é¦–æ¬¡å†™çš„ react é¡¹ç›®ä¸šåŠ¡ä»£ç ä¸€å¨å±ï¼Œæœ¬äººç—›å®šæ€ç—›ï¼Œå†³å®šå¯¹ä¸šåŠ¡ä»£ç è„±æ•åé‡æ„ä¸€æ¬¡ï¼Œä»¥å½°æ˜¾å†™æ›´æ£’çš„ä»£ç çš„å†³å¿ƒ</p>
<h2 id="æ”¹è¿›ï¼š-è€ƒè™‘ä½¿ç”¨-immer-js"><a href="#æ”¹è¿›ï¼š-è€ƒè™‘ä½¿ç”¨-immer-js" class="headerlink" title="æ”¹è¿›ï¼š è€ƒè™‘ä½¿ç”¨ immer.js"></a>æ”¹è¿›ï¼š è€ƒè™‘ä½¿ç”¨ immer.js</h2><h2 id="æ”¹è¿›åï¼š-æ€è€ƒ-Class-ç»„ä»¶-ğŸ†š-å‡½æ•°ç»„ä»¶-çš„ä¾¿åˆ©æ€§"><a href="#æ”¹è¿›åï¼š-æ€è€ƒ-Class-ç»„ä»¶-ğŸ†š-å‡½æ•°ç»„ä»¶-çš„ä¾¿åˆ©æ€§" class="headerlink" title="æ”¹è¿›åï¼š æ€è€ƒ Class ç»„ä»¶ ğŸ†š å‡½æ•°ç»„ä»¶ çš„ä¾¿åˆ©æ€§"></a>æ”¹è¿›åï¼š æ€è€ƒ Class ç»„ä»¶ ğŸ†š å‡½æ•°ç»„ä»¶ çš„ä¾¿åˆ©æ€§</h2><blockquote>
<p>Class &amp; enum æ¨ªè·¨å€¼&amp;ç±»å‹</p>
</blockquote>
<h2 id="å…¶ä»–ï¼š"><a href="#å…¶ä»–ï¼š" class="headerlink" title="å…¶ä»–ï¼š"></a>å…¶ä»–ï¼š</h2><ol>
<li>ä½¿ç”¨ Vue3 å®ç°ç›¸ä¼¼åŠŸèƒ½</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2021/12/07/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/07/hello-world/" class="post-title-link" itemprop="url">Hexo & travis botå‘çˆ¹çš„è‡ªåŠ¨éƒ¨ç½²</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-12-07 14:15:23" itemprop="dateCreated datePublished" datetime="2021-12-07T14:15:23+08:00">2021-12-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ²¡æœ‰ä¿®æ”¹ä¸»é¢˜å‰çš„è‡ªåŠ¨éƒ¨ç½²æµç¨‹ååˆ†é¡ºæ»‘"><a href="#æ²¡æœ‰ä¿®æ”¹ä¸»é¢˜å‰çš„è‡ªåŠ¨éƒ¨ç½²æµç¨‹ååˆ†é¡ºæ»‘" class="headerlink" title="æ²¡æœ‰ä¿®æ”¹ä¸»é¢˜å‰çš„è‡ªåŠ¨éƒ¨ç½²æµç¨‹ååˆ†é¡ºæ»‘"></a>æ²¡æœ‰ä¿®æ”¹ä¸»é¢˜å‰çš„è‡ªåŠ¨éƒ¨ç½²æµç¨‹ååˆ†é¡ºæ»‘</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git:main åˆ†æ”¯</span></span><br><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git commit msg</span><br><span class="line">$ git push</span><br><span class="line"><span class="comment"># å‰©ä¸‹çš„äº¤ç»™travis.botå‘å¸ƒåˆ°gh-pagesåˆ†æ”¯</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸€åˆ‡å˜æ•…æ¥æºäºæ›´æ¢äº†æ›´å¥½çœ‹çš„ä¸»é¢˜"><a href="#ä¸€åˆ‡å˜æ•…æ¥æºäºæ›´æ¢äº†æ›´å¥½çœ‹çš„ä¸»é¢˜" class="headerlink" title="ä¸€åˆ‡å˜æ•…æ¥æºäºæ›´æ¢äº†æ›´å¥½çœ‹çš„ä¸»é¢˜"></a>ä¸€åˆ‡å˜æ•…æ¥æºäºæ›´æ¢äº†æ›´å¥½çœ‹çš„ä¸»é¢˜</h2><p>  åŒæ ·æ“ä½œä¸€éï¼Œçº¿ä¸Šçš„ç›´æ¥404ï¼Œåœ¨.travis.ymlè„šæœ¬ä¸­å¢åŠ äº† npm install,å°±æ­¤æˆåŠŸäº†ä¸€æ¬¡ï¼Œå½“ç¬¬ä¸‰æ¬¡æ¨é€æ—¶åˆä¸è¡Œäº†ï¼Œæœ¬åœ°serverå®Œå…¨OKï¼ŒæŸ¥çœ‹nodeç‰ˆæœ¬ï¼Œæ¢æˆ.travis.ymlä¸­çš„10.22.0,å†cleanæ‰ï¼Œä¸è¡Œï¼Œç¬¬äº”æ¬¡ï¼Œç¬¬å…­æ¬¡ï¼Œå°è¯•äº†å¤šç§åŠæ³•è¿˜æ˜¯ä¸è¡Œï¼Œä¸€æ°”ä¹‹ä¸‹æ”¹æˆç§æœ‰éƒ¨ç½²ï¼Œæœ¬åœ°1ä¸ªå‘½ä»¤ï¼ŒçœŸé¦™ã€‚</p>
<h3 id="æ¨èç§æœ‰éƒ¨ç½²-hexo-deployer-git-å†æ— å¤´ç§ƒçƒ¦æ¼"><a href="#æ¨èç§æœ‰éƒ¨ç½²-hexo-deployer-git-å†æ— å¤´ç§ƒçƒ¦æ¼" class="headerlink" title="æ¨èç§æœ‰éƒ¨ç½² hexo-deployer-git å†æ— å¤´ç§ƒçƒ¦æ¼"></a>æ¨èç§æœ‰éƒ¨ç½² hexo-deployer-git å†æ— å¤´ç§ƒçƒ¦æ¼</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># your-git-repo-url</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">$GH_TOKEN</span> <span class="comment"># ä½ çš„token, è·Ÿåœ¨travis.comä¸Šé…ç½®æ˜¯åŒä¸€ä¸ªtoken,è¿™é‡Œå†™tokenåï¼š$GH_TOKEN</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span> <span class="comment"># å‘å¸ƒåˆ†æ”¯</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å®Œæˆåæ¥ä¸‹æ¥å‘½ä»¤è¡Œï¼šç›´æ¥ä¸€ä¸ªå‘½ä»¤</span></span><br><span class="line">$ npx hexo clean &amp;&amp; npx hexo deploy</span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å°±æ˜¯vscode-auth =&gt; github.comçš„è®¤è¯è¿‡ç¨‹ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œå³å¯</span></span><br><span class="line"><span class="comment"># å¦‚æœç¢°åˆ° å…³é”®å­—ä¸­æœ‰ LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443é”™è¯¯ï¼Œæ›´æ¢ç½‘ç»œï¼Œä¸è¦ç”¨æµé‡</span></span><br><span class="line"><span class="comment"># å¦‚æœç¢°åˆ° Authentication failed for &#x27;https://github.com/xxx/xxx.github.io/&#x27;ï¼Œé‚£å°±æ˜¯travisä¸Šé…ç½®çš„$ $GH_TOKENä¸.config.ymlä¸­çš„ä¸ä¸€è‡´</span></span><br><span class="line"><span class="comment"># è¿™ä¸¤ä¸ªé—®é¢˜éƒ½æ²¡ç¢°åˆ°ï¼ŒåŸºæœ¬æˆåŠŸ</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
