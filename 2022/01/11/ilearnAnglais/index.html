<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»ç±»å‹ä¹‹é—´çš„å…³ç³»-å„¿ç±»å‹å…³ç³»ï¼š1. åœ¨TSä¸­æ¶ˆé™¤ç±»å‹çš„æ­§ä¹‰ï¼›2.å®‰å…¨çš„ååºåˆ—åŒ–ï¼›3.é”™è¯¯æƒ…å†µçš„å€¼ï¼›4.å’Œç±»å‹ã€é›†åˆä»¥åŠå‡½æ•°çš„ç±»å‹å…¼å®¹ã€‚ åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹å›é¡¾ç£…åŠ›ç§’é‚£ä¸ªä¾‹å­ï¼Œä½¿ç”¨äº† unique symbol æ¥åŒºåˆ†ä¸¤ä¸ªç›¸ä¼¼ç±»å‹ï¼Œç¡®ä¿ç±»å‹æ£€æŸ¥å™¨ä¸ä¼šæŠŠä¸€ä¸ªç±»å‹çš„å€¼è§£é‡Šä¸ºå¦ä¸€ä¸ªç±»å‹çš„å€¼ - é€šè¿‡æ¨¡æ‹Ÿåä¹‰Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ğŸ‘‰è§ä¸‹æ–‡ çœç•¥NsTy">
<meta property="og:type" content="article">
<meta property="og:title" content="ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ - ç±»å‹éƒ¨åˆ†&amp;è¡¥å……çŸ¥è¯†">
<meta property="og:url" content="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnAnglais/index.html">
<meta property="og:site_name" content="Comfortably Numb">
<meta property="og:description" content="ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»ç±»å‹ä¹‹é—´çš„å…³ç³»-å„¿ç±»å‹å…³ç³»ï¼š1. åœ¨TSä¸­æ¶ˆé™¤ç±»å‹çš„æ­§ä¹‰ï¼›2.å®‰å…¨çš„ååºåˆ—åŒ–ï¼›3.é”™è¯¯æƒ…å†µçš„å€¼ï¼›4.å’Œç±»å‹ã€é›†åˆä»¥åŠå‡½æ•°çš„ç±»å‹å…¼å®¹ã€‚ åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹å›é¡¾ç£…åŠ›ç§’é‚£ä¸ªä¾‹å­ï¼Œä½¿ç”¨äº† unique symbol æ¥åŒºåˆ†ä¸¤ä¸ªç›¸ä¼¼ç±»å‹ï¼Œç¡®ä¿ç±»å‹æ£€æŸ¥å™¨ä¸ä¼šæŠŠä¸€ä¸ªç±»å‹çš„å€¼è§£é‡Šä¸ºå¦ä¸€ä¸ªç±»å‹çš„å€¼ - é€šè¿‡æ¨¡æ‹Ÿåä¹‰Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ğŸ‘‰è§ä¸‹æ–‡ çœç•¥NsTy">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-11T07:40:07.000Z">
<meta property="article:modified_time" content="2022-02-09T07:29:28.410Z">
<meta property="article:author" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
<meta property="article:tag" content="typeScript, javaScript, ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnAnglais/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ - ç±»å‹éƒ¨åˆ†&è¡¥å……çŸ¥è¯† | Comfortably Numb</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Comfortably Numb</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">åæ–¹å‘çš„é’Ÿ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/MillyTang/MillyTang.github.io/2022/01/11/ilearnAnglais/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Comfortably Numb">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ - ç±»å‹éƒ¨åˆ†&è¡¥å……çŸ¥è¯†
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-11 15:40:07" itemprop="dateCreated datePublished" datetime="2022-01-11T15:40:07+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-02-09 15:29:28" itemprop="dateModified" datetime="2022-02-09T15:29:28+08:00">2022-02-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="ç¬¬ä¸ƒç« -Subtyping-å„¿ç±»å‹å…³ç³»"><a href="#ç¬¬ä¸ƒç« -Subtyping-å„¿ç±»å‹å…³ç³»" class="headerlink" title="ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»"></a>ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»</h2><p>ç±»å‹ä¹‹é—´çš„å…³ç³»-å„¿ç±»å‹å…³ç³»ï¼š1. åœ¨TSä¸­æ¶ˆé™¤ç±»å‹çš„æ­§ä¹‰ï¼›2.å®‰å…¨çš„ååºåˆ—åŒ–ï¼›3.é”™è¯¯æƒ…å†µçš„å€¼ï¼›4.å’Œç±»å‹ã€é›†åˆä»¥åŠå‡½æ•°çš„ç±»å‹å…¼å®¹ã€‚</p>
<h3 id="åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹"><a href="#åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹" class="headerlink" title="åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹"></a>åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹</h3><p>å›é¡¾ç£…åŠ›ç§’é‚£ä¸ªä¾‹å­ï¼Œä½¿ç”¨äº† <code>unique symbol</code> æ¥åŒºåˆ†ä¸¤ä¸ªç›¸ä¼¼ç±»å‹ï¼Œç¡®ä¿ç±»å‹æ£€æŸ¥å™¨ä¸ä¼šæŠŠ<code>ä¸€ä¸ªç±»å‹çš„å€¼</code>è§£é‡Šä¸º<code>å¦ä¸€ä¸ªç±»å‹çš„å€¼</code> - é€šè¿‡<code>æ¨¡æ‹Ÿåä¹‰Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ğŸ‘‰è§ä¸‹æ–‡</p>
<figure class="highlight ts"><figcaption><span>çœç•¥NsTypeå’ŒLbsTypeçš„unique symbolå”¯ä¸€å±æ€§</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> NsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Ns &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// [NsType]: void;</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> LbfsType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Lbfs &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">// [LbfsType]: void;</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†2ä¸ª NsType &amp; LbsType çœç•¥ï¼Œå°†2ä¸ªå¯¹è±¡äº’ä¼ ï¼Œç¼–è¾‘å™¨ä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// æ¼”ç¤ºè¿‡ç¨‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">acceptNs</span>(<span class="params">momentum: Ns</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Momentum: <span class="subst">$&#123;Momentum.value&#125;</span>Ns`</span>)</span><br><span class="line">&#125;</span><br><span class="line">acceptNs(<span class="keyword">new</span> Lbfs(<span class="number">10</span>)) <span class="comment">// å®é™…è°ƒç”¨ä¼ é”™å‚æ•°ï¼Œä¸ä¼šæŠ¥é”™ï¼Œæ§åˆ¶å°æ‰“å°ï¼šMomentum: 10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Subtypingï¼šå¦‚æœåœ¨æœŸæœ›ç±»å‹ <strong>T</strong> çš„å®ä¾‹çš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ç±»å‹ <strong>S</strong> çš„å®ä¾‹ï¼Œé‚£ä¹ˆç§°ç±»å‹ <strong>S</strong> æ˜¯ç±»å‹ <strong>T</strong> çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ã€‚- é‡Œæ°(Liskov substitution principle)æ›¿æ¢åŸåˆ™ä¸­çš„ä¸€ç§éæ­£å¼å®šä¹‰</p>
</blockquote>
<h4 id="Subtyping-çš„æ„æˆ"><a href="#Subtyping-çš„æ„æˆ" class="headerlink" title="Subtyping çš„æ„æˆ"></a>Subtyping çš„æ„æˆ</h4><ol>
<li><code>Normal Subtyping</code>: æ˜¾ç¤ºå£°æ˜ä¸€ä¸ªç±»å‹æ˜¯å¦ä¸€ä¸ªç±»å‹çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™äºŒè€…æ„æˆSubtyping å…³ç³»</li>
<li><code>Structural Subtyping</code>: å¦‚æœä¸€ä¸ªç±»å‹å…·æœ‰å¦ä¸€ä¸ªç±»å‹çš„æ‰€æœ‰æˆå‘˜ï¼Œå¹¶ä¸”å¯èƒ½è¿˜æœ‰å…¶ä»–æˆå‘˜ï¼Œé‚£ä¹ˆå‰è€…æ˜¯åè€…çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹) - <strong><em>TSä½¿ç”¨Structural Subtyping</em></strong></li>
</ol>
<h4 id="Structural-Subtyping-å’Œ-Normal-Subtyping-çš„ä¼˜ç¼ºç‚¹"><a href="#Structural-Subtyping-å’Œ-Normal-Subtyping-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Structural Subtyping å’Œ Normal Subtyping çš„ä¼˜ç¼ºç‚¹"></a>Structural Subtyping å’Œ Normal Subtyping çš„ä¼˜ç¼ºç‚¹</h4><ol>
<li>Normal Subtyping: åœ¨ç±»å‹é—´å»ºç«‹å…³ç³»ï¼Œå³ä½¿ç±»å‹æ˜¯å¤–éƒ¨ç±»å‹ï¼Œä¸åœ¨æ§åˆ¶èŒƒå›´å†…ï¼›</li>
<li>Structural Subtyping: é»˜è®¤ç»“æ„ç›¸ä¼¼ä¸ä¼šæ··æ·†å‚æ•°ç±»å‹</li>
</ol>
<h4 id="åœ¨-TS-ä¸­æ¨¡æ‹Ÿ-Normal-Subtyping"><a href="#åœ¨-TS-ä¸­æ¨¡æ‹Ÿ-Normal-Subtyping" class="headerlink" title="åœ¨ TS ä¸­æ¨¡æ‹Ÿ Normal Subtyping"></a>åœ¨ TS ä¸­æ¨¡æ‹Ÿ Normal Subtyping</h4><p>åœ¨TSä¸­ï¼Œ<code>unique symbol</code> ç”Ÿæˆäº†ä¸€ä¸ªåœ¨æ‰€æœ‰ä»£ç ä¸­ä¿æŒå”¯ä¸€çš„<code>åç§°</code>ã€‚ç”¨æˆ·å£°æ˜çš„åç§°ç»å¯¹ä¸ä¼šåŒ¹é…ç”Ÿæˆçš„åç§°ï¼Œä½¿ç”¨è¯¥åç§°åˆ›å»ºä¸€ä¸ªå±æ€§ï¼Œéœ€è¦ç»™è¿™ä¸ªå±æ€§å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å…³å¿ƒå®ƒçš„å®é™…å€¼ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†ç±»å‹ï¼Œæ‰€ä»¥é€‰æ‹©äº†æœ€é€‚åˆçš„å•å…ƒç±»å‹<code>void</code>ã€‚æ‰€ä»¥å½“è¦åˆ›å»º <code>NS</code>å’Œ<code>Lbfs</code>çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåªèƒ½æ˜¾ç¤ºåœ°ç»§æ‰¿ã€‚</p>
<h3 id="Subtype-äºšç±»å‹ã€å„¿ç±»å‹-çš„æç«¯æƒ…å†µ"><a href="#Subtype-äºšç±»å‹ã€å„¿ç±»å‹-çš„æç«¯æƒ…å†µ" class="headerlink" title="Subtype(äºšç±»å‹ã€å„¿ç±»å‹)çš„æç«¯æƒ…å†µ"></a>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)çš„æç«¯æƒ…å†µ</h3><ol>
<li>æŠŠä»»ä½•ç±»å‹èµ‹å€¼ç»™å®ƒçš„ç±»å‹(Assigning anything to)ï¼š<code>any</code>, <code>unknown</code></li>
<li>ç»™ä»»ä½•ä¸œè¥¿èµ‹å€¼ç±»å‹(assigning to anything)ï¼š<code>any</code>- ä»è€Œç»•è¿‡ç±»å‹æ£€æŸ¥</li>
</ol>
<figure class="highlight ts"><figcaption><span>ååºåˆ—åŒ–any</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON.parse()ååºåˆ—åŒ–è¿”å›ç±»å‹æ˜¯ any</span></span><br><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åªæ˜¯å°è£…äº† JSON.parse() å¹¶è¿”å›äº† any ç±»å‹çš„ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–ä¸€ä¸ªæœ‰æ•ˆçš„ User JSON</span></span><br><span class="line">greet(deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &quot;Alice&quot;&#125;&#x27;</span>))</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªä¸æ˜¯ User å¯¹è±¡çš„å¯¹è±¡</span></span><br><span class="line">greet(<span class="string">&#x27;&#123;&#125;&#x27;</span>) <span class="comment">// è¾“å‡ºhi undefinedï¼Œå› ä¸º `any`ä¼šç»•è¿‡ç±»å‹æ£€æŸ¥</span></span><br></pre></td></tr></table></figure>

<h4 id="Userçš„è¿è¡Œæ—¶æ£€æŸ¥-isUser"><a href="#Userçš„è¿è¡Œæ—¶æ£€æŸ¥-isUser" class="headerlink" title="Userçš„è¿è¡Œæ—¶æ£€æŸ¥ - isUser()"></a>Userçš„è¿è¡Œæ—¶æ£€æŸ¥ - isUser()</h4><p>å¢åŠ ä¸€ä¸ªå±æ€§ç±»å‹æ£€æŸ¥å‡½æ•°å¯ä»¥è§„é¿ç±»å‹é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ä¸è¶³ï¼šæ²¡æœ‰å¼ºåˆ¶è°ƒç”¨ <strong>isUser</strong>ï¼Œæ‰€ä»¥ä¾ç„¶ä¼šå­˜åœ¨å¿˜è®°è°ƒç”¨è€Œå‡ºç°çš„ <code>undefined</code> çš„æƒ…å†µ</p>
<figure class="highlight ts"><figcaption><span>å¢åŠ isUser()å‡½æ•°è°ƒç”¨å‰æ£€æŸ¥ç±»å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ£€æŸ¥ç»™å®šå®å‚æ˜¯å¦æ˜¯ User ç±»å‹ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œå…·æœ‰ string ç±»å‹çš„ name å±æ€§çš„å˜é‡æ˜¯ User ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUser</span>(<span class="params">user: <span class="built_in">any</span></span>): <span class="title">user</span> <span class="title">isUser</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> user.name === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> user: <span class="built_in">any</span> = deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &#x27;</span>Alice<span class="string">&#x27;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">// åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ user æ˜¯å¦å…·æœ‰ stringç±»å‹çš„nameå±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br><span class="line">user = <span class="literal">undefined</span></span><br><span class="line"><span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é¡¶å±‚ç±»å‹-Top-Type-unknown"><a href="#é¡¶å±‚ç±»å‹-Top-Type-unknown" class="headerlink" title="é¡¶å±‚ç±»å‹(Top Type) - unknown"></a>é¡¶å±‚ç±»å‹(Top Type) - unknown</h4><blockquote>
<p>å¦‚æœèƒ½å¤ŸæŠŠä»»ä½•å€¼èµ‹ç»™ä¸€ä¸ªç±»å‹ï¼Œåˆ™ç§°ä¸ºé¡¶å±‚ç±»å‹ï¼Œ<strong>å’Œç±»å‹</strong><code>Object | null | undefined</code> === <code>unknown</code></p>
</blockquote>
<p>ä¸€æ—¦å¿˜è®°è°ƒç”¨ <code>isUser</code>ï¼Œä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹å°±ä¼šæŠ¥é”™ <code>Argument of type &#39;unknown&#39; is not assignable to parameter of type &#39;User&#39;</code></p>
<blockquote>
<p>unknown å’Œ any çš„åŒºåˆ«ï¼šunknown éœ€è¦å­˜åœ¨å¯è½¬æ¢çš„ç±»å‹ï¼Œè€Œ any ä¸éœ€è¦ç›´æ¥å¯ç”¨ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ unknown çš„å¼ºç±»å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> User &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å› unknown</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deserialize</span>(<span class="params">input: <span class="built_in">string</span></span>): <span class="title">unknown</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(input)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">user: User</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`hi <span class="subst">$&#123;user.name&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ£€æŸ¥ç»™å®šå®å‚æ˜¯å¦æ˜¯ User ç±»å‹ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œå…·æœ‰ string ç±»å‹çš„ name å±æ€§çš„å˜é‡æ˜¯ User ç±»å‹</span></span><br><span class="line"><span class="comment">// å®å‚ä¿æŒä¸º any</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUser</span>(<span class="params">user: <span class="built_in">any</span></span>): <span class="title">user</span> <span class="title">isUser</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> user.name === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°†å˜é‡å£°æ˜ä¸º unknown</span></span><br><span class="line"><span class="comment">// è¿™é‡Œä¸€æ—¦æœ‰å€¼å°±ä¼šæœ‰ç±»å‹ä» any è½¬æ¢ä¸º unknownï¼Œå‘ä¸Šè½¬åŒ–ç±»å‹æ˜¯å®‰å…¨çš„</span></span><br><span class="line"><span class="keyword">let</span> user: unknown = deserialize(<span class="string">&#x27;&#123;&quot;name&quot;: &#x27;</span>Alice<span class="string">&#x27;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">// åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ user æ˜¯å¦å…·æœ‰ stringç±»å‹çš„nameå±æ€§</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br><span class="line">user = deserialize(<span class="string">&#x27;null&#x27;</span>)</span><br><span class="line"><span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (isUser(user)) &#123;</span><br><span class="line">  greet(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é”™è¯¯æƒ…å†µçš„å€¼"><a href="#é”™è¯¯æƒ…å†µçš„å€¼" class="headerlink" title="é”™è¯¯æƒ…å†µçš„å€¼"></a>é”™è¯¯æƒ…å†µçš„å€¼</h4><p>ä¸€ä¸ªç›¸åçš„é—®é¢˜ï¼šä¸€ç§ç±»å‹å¯ä»¥æ›¿ä»£å…¶ä»–ç±»å‹ä½¿ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>TurnDirectionåˆ°è§’åº¦çš„è½¬æ¢</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> TurnDirection &#123;</span><br><span class="line">  Left,</span><br><span class="line">  Right</span><br><span class="line">&#125;</span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æŠ¥å‘Šé”™è¯¯</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">funtion fail(message: <span class="built_in">string</span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(message);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message)</span><br><span class="line">&#125;</span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯è¿˜å·®ä¸€ç‚¹</span></span><br><span class="line"><span class="comment">// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆä½¿ç”¨äº† --strictï¼‰ç¼–è¾‘å™¨ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// Function lacks ending return statement and return tyoe does not include &quot;undefined&quot;</span></span><br><span class="line"><span class="comment">// å› ä¸ºç¼–è¾‘å™¨åœ¨ `default` åˆ†æ”¯ä¸­æ²¡æœ‰æ‰¾åˆ° return è¯­å¥ï¼Œæ‰€ä»¥æ ‡è®°é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨fail()å¹¶è¿”å›ä¸€ä¸ªè™šæ‹Ÿçš„å€¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// å› ä¸º fail ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šè¿”å›è¿™ä¸ªè™šæ‹Ÿå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåç»­æ”¹å˜äº† fail çš„è¿”å›ï¼Œè™šæ‹Ÿå€¼å°±ä¼šç›´æ¥è¢«æŠ›å‡ºï¼Œä¸å¤ªå¥½ï¼Œåé¢è¿˜ä¼šé¢ä¸´ä¿®æ”¹ï¼Œéœ€è¦å¦ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨fail()å¹¶è¿”å›å…¶ç»“æœçš„turnAngle()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å³ä½¿è¿”å›neverä¹Ÿæ²¡é—®é¢˜ï¼šå› ä¸º never æ˜¯æ‰€æœ‰ç±»å‹çš„Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</span></span><br><span class="line">funtion turnAngle(turn: Turndirection): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(turn) &#123;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Left: <span class="keyword">return</span> <span class="number">-90</span>;</span><br><span class="line">    <span class="keyword">case</span> TurnDirection.Right: <span class="keyword">return</span> <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      <span class="keyword">return</span> fail(<span class="string">&#x27;Unknown TurnDirection&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåç»­éœ€æ±‚æ›´æ–°äº†<code>fail</code>ï¼Œä½¿å…¶åœ¨æŸäº›æƒ…å†µä¸å†æŠ›å‡ºé”™è¯¯ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶æˆ‘ä»¬ä¿®æ”¹<code>fail</code>çš„è¿”å›ç±»å‹ï¼Œå¦‚æœè¿”å›ç±»å‹æ˜¯<code>void</code>ï¼Œè¿™æ—¶è¯•å›¾å°†è¿”å›çš„å€¼ä¼ é€’ç»™ string ç±»å‹ï¼Œå°±ä¸ä¼šé€šè¿‡ç±»å‹æ£€æŸ¥ã€‚</p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªç±»å‹æ˜¯å…¶ä»–ç±»å‹çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™ä¸ºåº•å±‚ç±»å‹ï¼Œåº•å±‚ç±»å‹æ˜¯æ‰€æœ‰ç±»å‹çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹) åˆ™éœ€è¦å…·æœ‰å…¶ä»–ç±»å‹çš„æˆå‘˜ã€‚å› ä¸ºå…¶ä»–ç±»å‹å¯ä»¥æœ‰æ— é™ä¸ªç±»å‹å’Œæˆå‘˜ï¼Œæ‰€ä»¥åº•å±‚ç±»å‹ä¹Ÿå¿…é¡»æœ‰æ— é™ä¸ªæˆå‘˜ï¼Œç„¶è€Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚æ‰€ä»¥åº•å±‚ç±»å‹å§‹ç»ˆæ˜¯ä¸€ä¸ªç©ºç±»å‹ï¼šä¸èƒ½ä¸ºå…¶åˆ›å»ºå®é™…å€¼</p>
</blockquote>
<h3 id="å…è®¸çš„æ›¿æ¢"><a href="#å…è®¸çš„æ›¿æ¢" class="headerlink" title="å…è®¸çš„æ›¿æ¢"></a>å…è®¸çš„æ›¿æ¢</h3><h4 id="Subtyping-ä¸å’Œç±»å‹ï¼ˆSum-Typeï¼‰"><a href="#Subtyping-ä¸å’Œç±»å‹ï¼ˆSum-Typeï¼‰" class="headerlink" title="Subtyping ä¸å’Œç±»å‹ï¼ˆSum Typeï¼‰"></a>Subtyping ä¸å’Œç±»å‹ï¼ˆSum Typeï¼‰</h4><figure class="highlight ts"><figcaption><span>Trangle | Square ä½œä¸º Trangle | Square | Circle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Trangle &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Trangle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> SquareType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Square &#123;</span><br><span class="line">  [SquareType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Square members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> CircleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Circle &#123;</span><br><span class="line">  [CircleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Circle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™é‡Œå¿½ç•¥å‡½æ•°çš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Trangle</span> | <span class="title">Square</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shape: Trangle | Square | Circle</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="comment">// draw æ¥å— Trangle | Square | Circle è¿™3ç§ç±»å‹ä¹‹ä¸€</span></span><br><span class="line"><span class="comment">// å¯ä»¥è¿è¡Œï¼ŒmakeShapeæä¾›çš„ç±»å‹å°‘äº†ä¸€ä¸ªä½†æ˜¯æ˜¯drawå¯ä»¥æ¥å—çš„èŒƒå›´å†…</span></span><br><span class="line">draw(makeShape())</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>Trangle | Square | Circle ä½œä¸º Trangle | Square</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œå¿½ç•¥å‡½æ•°çš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Trangle</span> | <span class="title">Square</span> | <span class="title">Circle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shape: Trangle | Square</span>):<span class="title">void</span></span>;</span><br><span class="line">draw(makeShape()) <span class="comment">// æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œdraw å¤„ç†ä¸äº† Circle</span></span><br></pre></td></tr></table></figure>

<p>å½“ä½¿ç”¨<strong>ç»§æ‰¿</strong>æ—¶ï¼Œå¾—åˆ°çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code> æ¯” <code>Parent type(åŒäº²ç±»å‹)</code> çš„å±æ€§æ›´å¤šã€‚å¯¹äº<strong>Sum Type</strong>ï¼Œåˆ™æ˜¯ç›¸åçš„ï¼Œ<code>Parent type(åŒäº²ç±»å‹)</code> æ¯” <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code> çš„ç±»å‹æ›´å¤šã€‚</p>
<blockquote>
<p>Sum Type: <code>Trangle | Square</code> æ˜¯ <code>Trangle | Square | Circle</code> çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</p>
</blockquote>
<h4 id="Subtyping-and-collections-é›†åˆ"><a href="#Subtyping-and-collections-é›†åˆ" class="headerlink" title="Subtyping and collections(é›†åˆ)"></a>Subtyping and collections(é›†åˆ)</h4><figure class="highlight ts"><figcaption><span>Triangle[]ä½œä¸ºShape[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;<span class="comment">/* Shape members */</span>&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="comment">// Triangle æ˜¯ Shape çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</span></span><br><span class="line"><span class="keyword">class</span> Triangle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// Triangle members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangles</span>(<span class="params"></span>): <span class="title">Triangle</span>[]</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shapes: Shape[]</span>): <span class="title">void</span></span>;</span><br><span class="line">draw(makeTriangles())</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»“è®ºï¼šæ•°ç»„ä¼šä¿ç•™å®ƒä»¬å­˜å‚¨çš„åº•å±‚ç±»å‹çš„Subtypingå…³ç³»ï¼Œåè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚</p>
</blockquote>
<p><code>Triangle</code> ä½œä¸º <code>Shape</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œåˆ™ <code>Triangle[]</code> æ˜¯ <code>Shape[]</code>çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œå¦‚æœ <code>Triangle</code> å¯ä»¥ç”¨ä½œ <code>Shape</code>ï¼Œé‚£ä¹ˆ <code>Triangle[]</code> ä¹Ÿå¯ä»¥ç”¨ä½œ <code>Shape[]</code></p>
<h5 id="LinkedList-lt-Triangle-gt-ä½œä¸ºLinkedList-lt-Shape-gt"><a href="#LinkedList-lt-Triangle-gt-ä½œä¸ºLinkedList-lt-Shape-gt" class="headerlink" title="LinkedList&lt;Triangle&gt;ä½œä¸ºLinkedList&lt;Shape&gt;"></a><code>LinkedList&lt;Triangle&gt;ä½œä¸ºLinkedList&lt;Shape&gt;</code></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªæ³›å‹é“¾è¡¨é›†åˆ</span></span><br><span class="line"><span class="keyword">class</span> LinkedList&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedList&lt;T&gt; | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  append(value: T): linkedList&lt;T&gt; &#123;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="keyword">new</span> LinkedList(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.next</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangles</span>(<span class="params"></span>): <span class="title">linkedList</span>&lt;<span class="title">Triangle</span>&gt;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">shapes: linkedList&lt;Shape&gt;</span>): <span class="title">void</span></span>;</span><br><span class="line">draw(makeTriangles()); <span class="comment">// ä»£ç èƒ½å¤Ÿç¼–è¯‘</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>åå˜(Covariance)ï¼šå¦‚æœä¸€ä¸ªç±»å‹ä¿ç•™å…¶åº•å±‚ç±»å‹çš„ <code>subtyping</code> å…³ç³»ï¼Œå°±æˆè¯¥ç±»å‹å…·æœ‰åå˜æ€§ã€‚æ•°ç»„å…·æœ‰åå˜æ€§ã€‚å› ä¸ºå®ƒä¿ç•™äº† <code>subtyping</code> å…³ç³»: <code>Triangle</code> æ˜¯ <code>Shape</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code>ï¼Œæ‰€ä»¥ <code>Triangle[]</code> æ˜¯ <code>Shape[]</code> çš„ <code>Subtype(äºšç±»å‹ã€å„¿ç±»å‹)</code></p>
</blockquote>
<h4 id="Subtyping-å’Œå‡½æ•°çš„è¿”å›ç±»å‹"><a href="#Subtyping-å’Œå‡½æ•°çš„è¿”å›ç±»å‹" class="headerlink" title="Subtyping å’Œå‡½æ•°çš„è¿”å›ç±»å‹"></a>Subtyping å’Œå‡½æ•°çš„è¿”å›ç±»å‹</h4><h5 id="gt-Triangle-ä½œä¸º-gt-Shape"><a href="#gt-Triangle-ä½œä¸º-gt-Shape" class="headerlink" title="() =&gt; Triangle ä½œä¸º () =&gt; Shape"></a>() =&gt; Triangle ä½œä¸º () =&gt; Shape</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangle</span>(<span class="params"></span>): <span class="title">Triangle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Shape</span>(<span class="params"></span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFactory</span>(<span class="params">factory: () =&gt; Shape</span>): <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> factory()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> shape1: Shape = useFactory(makeShape);</span><br><span class="line"><span class="keyword">let</span> shape2: Shape = useFactory(makeTriangle);</span><br><span class="line"><span class="comment">// Shape &lt;---- Triangle // subtying å…³ç³»</span></span><br><span class="line"><span class="comment">// () =&gt; Shape &lt;---- () =&gt; Triangle // subtying å…³ç³»</span></span><br></pre></td></tr></table></figure>

<p>å‡½æ•°çš„è¿”å›ç±»å‹å…·æœ‰åå˜æ€§ï¼šå¦‚æœ <code>Triangle</code> æ˜¯ <code>Shape</code> çš„ Subtype(äºšç±»å‹ã€å„¿ç±»å‹)ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¿”å› <code>Triangle</code> æ›¿ä»£è¿”å›  <code>Shape</code>çš„å‡½æ•°ã€‚åè¿‡æ¥åˆ™ä¸æˆç«‹ã€‚</p>
<h5 id="gt-Shape-ä½œä¸º-gt-Triangle"><a href="#gt-Shape-ä½œä¸º-gt-Triangle" class="headerlink" title="() =&gt; Shape ä½œä¸º () =&gt; Triangle"></a>() =&gt; Shape ä½œä¸º () =&gt; Triangle</h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeTriangle</span>(<span class="params"></span>): <span class="title">Triangle</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">makeShape</span>(<span class="params"></span>): <span class="title">Shape</span>(<span class="params"></span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFactory</span>(<span class="params">factory: () =&gt; Triangle</span>): <span class="title">Triangle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> factory()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»£ç ç¼–è¯‘é”™è¯¯âŒ</span></span><br><span class="line"><span class="keyword">let</span> shape1: Shape = useFactory(makeShape);</span><br><span class="line"><span class="keyword">let</span> shape2: Shape = useFactory(makeTriangle);</span><br></pre></td></tr></table></figure>


<h4 id="Subtyping-å’Œå‡½æ•°çš„å®å‚ç±»å‹"><a href="#Subtyping-å’Œå‡½æ•°çš„å®å‚ç±»å‹" class="headerlink" title="Subtyping å’Œå‡½æ•°çš„å®å‚ç±»å‹"></a>Subtyping å’Œå‡½æ•°çš„å®å‚ç±»å‹</h4><p>å¸¦å‚æ•°çš„ <code>(argument: Shape) =&gt; void</code> å’Œ <code>(argument: Triangle) =&gt; void</code> çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight ts"><figcaption><span>å¼•å…¥ä¸€ä¸ªrender()å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawShape</span>(<span class="params">shape: Shape</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawTriangle</span>(<span class="params">triangle: Triangle</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  triangle: Triangle,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: ((argument: Triangle) =&gt; <span class="built_in">void</span>); <span class="built_in">void</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc(triangle);</span></span></span><br><span class="line"><span class="function"><span class="params"></span>)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>é€†å˜ï¼šå¦‚æœä¸€ä¸ªç±»å‹é¢ å€’äº†å…¶åº•å±‚ç±»å‹çš„ subtying å…³ç³»ï¼Œåˆ™ç§°è¯¥ç±»å‹å…·æœ‰é€†å˜æ€§ã€‚å¤§éƒ¨åˆ†è¯­è¨€ä¸­å‡½æ•°çš„å®å‚æ˜¯é€†å˜çš„ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªæ¥å— Triangle ä½œä¸ºå®å‚çš„å‡½æ•°, <code>Shape &lt;---- Triangle</code> ç®­å¤´æŒ‡å‘ä»£è¡¨ subtying å…³ç³», <code>(Shape) =&gt; void ----&gt; (Triangle) =&gt; void</code>  ç®­å¤´æŒ‡å‘ä»£è¡¨subtying å…³ç³»<br>å¯ä»¥è¢«æ›¿æ¢æˆæ¥å£ Shape ä½œä¸ºå®å‚çš„å‡½æ•°ï¼Œå› ä¸ºæ€»æ˜¯å¯ä»¥æŠŠ Triangle ä¼ é€’ç»™ä¸€ä¸ªæ¥å— Shape ä½œä¸ºå®å‚çš„å‡½æ•°ã€‚å‡½æ•°ä¹‹é—´çš„å…³ç³»ä¸å…¶å®å‚ç±»å‹ä¹‹é—´çš„å…³ç³»ç›¸åã€‚</p>
<blockquote>
<p>TSæ˜¯ä¾‹å¤–ï¼Œå› ä¸ºTSåè¿‡æ¥ä¹Ÿæˆç«‹ï¼šä¼ å…¥æœŸæœ›æ¥å— Subtype(äºšç±»å‹ã€å„¿ç±»å‹) çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯æœŸæœ›æ¥å— Parent type(åŒäº²ç±»å‹)ï¼Œè¿™æ˜¯æ•…æ„ä½œå‡ºçš„è®¾è®¡å†³ç­–ï¼Œç›®çš„æ˜¯æ–¹ä¾¿å®ç°å¸¸è§çš„ JS ç¼–ç¨‹æ¨¡å¼ï¼Œä¸è¿‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é—®é¢˜</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>Shapeå’ŒåŒ…å«isRightAbgled()æ–¹æ³•çš„Triangle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;</span><br><span class="line">  <span class="comment">// Shape members</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> TriangleType: unique symbol;</span><br><span class="line"><span class="keyword">class</span> Triangle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  [TriangleType]: <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç»™å®šçš„å®ä¾‹æ˜¯å¦æè¿°äº†ä¸€ä¸ªç›´è§’ä¸‰è§’å½¢</span></span><br><span class="line">  isRightAbgled(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// determine whether it is a right-angled triangle</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// more triangle members</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>åè½¬ç»˜åˆ¶ç¤ºä¾‹:æ›´æ–°åçš„ç»˜åˆ¶å’Œæ¸²æŸ“å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">drawShape</span>(<span class="params">shape: Shape</span>): <span class="title">void</span></span>;</span><br><span class="line"><span class="keyword">declare</span> funtion drawTriangle(triangle: Triangle): <span class="built_in">void</span>;</span><br><span class="line"><span class="comment">// render æœŸæœ›æ”¶åˆ° Shape å’Œä¸€ä¸ªæ¥å— Shape ä½œä¸ºå®å‚çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  shape: Shape,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: (argument: Shape) =&gt; <span class="built_in">void</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  drawFunc(shape)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>è¯•å›¾å¯¹Triangleçš„åŒäº²ç±»å‹è°ƒç”¨isRightAbgled</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">funtion drawTriangle(triangle: Triangle): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(triangle.isRightAbgled())</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  shape: Shape,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawFunc: (argument: Shape) =&gt; <span class="built_in">void</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  drawFunc(shape)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ Shape å’Œ drawTriangle æ¥ç»˜åˆ¶</span></span><br><span class="line"><span class="comment">// drawTriangle çš„å®å‚å˜æˆäº† Shapeï¼Œå°†å¯¹ Shape è°ƒç”¨ isRightAbgled()</span></span><br><span class="line"><span class="comment">// è¿è¡Œæ—¶isRightAbgledè‚¯å®šä¼šæŠ¥é”™âŒ</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å®ç°TSæœ‰æ„ä½œå‡ºçš„å†³ç­–</span></span><br><span class="line">render(<span class="keyword">new</span> Shape(), drawTriangle)</span><br></pre></td></tr></table></figure>

<p>åœ¨ TS ä¸­ï¼Œå¦‚æœ Triangle æ˜¯ Shape çš„ subtypeï¼Œé‚£ä¹ˆå‡½æ•°ç±»å‹ <code>(argument: Shape) =&gt; void</code> and <code>(argument: Triangle) =&gt; void</code> èƒ½å¤Ÿå½¼æ­¤æ›¿æ¢ï¼Œäº’ä¸ºsubtypeï¼Œè¿™ç§å±æ€§æˆä¸ºåŒå˜æ€§ï¼ˆåŒå‘åå˜ï¼‰ã€‚</p>
<h2 id="ç¬¬å…«ç« -é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype"><a href="#ç¬¬å…«ç« -é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype" class="headerlink" title="ç¬¬å…«ç«  - é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype"></a>ç¬¬å…«ç«  - é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype</h2><blockquote>
<p>OOP: Object-Oriebted Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚å¯¹è±¡å¯ä»¥åŒ…å«æ•°æ®å’Œä»£ç ï¼Œæ•°æ®æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œä»£ç æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ï¼Œä¹Ÿå«ã€Œæ¶ˆæ¯ã€ã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯¹è±¡ä¹‹é—´å¯ä»¥â€œå¯¹è¯â€æˆ–è€…å‘é€æ¶ˆæ¯ã€‚</p>
</blockquote>
<p>OOPå…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>å°è£…ï¼šå…è®¸éšè—æ•°æ®å’Œæ–¹æ³•</li>
<li>ç»§æ‰¿ï¼šä½¿ç”¨é¢å¤–çš„æ•°æ®å’Œä»£ç æ‰©å±•ä¸€ä¸ªç±»å‹</li>
</ol>
<h3 id="ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦"><a href="#ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦" class="headerlink" title="ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦"></a>ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦</h3><p> æ¥å£æˆ–å¥‘çº¦ï¼š æè¿°äº†å®ç°è¯¥æ¥å£çš„ä»»ä½•å¯¹è±¡éƒ½ç†è§£çš„<code>ä¸€ç»„æ¶ˆæ¯</code>ã€‚æ¶ˆæ¯æ˜¯æ–¹æ³•ï¼ŒåŒ…æ‹¬åç§°ï¼Œå®å‚å’Œè¿”å›ç±»å‹ã€‚æ¥å£æ²¡æœ‰ä»»ä½•çŠ¶æ€ï¼Œç›¸å½“äºä¹¦é¢åè®®ï¼Œè§„å®šäº†å®ç°ä¸­å°†æä¾›ä»€ä¹ˆã€‚</p>
<blockquote>
<p>æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ol>
<li>æŠ½è±¡ç±» <code>ConsoleLogger</code> å’Œ <code>ALogger</code> ä¹‹é—´çš„å…³ç³»æ˜¯æ‰€è°“çš„ <strong>æ˜¯</strong> å…³ç³»ï¼Œå³ <code>ConsoleLogger</code> ç»§æ‰¿äº† <code>ALogger</code>ï¼Œ æ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ª<code>ALogger</code></li>
<li><code>ILogger</code> å®šä¹‰äº†ä¸€ä¸ªå¥‘çº¦ï¼Œæ²¡æœ‰ç»§æ‰¿ï¼Œæ²¡æœ‰åˆ›å»º <strong>æ˜¯</strong> å…³ç³»ï¼Œæ¥å£å¯ä»¥æ‰©å±•ä¹Ÿå¯ä»¥åˆå¹¶ã€‚æ¥å£æœ€ç»ˆè®©æ¶ˆè´¹è€…å—ç›Šï¼Œè€Œä¸æ˜¯å®ç°æ¥å£çš„ç±»å—ç›Šã€‚é’ˆå¯¹æ¥å£ç¼–ç¨‹å¯ä»¥é™ä½ç³»ç»Ÿä¸­ç»„ä»¶çš„è€¦åˆã€‚</li>
</ol>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨æŠ½è±¡ç±»å®ç°æ—¥å¿—ç³»ç»Ÿ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ALogger æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> ALogger &#123;</span><br><span class="line">  <span class="comment">// log æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰å®ç°</span></span><br><span class="line">  <span class="keyword">abstract</span> log(line: <span class="built_in">string</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œå®ç°äº† logæ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> ConsoleLogger <span class="keyword">extends</span> ALogger &#123;</span><br><span class="line">  log(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(line)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨æ¥å£å®ç°æ—¥å¿—ç³»ç»Ÿ-è¿™ç§åœºæ™¯ä¸­æ¨èä½¿ç”¨æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ILogger &#123;</span><br><span class="line">  log(line: sring): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ConsoleLogger <span class="keyword">implements</span> ILogger &#123;</span><br><span class="line">  log(line: <span class="built_in">string</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(line)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ‰©å±•å’Œåˆå¹¶æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰©å±•</span></span><br><span class="line"><span class="keyword">interface</span> ILogger &#123;</span><br><span class="line">  log(line: sring): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IExtendedLogger <span class="keyword">extends</span> ILogger &#123;</span><br><span class="line">  warn(line: sring)L <span class="built_in">void</span>;</span><br><span class="line">  error(line: sring)L <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆå¹¶</span></span><br><span class="line"><span class="keyword">interface</span> ISpeaker &#123;</span><br><span class="line">  playSound(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IVolumeControl &#123;</span><br><span class="line">  up(): <span class="built_in">void</span>;</span><br><span class="line">  down(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> ISpeakerWithIVolumeControl <span class="keyword">extends</span> ISpeaker, IVolumeControl &#123;</span><br><span class="line">  <span class="comment">// åˆå¹¶ä¸ºä¸€ä¸ª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><p>å®ç°ä¸€ä¸ª <code>IterableIterator&lt;T&gt;</code>æ¥å£` </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  next(): IteratorResult&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IterableIterator&lt;T&gt; <span class="keyword">extends</span> Iterable, Iterator&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º"><a href="#ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º" class="headerlink" title="ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º"></a>ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º</h3><h4 id="ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"><a href="#ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™" class="headerlink" title="ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"></a>ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</h4><figure class="highlight ts"><figcaption><span>ä¸å¥½çš„ç»§æ‰¿</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle <span class="keyword">extends</span> Point &#123;</span><br><span class="line">  radius: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span>, radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">super</span>(x, y)</span><br><span class="line">    <span class="built_in">this</span>.radius = radius</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»§æ‰¿å’Œ <strong>æ˜¯ä¸€ä¸ª</strong> å…³ç³»ï¼š ç»§æ‰¿ä¼šåœ¨ å„¿ç±»å‹å’ŒåŒäº²ç±»å‹ä¹‹é—´å»ºç«‹ä¸€ä¸ª <strong>æ˜¯ä¸€ä¸ª</strong>ï¼Œå¦‚æœåŸºç±»æ˜¯ Shapeï¼Œæ´¾ç”Ÿç±»æ˜¯ Circleï¼Œå…³ç³»å°±æ˜¯ <strong><em>Circleæ˜¯ä¸€ä¸ªShape</em></strong>ï¼Œä¸Šé¢ Circle æ˜æ˜¾ä¸æ˜¯ä¸€ä¸ª Pointã€‚</p>
<h4 id="å»ºæ¨¡å±‚æ¬¡"><a href="#å»ºæ¨¡å±‚æ¬¡" class="headerlink" title="å»ºæ¨¡å±‚æ¬¡"></a>å»ºæ¨¡å±‚æ¬¡</h4><p>ä¸€ç§åœºæ™¯ï¼šå½“æ•°æ®æ¨¡å‹åŒ…å«ä¸åŒå±‚æ¬¡æ˜¯ï¼Œåº”è¯¥è€ƒè™‘ç»§æ‰¿ã€‚</p>
<h4 id="å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º"><a href="#å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º" class="headerlink" title="å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º"></a>å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º</h4><p>å¦ä¸€ç§åœºæ™¯ï¼šå¤§éƒ¨åˆ†è¡Œä¸ºå’ŒçŠ¶æ€æ˜¯å¤šä¸ªç±»å‹å…±æœ‰çš„ï¼Œä½†æ˜¯åˆä¸€å°éƒ¨åˆ†è¡Œä¸ºæˆ–çŠ¶æ€éœ€è¦éšä¸åŒå®ç°è€Œæœ‰å˜åŒ–ã€‚è¿™é‡Œçš„å¤šä¸ªç±»å‹åº”è¯¥é€šè¿‡<strong>æ˜¯ä¸€ä¸ª</strong>æµ‹è¯•</p>
<blockquote>
<p>æ³¨æ„âš ï¸ï¼šä¸è¦åˆ›å»ºå‡ºéå¸¸æ·±çš„ç±»å±‚æ¬¡ï¼Œå¦åˆ™ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªçŠ¶æ€å’Œæ–¹æ³•å¯èƒ½æ¥è‡ªå±‚æ¬¡ç»“æ„ä¸­çš„ä¸åŒçº§åˆ«ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€‚é€šå¸¸è®© subclass æ˜¯å…·ä½“ç±»ï¼Œè®©å±‚æ¬¡ç»“æ„ä¸Šæ–¹çš„åŒäº²ç±»æ˜¯æŠ½è±¡ç±»æ¯”è¾ƒå¥½ã€‚ </p>
</blockquote>
<figure class="highlight ts"><figcaption><span>è¡¨è¾¾å¼å±‚æ¬¡ç»“æ„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IExpression ä¸éœ€è¦æ˜¯ç±»ï¼Œå› ä¸ºå®ƒä¸ä¿å­˜çŠ¶æ€</span></span><br><span class="line"><span class="keyword">interface</span> IExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> BinaryExpression <span class="keyword">implements</span>  &#123;</span><br><span class="line">  <span class="keyword">readonly</span> a: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">readonly</span> b: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">    <span class="built_in">this</span>.b = b</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="built_in">eval</span>(): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> SumExpression <span class="keyword">extends</span> BinaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="built_in">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> MyExpression <span class="keyword">extends</span> BinaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a * <span class="built_in">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> UnaryExpression <span class="keyword">implements</span>  &#123;</span><br><span class="line">  <span class="keyword">readonly</span> a: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">a: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="built_in">eval</span>(): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> UnaryMinusExpression <span class="keyword">extends</span> UnaryExpression &#123;</span><br><span class="line">  <span class="built_in">eval</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="built_in">this</span>.a</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»„åˆæ•°æ®å’Œè¡Œä¸º"><a href="#ç»„åˆæ•°æ®å’Œè¡Œä¸º" class="headerlink" title="ç»„åˆæ•°æ®å’Œè¡Œä¸º"></a>ç»„åˆæ•°æ®å’Œè¡Œä¸º</h3><p>é‡å†™æˆ–æ‰©å±•è¡Œä¸ºï¼Œæ¯”ç»§æ‰¿æ›´å¥½ -&gt; ç»„åˆ</p>
<blockquote>
<p>åªè¦å¯èƒ½å°±ä¼˜å…ˆé€‰æ‹©<strong>ç»„åˆ</strong>è€Œä¸æ˜¯ç»§æ‰¿</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ç»§æ‰¿å’Œç»„åˆ-ä½¿ç”¨ä¸€ä¸ªShape</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Shape &#123;</span><br><span class="line">  id: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Point &#123;</span><br><span class="line">  x: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Circle <span class="keyword">extends</span> Shape &#123;</span><br><span class="line">  center: Point;</span><br><span class="line">  radius: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">id: <span class="built_in">string</span>, center: Point, radius: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">super</span>(id)</span><br><span class="line">    <span class="built_in">this</span>.center = center</span><br><span class="line">    <span class="built_in">this</span>.radius = radius</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"><a href="#ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™" class="headerlink" title="ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™"></a>ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</h4><p>ç»„åˆå’Œ <strong>æœ‰ä¸€ä¸ª</strong> å…³ç³»ï¼š ç»„åˆåœ¨å®¹å™¨ç±»å‹å’Œè¢«åŒ…å«ç±»å‹ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ª <strong>æœ‰ä¸€ä¸ª</strong> çš„å…³ç³»ã€‚å¦‚æœç±»å‹æ˜¯ <code>Circle</code>ï¼Œ è¢«åŒ…å«çš„ç±»å‹æ˜¯ <code>Point</code>ï¼Œé‚£ä¹ˆä»–ä»¬çš„å…³ç³»æ˜¯ <code>Circle</code>æœ‰ä¸€ä¸ª <code>Point</code></p>
<h4 id="å¤åˆç±»"><a href="#å¤åˆç±»" class="headerlink" title="å¤åˆç±»"></a>å¤åˆç±»</h4><p>å¯ä»¥æŠŠå¤åˆç±»çš„çŠ¶æ€çš„éƒ¨åˆ†å£°æ˜ä¸ºç§æœ‰æˆå‘˜ï¼Œå°è£…èµ·æ¥ï¼Œç„¶åä½¿ç”¨é¢å¤–çš„æ–¹æ³•æ¥å¢å¼ºè¿™ä¸ªå¤åˆç±»ï¼Œè®©è¿™äº›æ–¹æ³•æ¥è®¿é—®å®ç°ä¸­çš„ç§æœ‰æˆå‘˜ã€‚</p>
<figure class="highlight ts"><figcaption><span>å‘CEOæå‡ºé—®é¢˜</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CEO &#123;</span><br><span class="line">  isBusy(): <span class="built_in">boolean</span> &#123;&#125;</span><br><span class="line">  answer(question: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Department &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Budget &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Company &#123;</span><br><span class="line">  <span class="keyword">private</span> ceo: CEO = <span class="keyword">new</span> CEO();</span><br><span class="line">  <span class="keyword">private</span> departments: Department[] = []</span><br><span class="line">  <span class="keyword">private</span> budget: Budget = <span class="keyword">new</span> Budget()</span><br><span class="line">  askCEO(question: <span class="built_in">string</span>): <span class="built_in">string</span> | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.ceo.isBusy()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.ceo.answer(question)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å®ç°é€‚é…å™¨æ¨¡å¼"><a href="#å®ç°é€‚é…å™¨æ¨¡å¼" class="headerlink" title="å®ç°é€‚é…å™¨æ¨¡å¼"></a>å®ç°é€‚é…å™¨æ¨¡å¼</h4><p>é€‚é…å™¨æ¨¡å¼èƒ½å¤Ÿå…¼å®¹2ä¸ªä¸åŒçš„ç±»ï¼Œä¸”ä¸éœ€è¦ä¿®æ”¹å…¶ä¸­ä»»ä½•ä¸€ä¸ªç±»ã€‚ä¸æŠŠå‡ ä¸ªç»„ä»¶åˆå¹¶åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å°è£…ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶æä¾›å®ƒéœ€è¦çš„èƒ¶æ°´ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿä½œä¸ºå¦ä¸€ç§ç±»å‹ä½¿ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>ä¸€ä¸ªå¤–éƒ¨çš„å‡ ä½•åº“ï¼Œä½†æ˜¯ä¸é€‚åˆæˆ‘ä»¬çš„å¯¹è±¡æ¨¡å‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> GeometryLibrary &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> ICircle &#123;</span><br><span class="line">    getCenterX(): <span class="built_in">number</span>;</span><br><span class="line">    getCenterY(): <span class="built_in">number</span>;</span><br><span class="line">    getDiameter(): <span class="built_in">number</span>; <span class="comment">// è·å–ç›´å¾„</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// operations on ICircle omitted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>CircleAdapteré€‚é…å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°äº†åº“æœŸæœ›çš„ICircleæ¥å£</span></span><br><span class="line"><span class="keyword">class</span> CircleAdapter <span class="keyword">implements</span> GeometryLibrary.ICircle &#123;</span><br><span class="line">  <span class="keyword">private</span> circle: Circle;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">circle: Circle</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.circle = circle</span><br><span class="line">  &#125;</span><br><span class="line">  getCenterX(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.x;</span><br><span class="line">  &#125;</span><br><span class="line">  getCenterY(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.y;</span><br><span class="line">  &#125;</span><br><span class="line">  getDiameter(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.circle.center.radius * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•æ•°æ®å’Œè¡Œä¸º"><a href="#æ‰©å±•æ•°æ®å’Œè¡Œä¸º" class="headerlink" title="æ‰©å±•æ•°æ®å’Œè¡Œä¸º"></a>æ‰©å±•æ•°æ®å’Œè¡Œä¸º</h3><h4 id="ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º"><a href="#ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º" class="headerlink" title="ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º"></a>ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º</h4><h4 id="ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º"><a href="#ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º" class="headerlink" title="ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º"></a>ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º</h4><p>æ··å…¥èƒ½å¤Ÿå‡å°‘æ ·æ¿ä»£ç ï¼Œå…è®¸æ··å…¥ä¸åŒçš„è¡Œä¸ºæ¥æ„æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»¥åŠåœ¨å¤šä¸ªç±»å‹ä¸­é‡ç”¨å…±æœ‰çš„è¡Œä¸ºã€‚æœ€å‘µå‘µå®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹(cross-cutting concern): ç¨‹åºä¸­å½±å“å…¶ä»–å…³æ³¨ç‚¹å•æ•°ä¸å®¹æ˜“è¢«åˆ†è§£çš„æ–¹é¢ï¼Œä¾‹å¦‚å¼•ç”¨è®¡æ•°ï¼Œç¼“å­˜ï¼ŒæŒä¹…åŒ–ç­‰ã€‚</p>
<blockquote>
<p>æ··å…¥ï¼šæ··å…¥é€šå¸¸æ˜¯ä½¿ç”¨å¤šé‡ç»§æ‰¿å®ç°çš„ï¼ˆä¸æœ¬ç« å¼€å§‹çš„<strong>æ˜¯ä¸€ä¸ª</strong>ç»éªŒå‡†åˆ™å‘ç”Ÿäº†å†²çªï¼‰</p>
</blockquote>
<p>ä»å¤šé‡ç»§æ‰¿çš„è§’åº¦çœ‹ï¼šåˆ›å»ºä¸€ä¸ª <strong>IHunter</strong> ç±»æ¥å®ç°æ•çŒè¡Œä¸ºï¼Œå¹¶è®©æ‰€æœ‰æ•é£Ÿæ€§åŠ¨ç‰©æ´¾ç”Ÿè‡ªè¿™ä¸ªç±»ï¼Œè¿™æ · <code>Cat</code>æ—¢æ˜¯<code>Animal</code>åˆæ˜¯<code>Hunter</code>ï¼Œæ··å…¥ä¸ç»§æ‰¿å¹¶ä¸ç›¸åŒï¼Œå¯ä»¥åªåˆ›å»ºä¸€ä¸ª<code>HunterBehavaior</code>è¡Œä¸ºç±»æ¥å®ç°æ•çŒè¡Œä¸ºï¼Œå¹¶è®©æ‰€æœ‰æ•é£Ÿæ€§åŠ¨ç‰©åŒ…å«è¿™ç§è¡Œä¸ºã€‚</p>
<blockquote>
<p>æ··å…¥ä¸åŒ…å«å…³ç³»ï¼šæ··å…¥åœ¨ä¸€ä¸ªç±»å‹ä¸å…¶æ··å…¥ç±»å‹ä¹‹é—´å»ºç«‹ä¸€ä¸ªåŒ…å«å…³ç³»ï¼Œä¸ <strong>æ˜¯ä¸€ä¸ª</strong> å…³ç³»ä¸åŒ</p>
</blockquote>
<h4 id="TS-ä¸­çš„æ··å…¥"><a href="#TS-ä¸­çš„æ··å…¥" class="headerlink" title="TS ä¸­çš„æ··å…¥"></a>TS ä¸­çš„æ··å…¥</h4><p>ä½¿ç”¨ <code>extend()</code>æ³›å‹å‡½æ•°ï¼Œè®©è¯¥å‡½æ•°æ¥å—2ä¸ªä¸åŒç±»å‹çš„å®ä¾‹ï¼Œå¹¶æŠŠç¬¬äºŒä¸ªå®ä¾‹çš„æ‰€æœ‰æˆå‘˜å¤åˆ¶åˆ°ç¬¬ä¸€ä¸ªå®ä¾‹ä¸­ã€‚</p>
<blockquote>
<p><code>&amp;</code> äº¤å‰ç±»å‹ï¼Œäº¤é›†</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ä¸€ä¸ªå®ä¾‹çš„æˆå‘˜æ‰©å±•å¦ä¸€ä¸ªå®ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>&lt;<span class="title">First</span>, <span class="title">Second</span>&gt;(<span class="params">first: First, second: Second</span>): <span class="title">First</span> &amp; <span class="title">Second</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result: unknown = &#123;&#125;</span><br><span class="line">  <span class="comment">// é¦–å…ˆï¼Œè¿­ä»£ç¬¬ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æˆå‘˜ï¼ŒæŠŠä»–ä»¬å¤åˆ¶åˆ°resultä¸­</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> prop <span class="keyword">in</span> first) &#123;</span><br><span class="line">    <span class="keyword">if</span> (first.hasOwnProperty(prop)) &#123;</span><br><span class="line">      (&lt;First&gt;result)[prop] = first[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¥ä¸‹æ¥ï¼Œå¯¹ç¬¬äºŒä¸ªç±»å‹çš„æˆå‘˜åšç›¸åŒçš„å¤„ç†</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> prop <span class="keyword">in</span> second) &#123;</span><br><span class="line">    <span class="keyword">if</span> (second.hasOwnProperty(prop)) &#123;</span><br><span class="line">      (&lt;Second&gt;result)[prop] = second[prop]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &lt;First &amp; Second&gt;result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ··å…¥è¡Œä¸º</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å®šä¹‰ Catï¼Œ è€Œæ˜¯å®šä¹‰ å–µå–µè¡Œä¸º çš„å® ç‰©ç±»å‹</span></span><br><span class="line"><span class="comment">// è±¹å­ï¼ŒçŒ« éƒ½å¯ä»¥å–µå–µ</span></span><br><span class="line"><span class="comment">// ç”±äºæ²¡æœ‰æ‰©å±•æ•çŒè¡Œä¸ºï¼Œæ‰€ä»¥è¿˜ä¸æ˜¯ Cat</span></span><br><span class="line"><span class="keyword">class</span> MeowingPet <span class="keyword">extends</span> Pet &#123;</span><br><span class="line">  meow(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> HunterBehavior &#123;</span><br><span class="line">  track(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">  stalk(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">  pounce(): <span class="built_in">void</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Cat = MeowingPet &amp; HunterBehavior</span><br><span class="line"><span class="keyword">const</span> fluffy: Cat = extend(<span class="keyword">new</span> MeowingPet(), <span class="keyword">new</span> HunterBehavior())</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><figcaption><span>è·Ÿè¸ªå¿«é€’å•å’ŒåŒ…è£¹çš„çŠ¶æ€</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Letter &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Package &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Tracking &#123;</span><br><span class="line">  <span class="keyword">private</span> status: <span class="built_in">string</span>;</span><br><span class="line">  constructot(status: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = status</span><br><span class="line">  &#125;</span><br><span class="line">  updateStatus(status) &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = status</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> TrackingLetter = Letter &amp; Tracking</span><br><span class="line"><span class="keyword">type</span> TrackingTracking = Package &amp; Tracking</span><br></pre></td></tr></table></figure>

<h3 id="çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ"></a>çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ</h3><h4 id="1-å’Œç±»å‹"><a href="#1-å’Œç±»å‹" class="headerlink" title="1.å’Œç±»å‹"></a>1.å’Œç±»å‹</h4><p>å¦‚æœéœ€è¦ç”¨ç›¸åŒçš„æ–¹å¼ä¼ é€’ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæˆ–è€…æŠŠä»–ä»¬æ”¾åˆ°ä¸€ä¸ªå…¬å…±çš„é›†åˆä¸­ï¼Œä»–ä»¬å¹¶éå¿…é¡»å®ç°ç›¸åŒçš„æ¥å£ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå…¬å…±çš„åŒäº²ç±»å‹ã€‚ç›¸åï¼Œå¯ä»¥åˆ©ç”¨å’Œç±»å‹ï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨ç±»å‹ä¹‹é—´å»ºç«‹ä»»ä½•å…³ç³»è€Œè·å¾—ç›¸åŒçš„è¡Œä¸ºã€‚</p>
<h4 id="2-å‡½æ•°å¼ç¼–ç¨‹"><a href="#2-å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="2.å‡½æ•°å¼ç¼–ç¨‹"></a>2.å‡½æ•°å¼ç¼–ç¨‹</h4><p>é¿å…äº†ç»´æŠ¤çŠ¶æ€ï¼Œç›´æ¥è®¡ç®—è¿”å›ï¼Œä¹Ÿä¸éœ€è¦æ”¹å˜ä»»ä½•çŠ¶æ€ï¼Œ(çŒœï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥çª¥è§ï¼šæ—¢ä¸éœ€è¦ç»´æŠ¤çŠ¶æ€ä¹Ÿä¸éœ€è¦æ”¹å˜çŠ¶æ€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç° <code>immutable</code>?ï¼Œæ‰€æœ‰å®å‚å›ºå®šæˆä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Ÿ)</p>
<h4 id="3-æ³›å‹ç¼–ç¨‹"><a href="#3-æ³›å‹ç¼–ç¨‹" class="headerlink" title="3.æ³›å‹ç¼–ç¨‹"></a>3.æ³›å‹ç¼–ç¨‹</h4><p>å°†åœ¨ç¬¬ä¹ç« ï¼Œç¬¬åç« æ·±å…¥ä»‹ç»ã€‚</p>
<h2 id="ç¬¬ä¹ç« -æ³›å‹æ•°æ®ç»“æ„"><a href="#ç¬¬ä¹ç« -æ³›å‹æ•°æ®ç»“æ„" class="headerlink" title="ç¬¬ä¹ç«  - æ³›å‹æ•°æ®ç»“æ„"></a>ç¬¬ä¹ç«  - æ³›å‹æ•°æ®ç»“æ„</h2><p>è¦ç‚¹ï¼šåˆ†ç¦»å…³æ³¨ç‚¹ï¼›ä¸ºæ•°æ®å¸ƒå±€ä½¿ç”¨æ³›å‹æ•°æ®ç»“æ„ï¼›éå†ä»»ä½•æ•°æ®ç»“æ„ï¼›è®¾ç½®æ•°æ®å¤„ç†ç®¡é“ï¼›</p>
<h3 id="è§£è€¦å…³æ³¨ç‚¹"><a href="#è§£è€¦å…³æ³¨ç‚¹" class="headerlink" title="è§£è€¦å…³æ³¨ç‚¹"></a>è§£è€¦å…³æ³¨ç‚¹</h3><figure class="highlight ts"><figcaption><span>getNumbers()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TransformFunction = <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumbers</span>(<span class="params">transform: TransformFunction</span>): <span class="title">number</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä¸éœ€è¦è½¬æ¢ï¼Œä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„doNothing</span></span><br><span class="line"><span class="comment">// doNothing æ˜¯æ’ç­‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doNothing</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumbers</span>(<span class="params">transform: TransformFunction = doNothing</span>): <span class="title">number</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>assembleWidgets()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PluckFunction = <span class="function">(<span class="params">widgets: Widget[]</span>) =&gt;</span> Widget[];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä¸éœ€è¦è½¬æ¢ï¼Œä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„ pluckAll</span></span><br><span class="line"><span class="comment">// pluckAll æ˜¯æ’ç­‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pluckAll</span>(<span class="params">widgets: Widget[]</span>): <span class="title">Widget</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> widgets;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction = pluckAll</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>pluckAll</code> å’Œ <code>doNothing</code> éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯ç±»å‹ä¸åŒï¼šéƒ½æ¥å—ä¸€ä¸ªå®å‚ï¼Œä¸åšä»»ä½•å¤„ç†å°±è¿”å›è¯¥å®å‚ï¼Œ2ä¸ªéƒ½æ˜¯æ’ç­‰å‡½æ•°ã€‚</p>
<blockquote>
<p>ä»£æ•°ä¸­å®šä¹‰çš„æ’ç­‰å‡½æ•°: <code>f(x) = x</code></p>
</blockquote>
<h4 id="å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°"><a href="#å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°" class="headerlink" title="å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°"></a>å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°</h4><figure class="highlight ts"><figcaption><span>ç®€å•çš„å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•å®ç”¨ any ç±»å‹</span></span><br><span class="line"><span class="comment">// å½“å¼€å§‹ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šå¤±å»ç±»å‹å®‰å…¨ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>(<span class="params">value: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params">x: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * x</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿è¡Œæ—¶å¤±è´¥âŒ</span></span><br><span class="line">square(identity(<span class="string">&#x27;hello&#x27;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç±»å‹å‚æ•°ï¼šæ³›å‹åç§°æ ‡å¿—ç¬¦</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>æ³›å‹æ’ç­‰å‡½æ•°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¼–è¯‘å™¨è¶³å¤Ÿåªèƒ½ï¼Œä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®š T æ˜¯ä»€ä¹ˆç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNumnbers</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  transform: TransformFunction = identity</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">number</span>[] </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assembleWidgets</span>(<span class="params">pluck: PluckFunction = identity</span>): <span class="title">AssembleWidget</span>[] </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¼–è¯‘âŒ</span></span><br><span class="line">square(identity(<span class="string">&#x27;hello&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h4 id="å¯é€‰ç±»å‹"><a href="#å¯é€‰ç±»å‹" class="headerlink" title="å¯é€‰ç±»å‹"></a>å¯é€‰ç±»å‹</h4><p>æ³›å‹ç±» <code>Optional</code> ç±»å‹ï¼šå½“å¤„ç†æ²¡æœ‰èµ‹å€¼çš„æƒ…å†µæ—¶ï¼Œä½¿ç”¨çš„é€»è¾‘ä¸è¯¥å€¼çš„å®é™…ç±»å‹æ²¡æœ‰å…³ç³»ã€‚<code>Optional</code>å¯ä»¥å­˜å‚¨å…¶ä»–ä»»ä½•ç±»å‹ã€‚å¯¹ <code>Optional</code> çš„ä¿®æ”¹ä¸ä¼šå½±å“ <code>T</code>ï¼Œè€Œå¯¹ <code>T</code> çš„ä¿®æ”¹ä¹Ÿä¸ä¼šå½±å“ <code>Optional</code>ã€‚è¿™æ˜¯ <strong><em>æ³›å‹ç¼–ç¨‹</em></strong> æä¸ºå¼ºå¤§çš„ç‰¹å¾ã€‚</p>
<h4 id="æ³›å‹ç±»å‹"><a href="#æ³›å‹ç±»å‹" class="headerlink" title="æ³›å‹ç±»å‹"></a>æ³›å‹ç±»å‹</h4><p>æ³›å‹ç±»å‹ï¼šæŒ‡å‚æ•°åŒ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹çš„æ³›å‹å‡½æ•°ï¼Œç±»ã€æ¥å£ç­‰ã€‚èƒ½è®©ä»£ç çš„ç»„ä»¶åŒ–ç¨‹åº¦æ›´é«˜ã€‚</p>
<h4 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Box&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">readonly</span> value: T;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UnBox</span>&lt;<span class="title">T</span>&gt;(<span class="params">boxed: Box&lt;T&gt;</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> boxed.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ³›å‹æ•°æ®å¸ƒå±€"><a href="#æ³›å‹æ•°æ®å¸ƒå±€" class="headerlink" title="æ³›å‹æ•°æ®å¸ƒå±€"></a>æ³›å‹æ•°æ®å¸ƒå±€</h3><figure class="highlight ts"><figcaption><span>æ•°å­—äºŒå‰æ ‘&å­—ç¬¦ä¸²é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°å­—äºŒå‰æ ‘</span></span><br><span class="line"><span class="keyword">class</span> NumberBinaryTreeNode &#123;</span><br><span class="line">  value: <span class="built_in">number</span>;</span><br><span class="line">  left: NumberBinaryTreeNode | <span class="literal">undefined</span>;</span><br><span class="line">  right: NumberBinaryTreeNode | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²é“¾è¡¨</span></span><br><span class="line"><span class="keyword">class</span> StringLinkedListNode &#123;</span><br><span class="line">  value: <span class="built_in">string</span>;</span><br><span class="line">  next: StringLinkedListNode | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ³›å‹æ•°æ®ç»“æ„"><a href="#æ³›å‹æ•°æ®ç»“æ„" class="headerlink" title="æ³›å‹æ•°æ®ç»“æ„"></a>æ³›å‹æ•°æ®ç»“æ„</h4><p>2ä¸ªä¾‹å­å¯ä»¥çœ‹å‡º <code>NumberBinaryTreeNode</code> &amp; <code>StringLinkedListNode</code>åœ¨æ•°æ®ç»“æ„å’Œç±»å‹ä¸Šäº§ç”Ÿäº†ä¸å¿…è¦çš„è€¦åˆã€‚å½“æœ‰æ–°çš„ <code>StringBinaryTreeNode</code> æ—¶ä¼šæœ‰å†—ä½™ä»£ç ã€‚</p>
<figure class="highlight ts"><figcaption><span>æ³›å‹äºŒå‰æ ‘</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>æ³›å‹é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">   next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"><a href="#ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"></a>ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„</h4><h5 id="åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š"><a href="#åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š" class="headerlink" title="åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š"></a>åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š</h5><ol>
<li>æ•°æ®è‡ªèº«ï¼Œæ•°æ®ç»“æ„åŒ…å«æ•°æ®ï¼›</li>
<li>æ•°æ®çš„å½¢çŠ¶ï¼šä¾‹å¦‚äºŒå‰æ ‘ï¼Œä»¥åˆ†å±‚æ–¹å¼å¸ƒå±€æ•°æ®ï¼Œæ¯å±‚æœ€å¤š2ä¸ª children nodeã€‚</li>
<li>ä¸€ç»„ä¿ç•™æ˜Ÿåº§çš„æ“ä½œï¼šæ·»åŠ æˆ–ç§»é™¤å…ƒç´ ã€‚</li>
</ol>
<h5 id="2ä¸ªå…³æ³¨ç‚¹ï¼š"><a href="#2ä¸ªå…³æ³¨ç‚¹ï¼š" class="headerlink" title="2ä¸ªå…³æ³¨ç‚¹ï¼š"></a>2ä¸ªå…³æ³¨ç‚¹ï¼š</h5><ol>
<li>æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®çš„ç±»å‹ï¼Œå®ä¾‹ä¿å­˜çš„å®é™…å€¼</li>
<li>æ•°æ®çš„å½¢çŠ¶å’Œä¿ç•™å½¢çŠ¶çš„æ“ä½œã€‚</li>
</ol>
<h4 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°æ ˆï¼Œåè¿›å…ˆå‡º</span></span><br><span class="line"><span class="keyword">class</span> Stack&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> value: T[] = [];</span><br><span class="line">  <span class="keyword">public</span> push(v: T): T[] &#123;</span><br><span class="line">    <span class="built_in">this</span>.value.push(v)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> pop(): T | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value?.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> p = <span class="built_in">this</span>.value.pop()</span><br><span class="line">      <span class="keyword">return</span> p</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> peek(): T | <span class="literal">undefined</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value?.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.value[<span class="built_in">this</span>.value.length - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç°å…ƒç»„</span></span><br><span class="line"><span class="keyword">class</span> Pair&lt;T, U&gt; &#123;</span><br><span class="line">  <span class="keyword">readonly</span> first: T;</span><br><span class="line">  <span class="keyword">readonly</span> second: U;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">f: T, s: U</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.first = f;</span><br><span class="line">    <span class="built_in">this</span>.second = s;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="éå†æ•°æ®ç»“æ„"><a href="#éå†æ•°æ®ç»“æ„" class="headerlink" title="éå†æ•°æ®ç»“æ„"></a>éå†æ•°æ®ç»“æ„</h3><blockquote>
<p>ä¸­åºéå†ï¼šé€’å½’åœ°æ‰¾åˆ°æœ€æ·±å¤„å·¦ä¾§èŠ‚ç‚¹ï¼Œç„¶åä¾æ¬¡éå†åŒäº²èŠ‚ç‚¹ï¼Œå³ä¾§èŠ‚ç‚¹ï¼Œæœ€å·¦ä¾§child treeéå†ç»“æŸåè®¿é—®è¯¥ child tree çš„åŒäº²èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®å³ä¾§èŠ‚ç‚¹</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>ä¸­åºæ‰“å°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printInOrder</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(roor.left) &#123;</span><br><span class="line">    printInOrder(root.left)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(root.value)</span><br><span class="line">  <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">    printInOrder(root.right)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>)</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>)</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line">printInOrder(rrot)</span><br><span class="line"><span class="comment">// 2 3 1 4</span></span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨è¿­ä»£å™¨"><a href="#ä½¿ç”¨è¿­ä»£å™¨" class="headerlink" title="ä½¿ç”¨è¿­ä»£å™¨"></a>ä½¿ç”¨è¿­ä»£å™¨</h4><p>æŠŠéå†é€»è¾‘ç§»åŠ¨åˆ°è‡ªå·±çš„ç»„ä»¶ä¸­ã€‚</p>
<blockquote>
<p>è¿­ä»£å™¨ï¼šèƒ½å¤Ÿç”¨æ¥éå†æ•°æ®ç»“æ„çš„ä¸€ä¸ªå¯¹è±¡ã€‚æä¾›äº†ä¸€ä¸ªæ ‡å‡†ç»“æ„ï¼Œå°†æ•°æ®ç»“æ„çš„å®é™…å½¢çŠ¶å¯¹å®¢æˆ·çš„éšè—èµ·æ¥ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>è‡ªå®šä¹‰è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¿­ä»£å™¨ç»“æœ</span></span><br><span class="line"><span class="keyword">type</span> IteratorResult&lt;T&gt; = &#123;</span><br><span class="line">  done: <span class="built_in">boolean</span>;</span><br><span class="line">  value: T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  next(): IteratorResult&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// äºŒå‰æ ‘è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">// è¿™ç§å®ç°æ–¹å¼å¹¶ä¸æ˜¯æœ€é«˜æ•ˆçš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é˜Ÿåˆ—çš„å…ƒç´ æ•°é‡å’Œæ ‘çš„èŠ‚ç‚¹æ•°é‡ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ ‘çš„å±‚æ¬¡å¾ˆæ·±ï¼Œä¼šéœ€è¦å ç”¨è¾ƒå¤§çš„å†…å­˜æ¥å­˜å‚¨è¿™ä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">// åé¢ä¼šæœ‰æ›´å¥½çš„å®ç°ï¼Œå…ˆä½¿ç”¨è¿™ä¸ªä½œä¸ºç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">class</span> BinaryTreeIterator&lt;T&gt; <span class="keyword">implements</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> values: T[]; <span class="comment">// å€¼çš„é˜Ÿåˆ—</span></span><br><span class="line">  <span class="keyword">private</span> root: BinaryTreeNode&lt;T&gt;;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.values = [];</span><br><span class="line">    <span class="built_in">this</span>.root = root;</span><br><span class="line">    <span class="built_in">this</span>.inOrder(root) <span class="comment">// æ„é€ å‡½æ•°è¿›è¡Œä¸­åºéå†æ¥å¡«å……å€¼çš„é˜Ÿåˆ—</span></span><br><span class="line">  &#125;</span><br><span class="line">  next(): IteratorResult&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// å¯¹ next() çš„æ¯æ¬¡è°ƒç”¨å°†é€šè¿‡è°ƒç”¨ shift() ä»é˜Ÿåˆ—ä¸­å–å‡ºå€¼</span></span><br><span class="line">    <span class="keyword">const</span> result: T | <span class="literal">undefined</span> = <span class="built_in">this</span>.values.shift()</span><br><span class="line">    <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        done: <span class="literal">true</span>,</span><br><span class="line">        value: result</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      done: <span class="literal">false</span>,</span><br><span class="line">      value: result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> inOrder(node: BinaryTreeNode&lt;T&gt;): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.left) &#123;</span><br><span class="line">      <span class="built_in">this</span>.inOrder(node.left)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.values.push(node.value)</span><br><span class="line">    <span class="keyword">if</span> (node.right) &#123;</span><br><span class="line">      <span class="built_in">this</span>.inOrder(node.right)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>é“¾è¡¨è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListIterator&lt;T&gt; <span class="keyword">implements</span> Iterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> head: LinkedListNode&lt;T&gt;;</span><br><span class="line">  <span class="keyword">private</span> current: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">head: LinkedListNode&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.head = head</span><br><span class="line">    <span class="built_in">this</span>.current = head</span><br><span class="line">  &#125;</span><br><span class="line">  next():  IteratorResult&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.current) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        done: <span class="literal">true</span>,</span><br><span class="line">        value: <span class="built_in">this</span>.head.value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> result: T = <span class="built_in">this</span>.current.value</span><br><span class="line">    <span class="built_in">this</span>.current = <span class="built_in">this</span>.current.next</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      done: <span class="literal">false</span>,</span><br><span class="line">      value: result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„print()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// print()æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterator: Iterator&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ next åˆå§‹åŒ–ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result.value)</span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„contains()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// print()æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterator: Iterator&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ next åˆå§‹åŒ–ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.value === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿­ä»£å™¨æ˜¯æŠŠæ•°æ®ç»“æ„å’Œç®—æ³•è¿æ¥èµ·æ¥çš„èƒ¶æ°´ï¼Œä½¿å¾—è¿™ç§è§£è€¦èƒ½å¤Ÿå®ç°ã€‚</p>
<h4 id="æµæ°´çº¿åŒ–è¿­ä»£ä»£ç "><a href="#æµæ°´çº¿åŒ–è¿­ä»£ä»£ç " class="headerlink" title="æµæ°´çº¿åŒ–è¿­ä»£ä»£ç "></a>æµæ°´çº¿åŒ–è¿­ä»£ä»£ç </h4><p>TSä¸­å·²ç»é¢„å®šä¹‰äº† <code>IteratorResult&lt;T&gt;</code> å’Œ <code>Iterator&lt;T&gt;</code> ç±»å‹</p>
<figure class="highlight ts"><figcaption><span>å¯è¿­ä»£çš„æ¥å£</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">// [Symbol.iterator] æ˜¯ TS ç‰¹æ®Šè¯­æ³•ï¼Œåªæ˜¯ä»£è¡¨ä¸€ä¸ªç‰¹æ®Šåç§°ã€‚</span></span><br><span class="line">  <span class="comment">// ä¸ å‰æ–‡ä¸­å®ç° Normal Subtype æŠ€å·§ç±»ä¼¼</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>å¯è¿­ä»£çš„é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; <span class="keyword">implements</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šè¿‡åœ¨é“¾è¡¨ä¸­åˆ›å»º LinkedListIterator çš„æ–°å®ä¾‹æ¥å®ç° Iterable&lt;T&gt; æ¥å£</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LinkedListIterator&lt;T&gt;(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨TSä¸­ï¼ŒIterable æ•°æ®ç»“æ„å…è®¸ä½¿ç”¨ <code>for...of</code>è¯­æ³•ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'ä½¿ç”¨Iteratorå®å‚çš„print()å’Œcontains()'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterator: Iterator&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result.value)</span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterator: Iterator&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: IteratorResult&lt;T&gt; = iterator.next()</span><br><span class="line">  <span class="keyword">while</span>(!result.done) &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.value === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    result = iterator.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>'ä½¿ç”¨ Iterable å®å‚çš„print()å’Œcontains()'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>&lt;<span class="title">T</span>&gt;(<span class="params">iterable: Iterable&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">contains</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T, iterable: Iterable&lt;T&gt;</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="comment">// return å¯ä»¥é€€å‡º for...of å¾ªç¯</span></span><br><span class="line">    <span class="keyword">if</span> (item === value) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„äºŒå‰æ ‘è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">inOrderIterator</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>):<span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIterator(root.left)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">yield</span> root.value</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIterator(root.right)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„é“¾è¡¨è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">LinkedListIterator</span>&lt;<span class="title">T</span>&gt;(<span class="params">head: LinkedListNode&lt;T&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> current: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span> = head;</span><br><span class="line">  <span class="keyword">while</span>(current) &#123;</span><br><span class="line">    <span class="keyword">yield</span> current.value;</span><br><span class="line">    current = current.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç”Ÿæˆå™¨çš„å¯è¿­ä»£é“¾è¡¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListNode&lt;T&gt; <span class="keyword">implements</span> Iterable&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  next: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// [Symbol.iterator]() åªæ˜¯è¿”å› LinkedListIterator çš„ç»“æœ</span></span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator](): Iterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> LinkedListIterator(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-3"><a href="#ä¹ é¢˜-3" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><figcaption><span>æ³›å‹äºŒå‰æ ‘çš„å…ˆåºéå†&é¡ºåºéå†æ•°ç»„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³›å‹äºŒå‰æ ‘ç»“æ„</span></span><br><span class="line"><span class="keyword">class</span> BinaryTreeNode&lt;T&gt; &#123;</span><br><span class="line">  value: T;</span><br><span class="line">  left: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  right: BinaryTreeNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">value: T</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">inOrderIteratorFirst</span>&lt;<span class="title">T</span>&gt;(<span class="params">root: BinaryTreeNode&lt;T&gt;</span>):<span class="title">inOrderIteratorFirst</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> root.value</span><br><span class="line">    <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIteratorFirst(root.left)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> inOrderIteratorFirst(root.right)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">IteratorArr</span>&lt;<span class="title">T</span>&gt;(<span class="params">array: T[]</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> array) &#123;</span><br><span class="line">    <span class="keyword">yield</span> item;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="headerlink" title="æ•°æ®æµ"></a>æ•°æ®æµ</h3><blockquote>
<p>è¿­ä»£å™¨å¹¶éæ˜¯æœ‰é™çš„</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>æ— é™éšæœºæ•°æ®æµ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ— é™éšæœºæ•°æ®æµ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generateRandomNumbers</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="built_in">Math</span>.random()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨æµä¸­çš„æ•°å­—</span></span><br><span class="line"><span class="keyword">let</span> iter: IterableIterator&lt;<span class="built_in">number</span>&gt; = generateRandomNumbers()</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨ çš„è°ƒç”¨æ–¹å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br><span class="line"><span class="built_in">console</span>.log(iter.next().value)</span><br></pre></td></tr></table></figure>

<h4 id="å¤„ç†ç®¡é“"><a href="#å¤„ç†ç®¡é“" class="headerlink" title="å¤„ç†ç®¡é“"></a>å¤„ç†ç®¡é“</h4><p>å¤„ç†ç®¡é“çš„ç»„ä»¶æ˜¯ä¸€äº›å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå®å‚ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™ç§å‡½æ•°å¯ä»¥é“¾æ¥èµ·æ¥ã€‚è¿™ç§æ¨¡å¼æ˜¯ååº”å¼ç¼–ç¨‹çš„åŸºç¡€ã€‚</p>
<blockquote>
<p>ç”±å‰æ–‡å®ç° <code>IterableIterator&lt;T&gt;</code> æ–¹å¼å¯çŸ¥ï¼Œ<code>IterableIterator&lt;T&gt;</code> æ˜¯ <code>Iterable&lt;T&gt;</code> ç±»å‹çš„ subtypeï¼Œ å‡½æ•°å®å‚æ˜¯åŒå‘åå˜çš„ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥ä¼ å…¥ <code>Iterable&lt;T&gt;</code></p>
</blockquote>
<p>ç®¡é“æ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œå¯ä»¥é€ä¸ªï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰å¤„ç†å€¼</p>
<figure class="highlight ts"><figcaption><span>square & take & ç®¡é“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">square</span>(<span class="params">iter: Iterable&lt;<span class="built_in">number</span>&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">yield</span> value ** <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">take</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, n: <span class="built_in">number</span></span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n-- &lt;= <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">yield</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> values: IterableIterator&lt;<span class="built_in">number</span>&gt; = take(square(generateRandomNumbers()), <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> values) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»ƒä¹  å®ç° drop ä¸¢å¼ƒä¸€ä¸ªè¿­ä»£å™¨çš„å‰nä¸ªå…ƒç´ è€Œè¿”å›å…¶ä½™å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">drop</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, n: <span class="built_in">number</span></span>): <span class="title">IterableIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [v, k] <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n-- &gt; <span class="number">0</span>) <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">yield</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">count</span>(<span class="params"></span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> n: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    n++</span><br><span class="line">    <span class="keyword">yield</span> n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> take(drop(count(), <span class="number">5</span>), <span class="number">5</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬åç« -æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨"><a href="#ç¬¬åç« -æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨" class="headerlink" title="ç¬¬åç«  - æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨"></a>ç¬¬åç«  - æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨</h2><h3 id="æ›´å¥½çš„-map-ã€filter-å’Œreduce"><a href="#æ›´å¥½çš„-map-ã€filter-å’Œreduce" class="headerlink" title="æ›´å¥½çš„ map()ã€filter()å’Œreduce()"></a>æ›´å¥½çš„ <code>map()</code>ã€<code>filter()</code>å’Œ<code>reduce()</code></h3><figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¿­ä»£å™¨çš„ map & filter & reduce</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åº”ç”¨åˆ°ä»»ä½• Iterable&lt;T&gt;,è€Œä¸åªæ˜¯æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">map</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, func: (item: T) =&gt; U</span>):<span class="title">IterableIterator</span>&lt;<span class="title">U</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">yield</span> func(value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// pred=è°“è¯</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">filter</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, pred: (item: T) =&gt; <span class="built_in">boolean</span></span>):<span class="title">IterableIterator</span>&lt;<span class="title">U</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(value)) &#123;</span><br><span class="line">      <span class="keyword">yield</span> func(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">reduce</span>&lt;<span class="title">T</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;, init: T, op: (x: T, y: T) =&gt; T</span>):<span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: T = init</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    result=op(result, value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="filter-reduce-ç®¡é“"><a href="#filter-reduce-ç®¡é“" class="headerlink" title="filter()/reduce()ç®¡é“"></a><code>filter()/reduce()ç®¡é“</code></h4><p>ä»ä¸€ä¸ªäºŒå‰æ ‘ä¸­å–å‡ºå¶æ•°å¹¶å¯¹å®ƒä»¬æ±‚å’Œï¼Œä½¿ç”¨ç¬¬ä¹ç« çš„ <code>BinaryTreeNode&lt;T&gt;</code>ï¼Œé‡‡ç”¨ä¸­åºéå†ï¼Œå¹¶é“¾æ¥åˆ°ä¸€ä¸ªå¶æ•°è¿‡æ»¤å‡½æ•°å’Œä½¿ç”¨åŠ æ³•æ“ä½œçš„reduce</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//    2     4</span></span><br><span class="line"><span class="comment">//     3</span></span><br><span class="line"><span class="comment">// ä¸­åºéå†æ‰“å°ç»“æœï¼š2 3 1 4</span></span><br><span class="line"><span class="keyword">const</span> result: <span class="built_in">number</span> = reduce(filter(inOrderIterator(root), <span class="function">(<span class="params">value</span>) =&gt;</span> value % <span class="number">2</span> == <span class="number">0</span>), <span class="number">0</span>, <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-4"><a href="#ä¹ é¢˜-4" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥æ‰€æœ‰éç©ºå­—ç¬¦ä¸²ï¼Œå¤„ç† string ç±»å‹çš„ä¸€ä¸ªå¯è¿­ä»£ç»“æ„</span></span><br><span class="line"><span class="comment">// reduce + filter</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatStrAndFilterEmpty</span>(<span class="params">iter: Iterable&lt;<span class="built_in">string</span>&gt;</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> reduce(filter(iter, <span class="function">(<span class="params">value</span>) =&gt;</span> value.length &gt; <span class="number">0</span>), <span class="string">&#x27;&#x27;</span>, <span class="function">(<span class="params">x: <span class="built_in">string</span>, y: <span class="built_in">string</span></span>) =&gt;</span> x + y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€‰æ‹©æ‰€æœ‰çš„å¥‡æ•°å¹¶æ±‚å¹³æ–¹ï¼Œå¤„ç† number ç±»å‹çš„ä¸€ä¸ªå¯è¿­ä»£ç»“æ„</span></span><br><span class="line"><span class="comment">// map + filter</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">squareOdds</span>(<span class="params">iter: Iterable&lt;<span class="built_in">number</span>&gt;</span>): <span class="title">IterableIterator</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> map(filter(iter, <span class="function">(<span class="params">value</span>) =&gt;</span> value % <span class="number">2</span> == <span class="number">1</span>), <span class="function">(<span class="params">x</span>) =&gt;</span> x * x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨ç®—æ³•"><a href="#å¸¸ç”¨ç®—æ³•" class="headerlink" title="å¸¸ç”¨ç®—æ³•"></a>å¸¸ç”¨ç®—æ³•</h3><p>å®ç°æµç•…ç®¡é“ï¼šå°è£…æ›´å¥½çš„æµç•…çš„å¯è¿­ä»£ç»“æ„</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> FluentIterable&lt;T&gt; &#123;</span><br><span class="line">  iter: Iterable&lt;T&gt;;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">iter: Iterable&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.iter = iter</span><br><span class="line">  &#125;</span><br><span class="line">  map&lt;U&gt;(func: <span class="function">(<span class="params">item: T</span>) =&gt;</span> U): FluentIterable&lt;U&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.mapImpl(func))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *mapImpl&lt;U&gt;(func: <span class="function">(<span class="params">item: T</span>) =&gt;</span> U): IterableIterator&lt;U&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">yield</span> func(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  filter&lt;U&gt;(pred: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="built_in">boolean</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.filterImpl(pred))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *filterImpl(pred: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="built_in">boolean</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (pred(value)) &#123;</span><br><span class="line">        <span class="keyword">yield</span> value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ take()</span></span><br><span class="line">  take&lt;T&gt;(n: <span class="built_in">number</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.takeImpl(n))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *takeImpl&lt;T&gt;(n: <span class="built_in">number</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (n-- &lt;= <span class="number">0</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">yield</span> value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ drop()</span></span><br><span class="line">  drop&lt;T&gt;(n: <span class="built_in">number</span>): FluentIterable&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FluentIterable(<span class="built_in">this</span>.dropImpl(n))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> *dropImpl&lt;T&gt;(n: <span class="built_in">number</span>): IterableIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> [v, k] <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (n-- &gt; <span class="number">0</span>) <span class="keyword">continue</span></span><br><span class="line">      <span class="keyword">yield</span> value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  reduce(init: T, op: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T): T &#123;</span><br><span class="line">    <span class="keyword">let</span> result: T = init;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> value <span class="keyword">of</span> <span class="built_in">this</span>.iter) &#123;</span><br><span class="line">      result = op(result, value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>åº”ç”¨filter/reduceç®¡é“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> root: BinaryTreeNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> BinaryTreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> BinaryTreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">3</span>)</span><br><span class="line">root.right = <span class="keyword">new</span> BinaryTreeNode(<span class="number">4</span>)</span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//    2     4</span></span><br><span class="line"><span class="comment">//     3</span></span><br><span class="line"><span class="comment">// ä¸­åºéå†æ‰“å°ç»“æœï¼š2 3 1 4</span></span><br><span class="line"><span class="keyword">const</span> result: <span class="built_in">number</span> = <span class="keyword">new</span> FluentIterable(inOrderIterator(root)).filter(<span class="function"><span class="params">value</span> =&gt;</span> value % <span class="number">2</span> == <span class="number">0</span>).reduce(<span class="number">0</span>, <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>

<h3 id="çº¦æŸç±»å‹å‚æ•°"><a href="#çº¦æŸç±»å‹å‚æ•°" class="headerlink" title="çº¦æŸç±»å‹å‚æ•°"></a>çº¦æŸç±»å‹å‚æ•°</h3><p>çº¦æŸå‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªç±»å‹å®å‚å¿…é¡»å…·æœ‰çš„èƒ½åŠ›ï¼ˆè¯¥ç±»å‹ç‹¬æœ‰çš„æ–¹æ³•ï¼Œå±æ€§ç­‰ï¼‰ã€‚ä¸€æ—¦è¦æ±‚æ³›å‹ç±»å‹è¦å¿…é¡»æœ‰ç‰¹å®šæˆå‘˜ï¼Œå°±ä½¿ç”¨çº¦æŸå°†å…è®¸ç±»å‹çš„é›†åˆé™åˆ¶ä¸ºå…·æœ‰å¿…è¦æˆå‘˜çš„é‚£äº›ç±»å‹</p>
<figure class="highlight ts"><figcaption><span>ä½¿ç”¨ç±»å‹çº¦æŸçš„ renderAll</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IRenderable &#123;</span><br><span class="line">  render(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderAll</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">IRenderable</span>&gt;(<span class="params">iter: Iterable&lt;T&gt;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> iter) &#123;</span><br><span class="line">    item.render()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•"><a href="#å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•" class="headerlink" title="å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•"></a>å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•</h4><blockquote>
<p>ä»¥å®ç°ä¸€ä¸ª <code>max()</code> æ³›å‹ç®—æ³•ä¸ºä¾‹</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Icomparable æ¥å£</span></span><br><span class="line"><span class="built_in">enum</span> ComparisonResult &#123;</span><br><span class="line">  LessThan,</span><br><span class="line">  Equal,</span><br><span class="line">  GreeterThan</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Icomparable&lt;T&gt; &#123;</span><br><span class="line">  compareTo(value: T): ComparisonResult;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨æ— å€¼çš„æƒ…å†µä¸‹ä¼šè¿”å›undefined</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ä¸ä½¿ç”¨ for ofå¾ªç¯ï¼Œè€Œä½¿ç”¨ next()æ‰‹åŠ¨å‘å‰æ¨è¿›è¿­ä»£å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">iter: Iterable&lt;T&gt;</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> iterator: Iterator&lt;T&gt; = iter[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">  <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> current: IteratorResult&lt;T&gt; = iter.next()</span><br><span class="line">  <span class="keyword">if</span> (current.done) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">let</span> result: T = current.value</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    current = iterator.next()</span><br><span class="line">    <span class="keyword">if</span> (current.done) <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">if</span> (current.value.compareTo(result) == ComparisonResult.GreeterThan) &#123;</span><br><span class="line">      result = current.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ª compare æ–¹æ³•ä½œä¸ºå®å‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">iter: Iterable&lt;T&gt;, compare: (x: T, y: T) =&gt; ComparisonResult</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> iterator: Iterator&lt;T&gt; = iter[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">  <span class="comment">// å–å‡ºç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  <span class="keyword">let</span> current: IteratorResult&lt;T&gt; = iter.next()</span><br><span class="line">  <span class="keyword">if</span> (current.done) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">let</span> result: T = current.value</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    current = iterator.next()</span><br><span class="line">    <span class="keyword">if</span> (current.done) <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">if</span> (compare(current.value, result) === ComparisonResult.GreeterThan) &#123;</span><br><span class="line">      result = current.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¹ é¢˜-5"><a href="#ä¹ é¢˜-5" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h4><p>å®ç°ä¸€ä¸ªæ³›å‹å‡½æ•° <code>Clamp(value, min, max)</code>, å¦‚æœ `min &lt; value &lt; max ? value : (value &lt;= min ? min : max)</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> ComparisonResult &#123;</span><br><span class="line">  LessThan,</span><br><span class="line">  Equal,</span><br><span class="line">  GreeterThan</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Icomparable&lt;T&gt; &#123;</span><br><span class="line">  compareTo(value: T): ComparisonResult;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Clamp</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Icomparable</span>&lt;<span class="title">T</span>&gt;&gt;(<span class="params">v: T, min: T, max: T</span>): <span class="title">T</span> | <span class="title">undefined</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">if</span> (value.compareTo(min) === ComparisonResult.LessThan) <span class="keyword">return</span> min</span><br><span class="line">  <span class="keyword">if</span> (value.compareTo(max) === ComparisonResult.GreeterThan) <span class="keyword">return</span> max</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é«˜æ•ˆ-reverse-å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•"><a href="#é«˜æ•ˆ-reverse-å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•" class="headerlink" title="é«˜æ•ˆ reverse å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•"></a>é«˜æ•ˆ reverse å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•</h3><blockquote>
<p>ä½¿ç”¨ä¸€ä¸ªæ ˆå­˜å‚¨æ¥å®ç°<code>reverse</code>çš„ç©ºé—´æ˜¯O(n)ï¼Œæ—¶é—´ä¹Ÿæ˜¯T(n)ï¼Œéƒ½æ˜¯çº¿æ€§çš„ï¼›ä½¿ç”¨æ•°ç»„äº¤æ¢ä¸¤å¤´æ¥å®ç°<code>reverse</code>çš„ç©ºé—´æ˜¯O(1)ï¼Œåªç”¨äº†ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ—¶é—´æ˜¯T(n/2)</p>
</blockquote>
<h4 id="è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—"><a href="#è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—" class="headerlink" title="è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—"></a>è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—</h4><p>åˆ¤æ–­è¿­ä»£å™¨åˆé€‚åº”è¯¥åœæ­¢=æ•è·2ä¸ªè¿­ä»£å™¨ç›¸åŒçš„æ—¶æœºï¼šé‡æ–°å®šä¹‰ä¸ºä¸€ç»„æ¥å£ï¼Œå…¬å¼€ä¸€ä¸ª<code>get()</code>æ–¹æ³•ï¼Œç”¨äºè¿”å›<code>T</code>ç±»å‹çš„ä¸€ä¸ªå€¼ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»è¿­ä»£å™¨ä¸­è¯»å–å€¼</p>
<figure class="highlight ts"><figcaption><span>'IReadable<T>, IIncrementable<T>, IInputIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get() ç”¨äºè·å–è¿­ä»£å™¨å½“å‰çš„å€¼</span></span><br><span class="line"><span class="keyword">interface</span> IReadable&lt;T&gt; &#123;</span><br><span class="line">  get(): T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// increment() ç”¨äºå°†è¿­ä»£å™¨æ¨è¿›åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">interface</span> IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  increment(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IInputIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IInputIterator): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºé“¾è¡¨å®ç°ä¸€ä¸ªæ»¡è¶³æ–°çš„ <code>IInputIterator&lt;T&gt;</code> æ¥å£çš„ <code>LinkedListInputIterator&lt;T&gt;</code></p>
<blockquote>
<p>è¾“å…¥è¿­ä»£å™¨: èƒ½å¤Ÿéå†åºåˆ—ä¸€æ¬¡å¹¶æä¾›å…¶å€¼çš„è¿­ä»£å™¨ï¼Œä¸èƒ½ç¬¬äºŒæ¬¡é‡æ”¾å€¼ã€‚å¹¶éå¿…é¡»éå†æŒä¹…æ€§æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä»ç”Ÿæˆå™¨æˆ–è€…å…¶ä»–æŸç§æ•°æ®æºæä¾›å€¼ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>é“¾è¡¨è¾“å…¥è¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LinkedListInputIterator&lt;T&gt; <span class="keyword">implements</span> IInputIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>();</span><br><span class="line">    <span class="built_in">this</span>.node = <span class="built_in">this</span>.node.next</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node.value</span><br><span class="line">  &#125;</span><br><span class="line">  equals(other: IInputIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node == (&lt;LinkedListInputIterator&lt;T&gt;&gt;other).node</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ï¼šé“¾è¡¨ä¸Šçš„ä¸€å¯¹è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">const</span> head: LinkedListNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListNode(<span class="number">0</span>)</span><br><span class="line">head.next = <span class="keyword">new</span> LinkedListNode(<span class="number">1</span>)</span><br><span class="line">head.next.next = <span class="keyword">new</span> LinkedListNode(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">let</span> begin: IInputIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListInputIterator(head)</span><br><span class="line"><span class="comment">// end çš„å€¼æ˜¯ undefined</span></span><br><span class="line"><span class="keyword">let</span> end: IInputIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListInputIterator(<span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¾“å‡ºè¿­ä»£å™¨: èƒ½å¤Ÿéå†ä¸€ä¸ªåºåˆ—å¹¶å‘å…¶å¸ä»»å€¼çš„è¿­ä»£å™¨ï¼Œå¹¶ä¸éœ€è¦èƒ½å¤Ÿè¯»å€¼ã€‚åŒæ ·çš„ï¼Œå¹¶éå¿…é¡»éå†æŒä¹…æ€§æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥æŠŠå€¼å¸ä»»å…¶ä»–è¾“å‡ºã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'IWritable<T> and IOutputIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IWritable&lt;T&gt; &#123;</span><br><span class="line">  set(value: T): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IOutputIterator&lt;T&gt; <span class="keyword">extends</span> IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IOutputIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°ä¸€ä¸ªå†™å…¥åˆ°æ§åˆ¶å°çš„è¾“å‡ºè¿­ä»£å™¨ï¼šå†™å…¥åˆ°è¾“å‡ºæµã€‚ä¾‹å¦‚ï¼šç½‘ç»œè¿æ¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯ç­‰ï¼Œä½†æ˜¯ä¸èƒ½è¯»å€¼ã€‚</p>
<figure class="highlight ts"><figcaption><span>æ§åˆ¶å°è¾“å‡ºè¿­ä»£å™¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> ConsoleOutputIterator&lt;T&gt; <span class="keyword">implements</span> IOutputIterator&lt;T&gt; &#123;</span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªä¾‹å­æ²¡æœ‰éå†æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¯ä»¥å•¥ä¹Ÿä¸åš</span></span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;&#125;</span><br><span class="line">  equals(other: IOutputIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// å§‹ç»ˆè¿”å›falseï¼Œå› ä¸ºå†™å…¥æ§åˆ¶å°æ²¡æœ‰å¯ä»¥æ¯”è¾ƒçš„åºåˆ—æœ«å°¾</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>å…·æœ‰è¾“å…¥å’Œè¾“å‡ºè¿­ä»£å™¨çš„map</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IInputIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IInputIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  out: IOutputIterator&lt;U&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  func: (value: T) =&gt; U</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (!begin.equals(end)) &#123;</span><br><span class="line">    out.set(func(begin.get()))</span><br><span class="line">    begin.increment()</span><br><span class="line">    out.increment()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æœ‰ç”¨çš„find"><a href="#æœ‰ç”¨çš„find" class="headerlink" title="æœ‰ç”¨çš„find()"></a><code>æœ‰ç”¨çš„find()</code></h4><p>å‰å‘è¿­ä»£å™¨ï¼šå‘å‰æ¨è¿›ï¼Œå¯ä»¥è¯»å–å½“å‰ä½ç½®çš„å€¼ä»¥åŠæ›´æ–°è¯¥å€¼çš„è¿­ä»£å™¨ã€‚å‰å‘è¿­ä»£å™¨ä¹Ÿå¯ä»¥è¢«å…‹éš†ï¼Œä½¿å¾—æ¨è¿›è¯¥è¿­ä»£å™¨ä¸ä¼šå½±å“è¯¥è¿­ä»£å™¨çš„å…‹éš†ã€‚è·Ÿè¾“å…¥è¾“å‡ºè¿­ä»£å™¨ä¸åŒï¼Œå®ƒå¯ä»¥å¤šæ¬¡éå†ä¸€ä¸ªåºåˆ—ã€‚åœ¨æ¨è¿›åŸè¿­ä»£å™¨æ—¶ï¼Œå‰¯æœ¬è¿­ä»£å™¨ä¸ä¼šç§»åŠ¨ï¼Œæ˜¯ç‹¬ç«‹çš„ã€‚å› æ­¤å®ƒå¯ä»¥å¤šæ¬¡éå†ã€‚</p>
<figure class="highlight ts"><figcaption><span>'IForwardIterator<T> and LinkedListIterator<T> å®ç° IForwardIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IForwardIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  equals(other: IForwardIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IForwardIterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> LinkedListIterator&lt;T&gt; <span class="keyword">implements</span> IForwardIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">node: LinkedListNode&lt;T&gt; | <span class="literal">undefined</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.node) <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">this</span>.node = <span class="built_in">this</span>.node.next</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node.value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// set() æ˜¯ IWritable&lt;T&gt; éœ€è¦çš„ä¸€ä¸ªé¢å¤–çš„æ–¹æ³•ï¼Œç”¨äºå°ä¿¡é“¾è¡¨èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.node) <span class="keyword">throw</span> <span class="built_in">Error</span>()</span><br><span class="line">    <span class="built_in">this</span>.node.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// equals ç°åœ¨æœŸæœ›æ”¶åˆ°å¦å¤–ä¸€ä¸ª IForwardIterator&lt;T&gt;</span></span><br><span class="line">  equals(other: IForwardIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.node = (&lt;LinkedListIterator&lt;T&gt;&gt;other).node</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">//  åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ï¼ŒæŒ‡å‘ä¸å½“å‰è¿­ä»£å™¨ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">  clone(): IForwardIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LinkedListIterator(<span class="built_in">this</span>.node)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨å‰å‘è¿­ä»£å™¨çš„find</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  pred: (value: T) =&gt; booean</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pred(begin.equals(end))) &#123;</span><br><span class="line">      <span class="keyword">return</span> begin</span><br><span class="line">    &#125;</span><br><span class="line">    begin.increment()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> end</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åº”ç”¨ï¼šå°†é“¾è¡¨ä¸­çš„42æ›¿æ¢ä¸º0</span></span><br><span class="line"><span class="keyword">let</span> head: LinkedListNode&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> LinkedListNode(<span class="number">1</span>)</span><br><span class="line">head.next = <span class="keyword">new</span> LinkedListNode(<span class="number">2</span>)</span><br><span class="line">head.next.next = <span class="keyword">new</span> LinkedListNode(<span class="number">42</span>)</span><br><span class="line"><span class="keyword">let</span> begin: IForwardIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> IForwardIterator(head)</span><br><span class="line"><span class="keyword">let</span> end: IForwardIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> IForwardIterator(<span class="literal">undefined</span>)</span><br><span class="line"><span class="keyword">let</span> iter: IForwardIterator&lt;<span class="built_in">number</span>&gt; = find(begin, end, <span class="function">(<span class="params">value: <span class="built_in">number</span></span>) =&gt;</span> value == <span class="number">42</span>)</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="keyword">if</span> (!iter.equals(end)) &#123;</span><br><span class="line">  iter.set(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é«˜æ•ˆçš„reverse"><a href="#é«˜æ•ˆçš„reverse" class="headerlink" title="é«˜æ•ˆçš„reverse()"></a>é«˜æ•ˆçš„<code>reverse()</code></h4><p>æ•°ç»„å®ç°<code>reverse()</code>æ—¶æ˜¯ä»æ•°ç»„çš„ä¸¤ç«¯å¼€å§‹äº’æ¢å…ƒç´ ï¼Œä¸€ç›´é€’å¢å‰å‘ç´¢å¼•ã€‚é€’å‡åå‘ç´¢å¼•ï¼Œç›´åˆ°ä¸¤è€…ç›¸é‡ã€‚</p>
<blockquote>
<p>åŒå‘è¿­ä»£å™¨ï¼šä¸ä»…å…·æœ‰å‰å‘è¿­ä»£å™¨çš„æ‰€æœ‰èƒ½åŠ›ï¼Œè€Œä¸”è¿˜å¯ä»¥é€’å‡ã€‚æ—¢èƒ½å‰å‘ï¼Œåˆèƒ½åå‘éå†ã€‚å¯ä»¥è¯»å†™å½“å‰å…ƒç´ çš„å€¼ï¼Œå…‹éš†è‡ªå·±ï¼Œä»¥åŠå‘å‰æˆ–å‘åæ­¥è¿›ã€‚</p>
</blockquote>
<p>é“¾è¡¨ä¸æ”¯æŒåå‘è¿­ä»£ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒå‘é“¾è¡¨ä¿å­˜å…¶å‰å¯¼èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p>
<figure class="highlight ts"><figcaption><span>'IBiddirectionalIterator<T> and ArrayIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IBiddirectionalIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  decrement(): <span class="built_in">void</span>;</span><br><span class="line">  equals(other: IBiddirectionalIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IBiddirectionalIterator&lt;T&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ArrayIterator&lt;T&gt; <span class="keyword">implements</span> IBiddirectionalIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> array: T[];</span><br><span class="line">  <span class="keyword">private</span> index: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">array: T[], index: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.array = array;</span><br><span class="line">    <span class="built_in">this</span>.index = index</span><br><span class="line">  &#125;</span><br><span class="line">  get(): T &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.array(<span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">  set(value: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.array(<span class="built_in">this</span>.index) = value</span><br><span class="line">  &#125;</span><br><span class="line">  increment(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index++</span><br><span class="line">  &#125;</span><br><span class="line">  decrement(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index--</span><br><span class="line">  &#125;</span><br><span class="line">  equals(other: IBiddirectionalIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index == (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">  clone(): IBiddirectionalIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayIterator(<span class="built_in">this</span>.array, <span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>ä½¿ç”¨åŒå‘è¿­ä»£å™¨çš„reverse</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>&lt;<span class="title">T</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IBiddirectionalIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IBiddirectionalIterator&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end)) &#123;</span><br><span class="line">    <span class="comment">// end ä»æ•°ç»„æœ«å°¾åé¢çš„ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦é€’å‡</span></span><br><span class="line">    end.decrement()</span><br><span class="line">    <span class="keyword">if</span> (begin.equals(end)) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">const</span> tmp: T = begin.get()</span><br><span class="line">    begin.set(end.get())</span><br><span class="line">    end.set(temp)</span><br><span class="line">    begin.increment()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¿»è½¬ä¸€ä¸ªæ•°å€¼æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> array: <span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> begin: IBiddirectionalIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> ArrayIterator(array, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> end: IBiddirectionalIterator&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> ArrayIterator(array, array.length) <span class="comment">// å°†æ•°ç»„çš„endè¿­ä»£å™¨åˆå§‹åŒ–ä¸ºç´¢å¼•é•¿åº¦ï¼Œæ‰€ä»¥åˆå§‹array[end]å€¼ä¸ºundefined</span></span><br><span class="line">reverse(begin, end)</span><br><span class="line"><span class="built_in">console</span>.log(array) <span class="comment">// [5,4,3,2,1]</span></span><br></pre></td></tr></table></figure>

<h4 id="é«˜æ•ˆåœ°è·å–å…ƒç´ "><a href="#é«˜æ•ˆåœ°è·å–å…ƒç´ " class="headerlink" title="é«˜æ•ˆåœ°è·å–å…ƒç´ "></a>é«˜æ•ˆåœ°è·å–å…ƒç´ </h4><p>éšæœºè®¿é—®è¿­ä»£å™¨ï¼šèƒ½å¤Ÿä»¥O(1)æ—¶é—´å‘å‰æˆ–å‘åè·³è¿‡ä»»æ„å¤šå…ƒç´ ã€‚å¯ä»¥è¯»å†™å½“å‰å…ƒç´ çš„å€¼ã€å…‹éš†è‡ªå·±ä»¥åŠå‘å‰æˆ–å‘åç§»åŠ¨ä»»æ„å…ƒç´ ã€‚</p>
<blockquote>
<p>æ•°ç»„å¯ä»¥é€šè¿‡ç´¢å¼•å¿«é€Ÿè·å–ä»»ä½•å…ƒç´ ï¼Œä½†æ˜¯åŒå‘é“¾è¡¨/é“¾è¡¨å‡ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨ã€‚</p>
</blockquote>
<figure class="highlight ts"><figcaption><span>'IRandomAccessIterator<T> & æ›´æ–°åçš„ ArrayIterator<T>'</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IRandomAccessIterator&lt;T&gt; <span class="keyword">extends</span> IReadable&lt;T&gt;, IWritable&lt;T&gt;, IIncrementable&lt;T&gt; &#123;</span><br><span class="line">  decrement(): <span class="built_in">void</span>;</span><br><span class="line">  equals(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  clone(): IRandomAccessIterator&lt;T&gt;;</span><br><span class="line">  move(n: <span class="built_in">number</span>): <span class="built_in">void</span>;</span><br><span class="line">  distance(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> ArrayIterator&lt;T&gt; <span class="keyword">implements</span> IRandomAccessIterator&lt;T&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// ä¸ä¸Šé¢ç›¸åŒçš„éƒ¨åˆ†</span></span><br><span class="line">  <span class="comment">// æ›´æ–°</span></span><br><span class="line">  equals(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index == (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">  clone(): IRandomAccessIterator&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayIterator(<span class="built_in">this</span>.array, <span class="built_in">this</span>.index)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å°†è¿­ä»£å™¨æ¨è¿› n ä¸ªæ­¥é•¿ï¼ˆn å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œä»£è¡¨å‘åç§»åŠ¨ï¼‰</span></span><br><span class="line">  move(n: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.index += n</span><br><span class="line">  &#125;</span><br><span class="line">  distance(other: IRandomAccessIterator&lt;T&gt;): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.index - (&lt;ArrayIterator&lt;T&gt;&gt;other).index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ç°ä¸€ä¸ª <code>elementAt()</code> ç®—æ³•ï¼Œè¿”å›åªæƒ³åºåˆ—ä¸­ç¬¬nä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚ä½¿ç”¨ä¸€ä¸ªè¾“å…¥è¿­ä»£å™¨æ¥å®ç°æ—¶ï¼šéœ€è¦é€’å¢è¿­ä»£å™¨ <code>n</code> æ¬¡æ­¤æ¡ˆè¾¾åˆ°æœŸæœ›çš„åŸè‰²ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›ä½¿ç”¨éšæœºè®¿é—®è¿­ä»£å™¨æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›</p>
<figure class="highlight ts"><figcaption><span>è®¿é—®æŒ‡å®šä½ç½®çš„å…ƒç´ </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAtRandomAccessIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IRandomAccessIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IRandomAccessIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IRandomAccessIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// ç§»åŠ¨ n ä¸ªå…ƒç´ </span></span><br><span class="line">  begin.move(n)</span><br><span class="line">  <span class="keyword">if</span> (begin.distance(end) &lt;= <span class="number">0</span>) <span class="keyword">return</span> end;</span><br><span class="line">  <span class="keyword">return</span> begin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªé€‚åº”ç®—æ³•"><a href="#è‡ªé€‚åº”ç®—æ³•" class="headerlink" title="è‡ªé€‚åº”ç®—æ³•"></a>è‡ªé€‚åº”ç®—æ³•</h3><figure class="highlight ts"><figcaption><span>ä½¿ç”¨è¾“å…¥è¿­ä»£å™¨çš„elementAt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAtForwardIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(!begin.equals(end) &amp;&amp; n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    begin.increment()</span><br><span class="line">    n--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> begin</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><figcaption><span>è‡ªé€‚åº”çš„elementAt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isRandomAccessIterator</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  iter: IForwardIterator&lt;T&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">iter</span> <span class="title">is</span> <span class="title">IRandomAccessIterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;distabce&#x27;</span> <span class="keyword">in</span> iter</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementAt</span>&lt;<span class="title">T</span>&gt; (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  begin: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  end: IForwardIterator&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">  n: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">IForwardIterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(isRandomAccessIterator(begin) &amp;&amp; isRandomAccessIterator(end)) &#123;</span><br><span class="line">    <span class="keyword">return</span> elementAtRandomAccessIterator(begin, end, n)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> elementAtForwardIterator(begin, end, n)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/typeScript-javaScript-%E7%BC%96%E7%A8%8B%E4%B8%8E%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/" rel="tag"># typeScript, javaScript, ç¼–ç¨‹ä¸ç±»å‹ç³»ç»Ÿ</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/01/11/ilearnVue3/" rel="prev" title="Vue & Mutable">
      <i class="fa fa-chevron-left"></i> Vue & Mutable
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/01/11/ilearnFrancais/" rel="next" title="FranÃ§ais">
      FranÃ§ais <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-Subtyping-%E5%84%BF%E7%B1%BB%E5%9E%8B%E5%85%B3%E7%B3%BB"><span class="nav-number">1.</span> <span class="nav-text">ç¬¬ä¸ƒç«  - Subtyping å„¿ç±»å‹å…³ç³»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8TS%E4%B8%AD%E5%8C%BA%E5%88%86%E7%9B%B8%E4%BC%BC%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.</span> <span class="nav-text">åœ¨TSä¸­åŒºåˆ†ç›¸ä¼¼çš„ç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Subtyping-%E7%9A%84%E6%9E%84%E6%88%90"><span class="nav-number">1.1.1.</span> <span class="nav-text">Subtyping çš„æ„æˆ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Structural-Subtyping-%E5%92%8C-Normal-Subtyping-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.1.2.</span> <span class="nav-text">Structural Subtyping å’Œ Normal Subtyping çš„ä¼˜ç¼ºç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8-TS-%E4%B8%AD%E6%A8%A1%E6%8B%9F-Normal-Subtyping"><span class="nav-number">1.1.3.</span> <span class="nav-text">åœ¨ TS ä¸­æ¨¡æ‹Ÿ Normal Subtyping</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Subtype-%E4%BA%9A%E7%B1%BB%E5%9E%8B%E3%80%81%E5%84%BF%E7%B1%BB%E5%9E%8B-%E7%9A%84%E6%9E%81%E7%AB%AF%E6%83%85%E5%86%B5"><span class="nav-number">1.2.</span> <span class="nav-text">Subtype(äºšç±»å‹ã€å„¿ç±»å‹)çš„æç«¯æƒ…å†µ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#User%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E6%A3%80%E6%9F%A5-isUser"><span class="nav-number">1.2.1.</span> <span class="nav-text">Userçš„è¿è¡Œæ—¶æ£€æŸ¥ - isUser()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B6%E5%B1%82%E7%B1%BB%E5%9E%8B-Top-Type-unknown"><span class="nav-number">1.2.2.</span> <span class="nav-text">é¡¶å±‚ç±»å‹(Top Type) - unknown</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E6%83%85%E5%86%B5%E7%9A%84%E5%80%BC"><span class="nav-number">1.2.3.</span> <span class="nav-text">é”™è¯¯æƒ…å†µçš„å€¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%81%E8%AE%B8%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="nav-number">1.3.</span> <span class="nav-text">å…è®¸çš„æ›¿æ¢</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Subtyping-%E4%B8%8E%E5%92%8C%E7%B1%BB%E5%9E%8B%EF%BC%88Sum-Type%EF%BC%89"><span class="nav-number">1.3.1.</span> <span class="nav-text">Subtyping ä¸å’Œç±»å‹ï¼ˆSum Typeï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Subtyping-and-collections-%E9%9B%86%E5%90%88"><span class="nav-number">1.3.2.</span> <span class="nav-text">Subtyping and collections(é›†åˆ)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LinkedList-lt-Triangle-gt-%E4%BD%9C%E4%B8%BALinkedList-lt-Shape-gt"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">LinkedList&lt;Triangle&gt;ä½œä¸ºLinkedList&lt;Shape&gt;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Subtyping-%E5%92%8C%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.3.3.</span> <span class="nav-text">Subtyping å’Œå‡½æ•°çš„è¿”å›ç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#gt-Triangle-%E4%BD%9C%E4%B8%BA-gt-Shape"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">() &#x3D;&gt; Triangle ä½œä¸º () &#x3D;&gt; Shape</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#gt-Shape-%E4%BD%9C%E4%B8%BA-gt-Triangle"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">() &#x3D;&gt; Shape ä½œä¸º () &#x3D;&gt; Triangle</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Subtyping-%E5%92%8C%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9E%E5%8F%82%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.3.4.</span> <span class="nav-text">Subtyping å’Œå‡½æ•°çš„å®å‚ç±»å‹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%8F%98%E6%88%90%E7%9A%84%E5%85%83%E7%B4%A0-%E5%BA%94%E7%94%A8subtype"><span class="nav-number">2.</span> <span class="nav-text">ç¬¬å…«ç«  - é¢å‘å¯¹è±¡å˜æˆçš„å…ƒç´ -åº”ç”¨subtype</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E5%A5%91%E7%BA%A6"><span class="nav-number">2.1.</span> <span class="nav-text">ä½¿ç”¨æ¥å£å®šä¹‰å¥‘çº¦</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0"><span class="nav-number">2.1.1.</span> <span class="nav-text">ç»ƒä¹ </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF%E6%95%B0%E6%8D%AE%E5%92%8C%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.2.</span> <span class="nav-text">ç»§æ‰¿æ•°æ®å’Œè¡Œä¸º</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E3%80%8C%E6%98%AF%E4%B8%80%E4%B8%AA%E3%80%8D%E7%BB%8F%E9%AA%8C%E5%87%86%E5%88%99"><span class="nav-number">2.2.1.</span> <span class="nav-text">ã€Œæ˜¯ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E6%A8%A1%E5%B1%82%E6%AC%A1"><span class="nav-number">2.2.2.</span> <span class="nav-text">å»ºæ¨¡å±‚æ¬¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E5%8C%96%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.2.3.</span> <span class="nav-text">å‚æ•°åŒ–è¡¨è¾¾å¼çš„è¡Œä¸º</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%95%B0%E6%8D%AE%E5%92%8C%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.3.</span> <span class="nav-text">ç»„åˆæ•°æ®å’Œè¡Œä¸º</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E3%80%8C%E6%9C%89%E4%B8%80%E4%B8%AA%E3%80%8D%E7%BB%8F%E9%AA%8C%E5%87%86%E5%88%99"><span class="nav-number">2.3.1.</span> <span class="nav-text">ã€Œæœ‰ä¸€ä¸ªã€ç»éªŒå‡†åˆ™</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E7%B1%BB"><span class="nav-number">2.3.2.</span> <span class="nav-text">å¤åˆç±»</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.3.3.</span> <span class="nav-text">å®ç°é€‚é…å™¨æ¨¡å¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E6%95%B0%E6%8D%AE%E5%92%8C%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.4.</span> <span class="nav-text">æ‰©å±•æ•°æ®å’Œè¡Œä¸º</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E6%89%A9%E5%B1%95%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.4.1.</span> <span class="nav-text">ä½¿ç”¨ç»„åˆæ‰©å±•è¡Œä¸º</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%B7%B7%E5%85%A5%E6%89%A9%E5%B1%95%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.4.2.</span> <span class="nav-text">ä½¿ç”¨æ··å…¥æ‰©å±•è¡Œä¸º</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TS-%E4%B8%AD%E7%9A%84%E6%B7%B7%E5%85%A5"><span class="nav-number">2.4.3.</span> <span class="nav-text">TS ä¸­çš„æ··å…¥</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98"><span class="nav-number">2.4.4.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%AF%E7%B2%B9%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%BB%A3%E7%A0%81%E7%9A%84%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="nav-number">2.5.</span> <span class="nav-text">çº¯ç²¹é¢å‘å¯¹è±¡ä»£ç çš„æ›¿ä»£æ–¹æ¡ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%92%8C%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.5.1.</span> <span class="nav-text">1.å’Œç±»å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.å‡½æ•°å¼ç¼–ç¨‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B"><span class="nav-number">2.5.3.</span> <span class="nav-text">3.æ³›å‹ç¼–ç¨‹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E6%B3%9B%E5%9E%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">ç¬¬ä¹ç«  - æ³›å‹æ•°æ®ç»“æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E8%80%A6%E5%85%B3%E6%B3%A8%E7%82%B9"><span class="nav-number">3.1.</span> <span class="nav-text">è§£è€¦å…³æ³¨ç‚¹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E9%87%8D%E7%94%A8%E7%9A%84%E6%81%92%E7%AD%89%E5%87%BD%E6%95%B0"><span class="nav-number">3.1.1.</span> <span class="nav-text">å¯é‡ç”¨çš„æ’ç­‰å‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E9%80%89%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.1.2.</span> <span class="nav-text">å¯é€‰ç±»å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.1.3.</span> <span class="nav-text">æ³›å‹ç±»å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-1"><span class="nav-number">3.1.4.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%B8%83%E5%B1%80"><span class="nav-number">3.2.</span> <span class="nav-text">æ³›å‹æ•°æ®å¸ƒå±€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%9B%E5%9E%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.2.1.</span> <span class="nav-text">æ³›å‹æ•°æ®ç»“æ„</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.2.2.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8C%85%E5%90%AB3%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%9A"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%E4%B8%AA%E5%85%B3%E6%B3%A8%E7%82%B9%EF%BC%9A"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">2ä¸ªå…³æ³¨ç‚¹ï¼š</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-2"><span class="nav-number">3.2.3.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%8D%E5%8E%86%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.3.</span> <span class="nav-text">éå†æ•°æ®ç»“æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">3.3.1.</span> <span class="nav-text">ä½¿ç”¨è¿­ä»£å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8C%96%E8%BF%AD%E4%BB%A3%E4%BB%A3%E7%A0%81"><span class="nav-number">3.3.2.</span> <span class="nav-text">æµæ°´çº¿åŒ–è¿­ä»£ä»£ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-3"><span class="nav-number">3.3.3.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="nav-number">3.4.</span> <span class="nav-text">æ•°æ®æµ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E7%AE%A1%E9%81%93"><span class="nav-number">3.4.1.</span> <span class="nav-text">å¤„ç†ç®¡é“</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95%E5%92%8C%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">4.</span> <span class="nav-text">ç¬¬åç«  - æ³›å‹ç®—æ³•å’Œè¿­ä»£å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E5%A5%BD%E7%9A%84-map-%E3%80%81filter-%E5%92%8Creduce"><span class="nav-number">4.1.</span> <span class="nav-text">æ›´å¥½çš„ map()ã€filter()å’Œreduce()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#filter-reduce-%E7%AE%A1%E9%81%93"><span class="nav-number">4.1.1.</span> <span class="nav-text">filter()&#x2F;reduce()ç®¡é“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-4"><span class="nav-number">4.1.2.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95"><span class="nav-number">4.2.</span> <span class="nav-text">å¸¸ç”¨ç®—æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="nav-number">4.3.</span> <span class="nav-text">çº¦æŸç±»å‹å‚æ•°</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B7%E6%9C%89%E7%B1%BB%E5%9E%8B%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95"><span class="nav-number">4.3.1.</span> <span class="nav-text">å…·æœ‰ç±»å‹çº¦æŸçš„æ³›å‹ç®—æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-5"><span class="nav-number">4.3.2.</span> <span class="nav-text">ä¹ é¢˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E6%95%88-reverse-%E5%92%8C%E5%85%B6%E4%BB%96%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E7%AE%97%E6%B3%95"><span class="nav-number">4.4.</span> <span class="nav-text">é«˜æ•ˆ reverse å’Œå…¶ä»–ä½¿ç”¨è¿­ä»£å™¨çš„ç®—æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A8%A1%E5%9D%97"><span class="nav-number">4.4.1.</span> <span class="nav-text">è¿­ä»£å™¨çš„åŸºç¡€æ¨¡å—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E7%94%A8%E7%9A%84find"><span class="nav-number">4.4.2.</span> <span class="nav-text">æœ‰ç”¨çš„find()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AB%98%E6%95%88%E7%9A%84reverse"><span class="nav-number">4.4.3.</span> <span class="nav-text">é«˜æ•ˆçš„reverse()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AB%98%E6%95%88%E5%9C%B0%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="nav-number">4.4.4.</span> <span class="nav-text">é«˜æ•ˆåœ°è·å–å…ƒç´ </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E9%80%82%E5%BA%94%E7%AE%97%E6%B3%95"><span class="nav-number">4.5.</span> <span class="nav-text">è‡ªé€‚åº”ç®—æ³•</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ä¸»ä½“-å®¢ä½“è”åˆåˆ›ä½œ</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
